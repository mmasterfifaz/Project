<ui:composition template="../../includes/customerInfo.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ajax="https://ajax4jsf.dev.java.net/ajax">
    <ui:define name="agentscript">
        <ui:include src="/front/includes/agentscript.xhtml">
            <ui:param name="pageId" value="21"/>
        </ui:include>
    </ui:define>
    <ui:define name="javascript">
    </ui:define>
    <ui:define name="title1">#{msg.saleManagement}</ui:define>
    <ui:define name="title2">#{msg.registration}</ui:define>
    <ui:define name="type">#{msg.customerHandling}</ui:define>

    <ui:define name="detail_1">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="10" valign="top"><img src="#{request.contextPath}/img/box09.png" alt="" width="10" height="48"/></td>
                <td valign="middle" background="#{request.contextPath}/img/box11.png">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td><h2 class="style1">#{msg.saleApproach}</h2></td>
                            <td align="right">                                
                                <a4j:commandButton image="/img/b_show_confirmation.png" title="Preview Confirmation Script"                                                   
                                                    onbegin="#{rich:component('waitPopup')}.show('',{height:'80px', width:'150px'})"
                                                    oncomplete="#{rich:component('waitPopup')}.hide(); #{rich:component('popupConfirm')}.show();" 
                                                    render="confirmScriptPanel"
                                                    execute="@this" limitRender="true" 
                                                    rendered="#{registrationPoController.purchaseOrder.id ne null}"
                                                    action="#{confirmationPoController.previewConfirmScript}" >
                                     <f:param name="poId" value ="#{registrationPoController.purchaseOrder.id}" />
                                     <f:param name="productId" value="#{registrationPoController.product.id}" />
                                     <f:param name="mainPage" value="history" />
                                 </a4j:commandButton>
                            </td>
            </tr>
        </table>
        </td>
        <td width="10" valign="top"><img src="#{request.contextPath}/img/box10.png" alt="" width="10" height="48"/></td>
        </tr>
        </table>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="5" background="#{request.contextPath}/img/box08.png"><img src="#{request.contextPath}/img/box08.png" width="5" height="5"/></td>
                    <td valign="top">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td align="right" class="subh03" style="background: url('#{request.contextPath}/img/bgsum.gif') repeat-x bottom;">
                                <table border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td width="59"><a href="#"><img src="#{request.contextPath}/img/b01_productlist01.png" id="Image61" name="Image61" border="0" onmouseout="changeImage('Image61', '#{request.contextPath}/img/b01_productlist01.png')" onmouseover="changeImage('Image61', '#{request.contextPath}/img/b01_productlist02.png')"/></a></td>
                                        <td width="22"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="67"><a href="#"><img src="#{request.contextPath}/img/b03_registra02.png" id="Image63" name="Image63" border="0" onmouseout="changeImage('Image63', '#{request.contextPath}/img/b03_registra02.png')" onmouseover="changeImage('Image63', '#{request.contextPath}/img/b03_registra02.png')"/></a></td>
                                        <td width="22"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="80"><a href="#"><img src="#{request.contextPath}/img/b04_sale01.png" id="Image65" name="Image65" width="68" height="28" border="0" onmouseout="changeImage('Image65', '#{request.contextPath}/img/b04_sale01.png')" onmouseover="changeImage('Image65', '#{request.contextPath}/img/b04_sale02.png')"/></a></td>
                                        <td width="34"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="96"><a href="#"><img src="#{request.contextPath}/img/b05_payment02.png" id="Image66" name="Image66" width="96" height="28" border="0" onmouseout="changeImage('Image66', '#{request.contextPath}/img/b05_payment02.png')" onmouseover="changeImage('Image66', '#{request.contextPath}/img/b05_payment02.png')"/></a></td>
                                        <td width="37"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="56"><a href="#"><img src="#{request.contextPath}/img/b06_saleresult02.png" id="Image68" name="Image68" width="56" height="28" border="0" onmouseout="changeImage('Image68', '#{request.contextPath}/img/b06_saleresult02.png')" onmouseover="changeImage('Image68', '#{request.contextPath}/img/b06_saleresult02.png')"/></a></td>
                                        <td width="30"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="78"><a href="#"><img src="#{request.contextPath}/img/b07_confirmation01.png" id="Image70" name="Image70" width="65" height="28" border="0" onmouseout="changeImage('Image70', '#{request.contextPath}/img/b07_confirmation01.png')" onmouseover="changeImage('Image70', '#{request.contextPath}/img/b07_confirmation02.png')"/></a></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table width="100%" border="0" cellspacing="0" cellpadding="5">
                        <tr>
                            <td valign="top" width="240">
                        <ui:remove>
                                <h:selectOneMenu id="productcategory" value="#{saleApproachingController.productCategoryId}">
                                    <f:selectItem itemValue="0" itemLabel="All Product Category"/>
                                    <f:selectItems value="#{saleApproachingController.productCategoryList}"/>
                                    <a4j:ajax event="change" render="datatree, detail, quantity" listener="#{saleApproachingController.changeProductCategoryListener}"/>
                                </h:selectOneMenu>
                                <div class="scrollProduct">
                                    <rich:dataTable id="datatree" value="#{saleApproachingController.productList}" var="list">
                                        <rich:column style="border-bottom: 1px dotted #CCCCCC;width: 240px">
                                            <a4j:commandLink value="#{list.name}" 
                                                             actionListener="#{saleApproachingController.selectedProductListener}"
                                                             render="detail" limitRender="true">
                                                <f:param name="productId" value="#{list.id}"/>
                                            </a4j:commandLink>
                                        </rich:column>
                                    </rich:dataTable>
                                </div>
                        </ui:remove>
                            </td>
                            <td valign="top">
                                <!--<div class="scrollProduct"
                                     style="border: 10px; background-image: url(#{request.contextPath}/img/bg_00.gif); background-repeat: repeat-X;">
                                -->
                                    <h:panelGroup id="detail">
                                        <ui:include src="registrationformpo.xhtml"/>
                                    </h:panelGroup>
                                <!--</div>-->
                            </td>
                        </tr>
                    </table>
                </td>
                <td width="4" class="bg_right"></td>
            </tr>
        </table>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td background="#{request.contextPath}/img/box04.png" width="10" height="10"></td>
                <td background="#{request.contextPath}/img/box07.png"><img src="#{request.contextPath}/img/clear.gif" alt="" border="0"/></td>
                <td background="#{request.contextPath}/img/box03.png" width="10" height="10"></td>
            </tr>
        </table>
        
        <ui:include src="/front/customerHandling/confirmationPreviewPopup.xhtml" />
    </ui:define>

    <ui:define name="popupModal">
        <ui:include src="/share/waitpopup.xhtml"/>
        <!--        
        <a4j:status id="actionStatus" 
                    onstart="#{rich:component('waitPopup')}.show()"
                    onstop="#{rich:component('waitPopup')}.hide()" />
        -->
        <h:form>
            <ui:include src="/share/creditcardusagepopup.xhtml"/>
        </h:form>
        <ui:include id="selectProduct"
                    src="/front/customerHandling/popupSelectProduct.xhtml">
            <ui:param name="r" value="#{registrationPoController}"/>
        </ui:include>
    </ui:define>
</ui:composition>