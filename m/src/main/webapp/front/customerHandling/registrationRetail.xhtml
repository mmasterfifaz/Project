<ui:composition template="../../includes/customerInfo.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ajax="https://ajax4jsf.dev.java.net/ajax"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <ui:define name="agentscript">
        <ui:include src="/front/includes/agentscript.xhtml">
            <ui:param name="pageId" value="21"/>
        </ui:include>
    </ui:define>
    <ui:define name="javascript">
    </ui:define>
    <ui:define name="title1">#{msg.saleManagement}</ui:define>
    <ui:define name="title2">#{msg.registration}</ui:define>
    <ui:define name="type">#{msg.customerHandling}</ui:define>

    <ui:define name="detail_1">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="10" valign="top"><img src="#{request.contextPath}/img/box09.png" alt="" width="10" height="48"/></td>
                <td valign="middle" background="#{request.contextPath}/img/box11.png">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td><h2 class="style1">#{msg.saleApproach}</h2></td>
                            <td align="right"></td>
            </tr>
        </table>
        </td>
        <td width="10" valign="top"><img src="#{request.contextPath}/img/box10.png" alt="" width="10" height="48"/></td>
        </tr>
        </table>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="5" background="#{request.contextPath}/img/box08.png"><img src="#{request.contextPath}/img/box08.png" width="5" height="5"/></td>
                <td valign="top">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td align="right" class="subh03" style="background: url('#{request.contextPath}/img/bgsum.gif') repeat-x bottom;">
                                <table border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td width="59"><a href="04Approching01_productlist.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image61','','#{request.contextPath}/img/b01_productlist02.png',1)"><img src="#{request.contextPath}/img/b01_productlist01.png" name="Image61" width="59" height="28" border="0"/></a></td>
                                        <td width="22"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="67"><a href="04Approching03_registration.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image63','','#{request.contextPath}/img/b03_registra02.png',1)"><img src="#{request.contextPath}/img/b03_registra02.png" name="Image63" width="58" height="28" border="0"/></a></td>
                                        <td width="22"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="80"><a href="04Approching04_saleApproval.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image65','','#{request.contextPath}/img/b04_sale02.png',1)"><img src="#{request.contextPath}/img/b04_sale01.png" name="Image65" width="68" height="28" border="0"/></a></td>
                                        <td width="34"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="96"><a href="04Approching05_payment.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image66','','#{request.contextPath}/img/b05_payment02.png',1)"><img src="#{request.contextPath}/img/b05_payment01.png" name="Image66" width="96" height="28" border="0"/></a></td>
                                        <td width="37"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="56"><a href="04Approching06_SaleResult.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image68','','#{request.contextPath}/img/b06_saleresult02.png',1)"><img src="#{request.contextPath}/img/b06_saleresult01.png" name="Image68" width="56" height="28" border="0"/></a></td>
                                        <td width="30"><img src="#{request.contextPath}/img/arr04.png" width="22" height="28"/></td>
                                        <td width="78"><a href="04Approching07_Confirmation.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image70','','#{request.contextPath}/img/b07_confirmation02.png',1)"><img src="#{request.contextPath}/img/b07_confirmation01.png" name="Image70" width="65" height="28" border="0"/></a></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <br/><br/>
                    <table border="0" cellspacing="0" cellpadding="5" width="80%">
                        <tr>
                            <td style="color: #ec5a13;background-color: #F7B493;font-size: 13px;font-weight: bold;">1. Product</td>
                        </tr>
                    </table>
                    <rich:dataTable value="#{registrationRetailController.purchaseOrderDetailList}" var="list" headerClass="subh01">
                        <f:facet name="header">
                            <rich:columnGroup>
                                <rich:column style="text-align: left;"><h:outputText value="#{msg.productCode}" /></rich:column>
                                <rich:column style="text-align: left;"><h:outputText value="#{msg.productName}" /></rich:column>
                                <rich:column style="text-align: left;"><h:outputText value="#{msg.quantity}"/></rich:column>
                                <rich:column style="text-align: left;"><h:outputText value="#{msg.price}" /></rich:column>
                                <rich:column style="text-align: left;"><h:outputText value="#{msg.total}" /></rich:column>
                            </rich:columnGroup>
                        </f:facet>
                        <rich:column>
                            <h:outputText value="#{list.product.code}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{list.product.name}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{list.quantity}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{list.unitPrice}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{list.amount}" />
                        </rich:column>
                    </rich:dataTable>
                    <br/>
                    <table border="0" cellspacing="0" cellpadding="5" width="80%">
                        <tr>
                            <td style="color: #A42187;background-color: #EDD3E7;font-size: 13px;font-weight: bold;">2. Customer Information</td>
                        </tr>
                    </table>
                    <table border="0" cellspacing="0" cellpadding="3">
                        <tr>
                            <td align="right">#{msg.customerNameTitle} :</td>
                            <td><h:outputText value="#{registrationRetailController.purchaseOrder.customer.name} #{registrationRetailController.purchaseOrder.customer.surname}"/></td>
                        </tr>
                    </table>
                    <br/>
                    <table border="0" cellspacing="0" cellpadding="5" width="80%">
                        <tr>
                            <td style="color: #898F00;background-color: #DBDD84;font-size: 13px;font-weight: bold;">3. Address</td>
                        </tr>
                    </table>
                    <table width="80%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td width="40%">
                                <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                    <tr>
                                        <td class="line01" colspan="2"><h4>#{msg.billingAddress}</h4></td>
                                    </tr>
                                    <tr>
                                        <td width="30%" align="right">#{msg.fullName}</td>
                                        <td width="70%"><h:inputText id="billingFullName" styleClass="textfield"
                                                                     value="#{registrationRetailController.purchaseOrder.billingFullname}"/></td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.addressLine1}</td>
                                        <td><h:inputText id="billingAddressLine1" styleClass="textfield"
                                                         value="#{registrationRetailController.purchaseOrder.billingAddressLine1}"/>
                                    </td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.addressLine2}</td>
                                        <td><h:inputText id="billingAddressLine2" styleClass="textfield"
                                                     value="#{registrationRetailController.purchaseOrder.billingAddressLine2}"/></td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.province}</td>
                                        <td>
                                            <h:selectOneMenu id="billingProvince"
                                                             value="#{registrationRetailController.billingProvinceId}"
                                                             immediate="true"
                                                             valueChangeListener="#{registrationRetailController.billingProvinceListener}">
                                                <f:selectItem itemLabel="Please Select"/>
                                                <f:selectItems value="#{registrationRetailController.provinceList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                                <a4j:ajax event="change" render="billingDistrictId" execute="@this"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.district}</td>
                                        <td><h:selectOneMenu id="billingDistrictId" value="#{registrationRetailController.billingDistrictId}" immediate="true">
                                            <f:selectItem itemLabel="Please Select"/>
                                            <f:selectItems value="#{registrationRetailController.billingDistrictList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                    </h:selectOneMenu></td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.postalCode}</td>
                                        <td>
                                            <h:inputText id="billingPostalCode" maxlength="5" styleClass="textfield"
                                                         value="#{registrationRetailController.purchaseOrder.billingPostalCode}"
                                                         validatorMessage="Postal code invalid">
                                                <f:validateLength minimum="5" maximum="5"/>
                                                <rich:validator />
                                            </h:inputText>  <rich:message for="billingPostalCode" style="color:red"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td width="40%">
                                <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                    <tr>
                                        <td class="line01" colspan="2"><h4>#{msg.shippingAddress}</h4></td>
                                    </tr>
                                    <tr>
                                        <td width="30%" align="right">#{msg.fullName}</td>
                                        <td width="70%"><h:inputText id="shippingFullName" styleClass="textfield"
                                                                     value="#{registrationRetailController.purchaseOrder.shippingFullname}"/></td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.addressLine1}</td>
                                        <td><h:inputText id="shippingAddressLine1" styleClass="textfield"
                                                     value="#{registrationRetailController.purchaseOrder.shippingAddressLine1}"/></td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.addressLine2}</td>
                                        <td><h:inputText id="shippingAddressLine2" styleClass="textfield"
                                                     value="#{registrationRetailController.purchaseOrder.shippingAddressLine2}"/></td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.province}</td>
                                        <td>
                                            <h:selectOneMenu id="shippingProvince"
                                                             value="#{registrationRetailController.shippingProvinceId}"
                                                             immediate="true"
                                                             valueChangeListener="#{registrationRetailController.shippingProvinceListener}">
                                                <f:selectItem itemLabel="Please Select"/>
                                                <f:selectItems value="#{registrationRetailController.provinceList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                                <a4j:ajax event="change" render="shippingDistrictId" execute="@this"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.district}</td>
                                        <td>
                                            <h:selectOneMenu id="shippingDistrictId" value="#{registrationRetailController.shippingDistrictId}" immediate="true">
                                                <f:selectItem itemLabel="Please Select"/>
                                                <f:selectItems value="#{registrationRetailController.shippingDistrictList}" var="list" itemLabel="${list.name}" itemValue="#{list.id}"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right">#{msg.postalCode}</td>
                                        <td>
                                            <h:inputText id="shippingPostalCode" maxlength="5" styleClass="textfield"
                                                         value="#{registrationRetailController.purchaseOrder.shippingPostalCode}"
                                                         validatorMessage="Postal code invalid">
                                                <f:validateLength minimum="5" maximum="5"/>
                                                <rich:validator />
                                            </h:inputText>  <rich:message for="shippingPostalCode" style="color:red"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <br/>
                    <table border="0" cellspacing="0" cellpadding="5" width="80%">
                        <tr>
                            <td style="color: #C70303;background-color: #F4CDCD;font-size: 13px;font-weight: bold;">4. Payment Information</td>
                        </tr>
                    </table>
                    <table border="0" cellspacing="0" cellpadding="3">
<!--                        <tr>
                            <td align="right">#{msg.referenceNoReg} :</td>
                            <td><h:inputText value="#{registrationRetailController.purchaseOrder.refNo}" styleClass="textfield"/></td>
                        </tr>-->
                        <tr>
                            <td align="right">#{msg.paymentMethodReg} :</td>
                            <td>
                                <h:selectOneMenu value="#{registrationRetailController.purchaseOrder.paymentMethod}">
                                    <f:selectItem itemLabel="Please Select"/>
                                    <f:selectItem itemLabel="Credit Card" itemValue="Credit Card"/>
                                    <f:selectItem itemLabel="Debit Card" itemValue="Debit Card"/>
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">#{msg.cardTypeReg} :</td>
                            <td>
                                <h:selectOneMenu value="#{registrationRetailController.purchaseOrder.cardType}">
                                    <f:selectItem itemLabel="Please Select"/>
                                    <f:selectItem itemLabel="Visa" itemValue="Visa"/>
                                    <f:selectItem itemLabel="Master" itemValue="Master"/>
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">#{msg.cardHolderNameReg} :</td>
                            <td><h:inputText value="#{registrationRetailController.purchaseOrder.cardHolderName}" styleClass="textfield"/></td>
                        </tr>
                        <tr>
                            <td align="right">#{msg.cardExpiryDateReg} :</td>
                            <td><h:inputText value="#{registrationRetailController.purchaseOrder.cardExpiryMonth}" size="2" maxlength="2" styleClass="textfield"/>/
                            <h:inputText value="#{registrationRetailController.purchaseOrder.cardExpiryYear}" size="2" maxlength="2" styleClass="textfield"/></td>
                        </tr>
                        <tr>
                            <td align="right">#{msg.traceNoReg} :</td>
                            <td><h:inputText value="#{registrationRetailController.purchaseOrder.traceNo}" styleClass="textfield"/></td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2"><h:commandButton image="/img/b_payment.png" action="#{registrationRetailController.payment}"/></td>
                        </tr>
                    </table>
                    <br/>
                    <table border="0" cellspacing="0" cellpadding="5" width="80%">
                        <tr>
                            <td style="color: #0892DA;background-color: #AAD9F2;font-size: 13px;font-weight: bold;">5. Sale Result</td>
                        </tr>
                    </table>
                    <table border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td valign="top">&#160;</td>
                            <td valign="top">
                                <h:selectOneRadio value="#{registrationRetailController.purchaseOrder.saleResult}"
                                                  layout="pageDirection"
                                                  style="padding: 3px">
                                    <f:selectItem itemValue="Y" itemLabel="Yes"/>
                                    <f:selectItem itemValue="N" itemLabel="No"/>
                                    <f:selectItem itemValue="F" itemLabel="Follow Up"/>
                                    <a4j:ajax event="click" render="panelReason" execute="@this"/>
                                </h:selectOneRadio>
                            </td>
                            <td valign="top">
                            <h:panelGrid id="panelReason" columns="2" cellpadding="1">
                                <h:outputText value="&#160;" style="line-height: 25px"/>
                                <h:outputText value=" "/>
                                
                                <h:outputText value="Reason :"/>
                                <h:selectOneMenu id="nosaleReasonId"
                                                 value="#{registrationRetailController.nosaleReasonId}"
                                                 disabled="#{(fn:contains(registrationRetailController.purchaseOrder.saleResult, 'N') ? true : false)}">
                                    <f:selectItem itemLabel="Please Select"/>
                                    <f:selectItems value="#{registrationRetailController.nosaleReasonList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                </h:selectOneMenu>

                                <h:outputText value="Reason :"/>
                                <h:selectOneMenu id="followupsaleReasonId"
                                                 value="#{registrationRetailController.followupsaleReasonId}"
                                                 disabled="#{(fn:contains(registrationRetailController.purchaseOrder.saleResult, 'F') ? true : false)}">
                                    <f:selectItem itemLabel="Please Select"/>
                                    <f:selectItems value="#{registrationRetailController.followupsaleReasonList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                </h:selectOneMenu>

                                <h:outputText value="Schedule :"/>
                                <h:panelGroup>
                                    <rich:calendar value="#{registrationRetailController.purchaseOrder.followupsaleDate}"
                                                   locale="#{msg.locale}"
                                                   popup="true"
                                                   datePattern="#{msg.dateTimePattern}"
                                                   inputClass="textfield" inputSize="15" buttonClass="rfcalbtn"
                                                   resetTimeOnDateSelect="false"
                                                   defaultTime="12:00"
                                                   disabled="#{(fn:contains(registrationRetailController.purchaseOrder.saleResult, 'F') ? true : false)}"/>
                                </h:panelGroup>
                            </h:panelGrid>
                            </td>
                        </tr>
                    </table>
                    
                    <table border="0" cellspacing="0" cellpadding="5" width="80%">
                        <tr>
                            <td align="center"><h:commandButton image="/img/b_save.png" action="#{registrationRetailController.save}"/></td>
                        </tr>
                    </table>
                </td>
                <td width="4" class="bg_right"></td>
            </tr>
        </table>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td background="#{request.contextPath}/img/box04.png" width="10" height="10"></td>
                <td background="#{request.contextPath}/img/box07.png"><img src="#{request.contextPath}/img/clear.gif" alt="" border="0"/></td>
                <td background="#{request.contextPath}/img/box03.png" width="10" height="10"></td>
            </tr>
        </table>
    </ui:define>

</ui:composition>