<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:rich="http://richfaces.org/rich">

<style>
    .colStyle1 { width: 30%;
                 text-align: right; }
    .colStyle2 { width: 70%;}
    .colStyle3 { width: 50%;}
    .colPrice1 { text-align: right;
                 font-weight: bold}
    .colPrice2 { text-align: right; }
    .capitalized {
    text-transform: capitalize;
    }
</style>
<!-- BEGIN : 2015/11/20 fixed richfaces calendar (locale thai) by overriding calendar.js -->
<!--<h:outputScript  library="js" name="caloverride.js" />-->
<!--<script type="text/javascript" src="#{request.contextPath}/resources/js/caloverride.js"/>-->
<!-- END : 2015/11/20 -->

<!-- BEGIN : jquery calendar -->
<!--   <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" /> -->
<script src="#{request.contextPath}/jquery/calendar2/jquery-1.9.1.js"></script>
<script src="#{request.contextPath}/jquery/calendar2/jquery-ui-1.10.3.custom.js"></script>
<script src="#{request.contextPath}/jquery/calendar2/calendar.js"></script>
<link rel="stylesheet" href="#{request.contextPath}/jquery/calendar2/jquery-ui-1.10.3.custom.css" />
<link rel="stylesheet" href="#{request.contextPath}/jquery/calendar2/SpecialDateSheet.css" />

<script>
    $.datepicker.regional['th'] = {
        //changeMonth: true,
        //changeYear: true,
        yearOffSet: 543,
        //showOn: "button",
        buttonImage: '#{request.contextPath}/jquery/calendar2/calendar.gif',
        //buttonImageOnly: true,
        //dateFormat: 'dd M yy',
        //dayNames: ['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'],
        //dayNamesMin: ['อา', 'จ', 'อ', 'พ', 'พฤ', 'ศ', 'ส'],
        //monthNames: ['มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน', 'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'],
        //monthNamesShort: ['ม.ค.', 'ก.พ.', 'มี.ค.', 'เม.ย.', 'พ.ค.', 'มิ.ย.', 'ก.ค.', 'ส.ค.', 'ก.ย.', 'ต.ค.', 'พ.ย.', 'ธ.ค.'],
        //constrainInput: true,

        //prevText: 'ก่อนหน้า',
        //nextText: 'ถัดไป',
        yearRange: '-80:+80',
        //buttonText: 'เลือก'
    };
    $.datepicker.setDefaults($.datepicker.regional['th']);

    $(function() {
        $( "#datepicker" ).datepicker( $.datepicker.regional["th"] ); // Set ภาษาที่เรานิยามไว้ด้านบน
        //$( "#datepicker" ).datepicker("setDate", new Date()); //Set ค่าวันปัจจุบัน
    });

    function motorService(body){
        // <![CDATA[
        console.log(body);

        let data = JSON.parse(body);
        //console.log(data);
        var form = document.createElement("form");
        form.target = "_blank";
        form.method = "POST"; // or "post" if appropriate
        form.action = "https://bgcdisbweb.bigc.co.th/SmartBroker_ext/SingleSignOn.aspx"; //test
        //form.action = "https://bgcdisbweb.bigc.co.th/SmartBroker/SingleSignOn.aspx"; //production

        var param1 = document.createElement("input");
        param1.type = "hidden";
        param1.name = "EXT_USERID";
        param1.value = data['EXT_USERID'];
        form.appendChild(param1);
        var param2 = document.createElement("input");
        param2.type = "hidden";
        param2.name = "ACTION";
        param2.value = data['ACTION'];
        form.appendChild(param2);
        var param3 = document.createElement("input");
        param3.type = "hidden";
        param3.name = "DATA_INPUT";
        param3.value = JSON.stringify(data['DATA_INPUT'])
        form.appendChild(param3);
        document.body.appendChild(form);

        #{rich:component('waitPopup')}.hide();
        // result = window.open("", "_blank");
        // // console.log(result);
        // if (result) {
            //console.log(result)
            form.submit();
        // }

        // ]]>
    }

</script>
<!-- END : jquery calendar -->
<!--frm:reginfo:0:panelDiscount,-->
<a4j:poll id="poll" interval="10000" enabled="true" render="
frm:reginfo:0:flexfields:0:fxComboBox3,
frm:reginfo:0:flexfields:1:fxComboBox3,
frm:reginfo:0:flexfields:3:fxTextField3,
frm:reginfo:0:flexfields:4:fxTextField3,
frm:reginfo:0:flexfields:5:fxTextField3,
frm:reginfo:0:flexfields:5:fxTextField3,
frm:reginfo:0:motorNetPremium,
frm:reginfo:0:motorPrice,
frm:reginfo:0:totalamount,
regisfrm:reginfo:0:flexfields:0:fxComboBox3,
regisfrm:reginfo:0:flexfields:1:fxComboBox3,
regisfrm:reginfo:0:flexfields:3:fxTextField3,
regisfrm:reginfo:0:flexfields:4:fxTextField3,
regisfrm:reginfo:0:flexfields:5:fxTextField3,
regisfrm:reginfo:0:flexfields:6:fxTextField3,
regisfrm:reginfo:0:motorNetPremium,
regisfrm:reginfo:0:motorPrice,
regisfrm:reginfo:0:totalamount" actionListener="#{registrationPoController.renderDataFromBCIBUpdate}"/>

<h:inputHidden id="pageFrom" value="#{registrationPoController.pageFrom}"></h:inputHidden>
<a4j:queue name="regQueue" ignoreDupResponses="true"/>
<h:panelGroup id="productInfo"> 
    <h:panelGroup rendered="#{registrationPoController.categoryType eq 'motor'}">
        <h2>#{registrationPoController.productPlan.product.name}</h2>

        <table width="100%" border="0" cellpadding="3" cellspacing="0">
            <tr>
                <td valign="top" width="50%">
                    <table border="0" cellpadding="3" cellspacing="0">
                        <tr>
                            <td align="right" valign="top" width="200">บริษัทประกัน :</td>
                            <td valign="top" width="200">
                                <h:outputText value="#{registrationPoController.productPlan.product.productCategory.name}"/>
                                <a4j:commandButton image="/img/b_search.png" 
                                                onclick="Richfaces.showModalPanel('selectProduct')"
                                                execute="@this"
                                                limitRender="true"
                                                style="margin-left: 10px; vertical-align: middle"
                                                rendered="#{not fn:contains(registrationPoController.purchaseOrder.saleResult, 'Y')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">ประเภทประกัน :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.productPlanCategory.name}"/></td>
                        </tr>
                        <tr>
                            <td align="right" valign="top"> ชนิด :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.product.modelType.name}"/></td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">ยี่ห้อ :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.product.model.brand.name}"/></td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">รุ่น :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.product.model.name}"/></td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">ปี :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.product.modelYear}"/></td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">ชื่อ :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.product.name}"/></td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">หมายเลขตัวถัง :</td>
                            <td valign="top"><h:outputText value="#{registrationPoController.productPlan.product.fx4}"/></td>
                        </tr>
                    </table>
                </td>
                <td valign="top" width="50%">
                    <table border="0" cellpadding="3" cellspacing="0">
                        <tr>
                            <td valign="top" align="right">ทุนประกัน :</td>
                            <td valign="top" align="right"><h:outputText value="#{registrationPoController.productPlan.motorLoss}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText></td>
                        </tr>
                        <tr>
                            <td valign="top" align="right" width="200">เบี้ย :</td>
                            <td valign="top">
                                <h:inputText id="netPremiumM"
                                            value="#{registrationPoController.purchaseOrder.amount1}"
                                            styleClass="textfield"
                                            required="#{registration.requireName}"
                                            requiredMessage="#{msg.require}"
                                            style="text-align: right; width: 100px">
                                    <a4j:ajax event="keyup" 
                                                queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}" 
                                                execute="@this"
                                                limitRender="true"
                                                render="sum1,sumNoVat,sumVat"/>
                                <f:convertNumber pattern="###0.00"/>
                                </h:inputText>
                                <rich:message for="netPremiumM" style="color:red; display: inline-table" />
                            </td>
                        </tr>
                        <tr>
                            <td valign="top" align="right" width="200">ความเสียหายส่วนแรก :</td>
                            <td valign="top">
                                <h:inputText id="firstDamage"
                                            value="#{registrationPoController.purchaseOrder.firstDamage}"
                                            styleClass="textfield"
                                            required="#{registration.requireName}"
                                            requiredMessage="#{msg.require}"
                                            style="text-align: right; width: 100px">
                                    <a4j:ajax event="keyup" 
                                                queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}" 
                                                execute="@this"
                                                limitRender="true"
                                                render="sum1,sumNoVat,sumVat"/>
                                <f:convertNumber pattern="###0.00"/>
                                </h:inputText>
                                <rich:message for="firstDamage" style="color:red; display: inline-table" />
                            </td>
                        </tr>
                        <tr>
                            <td valign="top" align="right" width="200">ส่วนลดกลุ่ม :</td>
                            <td valign="top">
                                <h:inputText id="discountGroup"
                                            value="#{registrationPoController.purchaseOrder.discountGroup}"
                                            styleClass="textfield"
                                            required="#{registration.requireName}"
                                            requiredMessage="#{msg.require}"
                                            style="text-align: right; width: 100px">
                                    <a4j:ajax event="keyup" 
                                                queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}" 
                                                execute="@this"
                                                limitRender="true"
                                                render="sum1,sumNoVat,sumVat"/>
                                <f:convertNumber pattern="###0.00"/>
                                </h:inputText>
                                <rich:message for="discountGroup" style="color:red; display: inline-table" />
                            </td>
                        </tr>
                        <tr>
                            <td valign="top" align="right" width="200">ส่วนลดประวัติดี :</td>
                            <td valign="top">
                                <h:inputText id="discountGoodRecord"
                                            value="#{registrationPoController.purchaseOrder.discountGoodRecord}"
                                            styleClass="textfield"
                                            required="#{registration.requireName}"
                                            requiredMessage="#{msg.require}"
                                            style="text-align: right; width: 100px">
                                    <a4j:ajax event="keyup" 
                                                 queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}" 
                                                execute="@this"
                                                limitRender="true"
                                                render="sum1,sumNoVat,sumVat"/>
                                <f:convertNumber pattern="###0.00"/>
                                </h:inputText>
                                <rich:message for="discountGoodRecord" style="color:red; display: inline-table" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">
                                <ui:remove>
                                <h:selectBooleanCheckbox value="#{registrationPoController.checkAct}">
                                    <a4j:ajax event="click" 
                                                 queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}"
                                                render="sum1,sumNoVat,sumVat"
                                                limitRender="true"
                                                execute="@this"/>
                                </h:selectBooleanCheckbox>
                                </ui:remove>    
                                    พรบ. :
                            </td>
                            <td valign="top">
                                <h:inputText id="actM"
                                                value="#{registrationPoController.purchaseOrder.amount2}"
                                                styleClass="textfield"
                                                required="#{registration.requireName}"
                                                requiredMessage="#{msg.require}"
                                                style="text-align: right; width: 100px">
                                        <a4j:ajax event="keyup" 
                                                     queueId="regQueue"
                                                    listener="#{registrationPoController.calculateMotorListener}" 
                                                    execute="@this"
                                                    limitRender="true"
                                                    render="sum1,sumNoVat,sumVat"/>
                                    <f:convertNumber pattern="###0.00"/>
                                    </h:inputText>
                                    <rich:message for="actM" style="color:red; display: inline-table" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">รวม :</td>
                            <td valign="top" align="right">
                                <h:panelGroup style="text-align: right; width: 100px">
                                <h:outputText id="sum1" 
                                                value="#{registrationPoController.sum1}"
                                                style="text-align: right; width: 100px">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                </h:panelGroup>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" valign="top">
                                <ui:remove>
                                <h:selectBooleanCheckbox value="#{registrationPoController.checkDiscount}">
                                    <a4j:ajax event="click" 
                                                 queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}"
                                                render="sum1,sumNoVat,sumVat"
                                                limitRender="true"
                                                execute="@this"/>
                                </h:selectBooleanCheckbox>
                                </ui:remove>
                                ส่วนลด :
                            </td>
                            <td valign="top">
                                <h:inputText id="discount"
                                            value="#{registrationPoController.purchaseOrder.discount}"
                                            styleClass="textfield"
                                            required="#{registration.requireName}"
                                            requiredMessage="#{msg.require}"
                                            style="text-align: right; width: 100px">
                                    <a4j:ajax event="keyup" 
                                                 queueId="regQueue"
                                                listener="#{registrationPoController.calculateMotorListener}" 
                                                execute="@this"
                                                limitRender="true"
                                                render="sum1,sumNoVat,sumVat"/>
                                    <f:convertNumber pattern="###0.00"/>
                                </h:inputText>
                                <rich:message for="discount" style="color:red; display: inline-table" />
                            </td>
                        </tr>
                        <!--tr>
                            <td align="right" valign="top">VAT(%) :</td>
                            <td valign="top" align="right">
                                <h:outputText value="#{registrationPoController.purchaseOrder.vat}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText></td>
                        </tr-->
                        <!--tr>
                            <td align="right" valign="top">เบี้ยสุทธิ :</td>
                            <td valign="top" align="right">
                                <h:outputText id="sumNoVat" 
                                            value="#{registrationPoController.purchaseOrder.amountBfVat}"
                                            style="text-align: right; width: 100px">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </td>
                        </tr-->
                        <tr>
                            <td align="right" valign="top">เบี้ยหลังหักส่วนลด (เบี้ยรวมภาษี) :</td>
                            <td valign="top" align="right">
                                <h:outputText id="sumVat" 
                                            value="#{registrationPoController.purchaseOrder.totalAmount}" 
                                            style="text-align: right; width: 100px">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>                      
                            </td>
                        </tr>
                    </table>                        
                </td>
            </tr>
        </table>

    </h:panelGroup> 

    <!-- BEGIN: Life - Payment Method and Product Plan Panel -->
    <table width="100%">
        <tr>
            <td>
                <h:panelGroup style="width:80%;" rendered="#{registrationPoController.categoryType eq 'life' or registrationPoController.categoryType eq 'nonlife' or registrationPoController.categoryType eq 'motoradvance'}">
                     <table width="100%" border="0" cellpadding="3" cellspacing="0">
                         <tr>
                            <td class="line01" width="50%" colspan="2"><h2>#{registrationPoController.product.name}</h2></td>
                            <td class="line01" width="50%" align="left" style="padding-left:10px;" ></td>
                        </tr>
                        <tr>
                            <td colspan="2" width="100%" align="left" style="padding-left:50px;padding-bottom:15px;" >
                                <div style="width:90%;overflow-wrap: break-word;">  
                                    <h:outputText id="formMessageTxt" value="#{registrationPoController.message}"  style="color: red;"/>
                                </div>
                            </td>
                        </tr>
                         <tr>
                             <td colspan="2">
                                 <h:panelGroup rendered="#{registrationPoController.productFlexField1 eq 'VMI' or registrationPoController.productFlexField1 eq 'CMI'}">
                                     <table>
                                         <tr>
                                             <td>
                                                 <a4j:commandButton image="/img/b_register_voluntary.png" immediate="true" onbegin="#{rich:component('waitPopup')}.show('',{height:'80px', width:'150px'});" onclick="motorService('#{registrationPoController.motorBody}');" rendered="#{registrationPoController.productFlexField1 eq 'VMI'}"
                                                                    action="#{registrationPoController.saveApply}" oncomplete="#{rich:component('waitPopup')}.hide();" />
                                                 <span style="width: 30px"/>

                                                 <a4j:commandButton image="/img/b_register_compulsary.png" immediate="true" onbegin="#{rich:component('waitPopup')}.show('',{height:'80px', width:'150px'});" onclick="motorService('#{registrationPoController.motorBody}');" rendered="#{registrationPoController.productFlexField1 eq 'CMI'}"
                                                                    action="#{registrationPoController.saveApply}" oncomplete="#{rich:component('waitPopup')}.hide();" />
                                                 <span style="width: 30px"/>
                                             </td>
                                             <td>
                                                 <div id="motorMessage" style="color: red;"></div>
                                             </td>
                                         </tr>
                                     </table>
                                 </h:panelGroup>
                             </td>
                         </tr>
                        <tr>
                            <td colspan="2">
                                <h:panelGroup rendered="#{registrationPoController.productFlexField1 ne 'VMI' and registrationPoController.productFlexField1 ne 'CMI'}">
                                    <table border="0" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <td align="right" width="180">Payment Mode :</td>
                                            <td width="100px">
                                                <h:selectOneMenu id="paymentModeId"
                                                                 value="#{registrationPoController.paymentModeId}"
                                                                 valueChangeListener="#{registrationPoController.paymentModeValueChangeListener}"
                                                                 required="true"
                                                                 requiredMessage="#{msg.require}">
                                                    <f:selectItems value="#{registrationPoController.paymentModeList}" var="list" itemValue="#{list[0]}" itemLabel="#{list[1]}"/>
                                                    <a4j:ajax event="change"
                                                              queueId="regQueue"
                                                              limitRender="true"
                                                              execute="@this"
                                                              render="productPlan,panelPrice,pmMethod2,pgPaymentMethod,panelPrice2,price,stampDuty,vat,netPremium,totalPrice,productPlanCoverageRaider"/>
                                                </h:selectOneMenu>
                                            </td>
                                            <td align="right" width="140">Product Plan :</td>
                                            <td align="left" >
                                                <h:selectOneMenu id="productPlan"
                                                                 value="#{registrationPoController.productPlanId}"
                                                                 valueChangeListener="#{registrationPoController.productPlanValueChangeListener}"
                                                                 required="true"
                                                                 requiredMessage="Product plan is required">
                                                    <f:selectItem itemLabel="Select" />
                                                    <f:selectItems value="#{registrationPoController.productPlanList}" var="list" itemLabel="#{list[2]}" itemValue="#{list[0]}"/>
                                                    <a4j:ajax event="change"
                                                              queueId="regQueue"
                                                              limitRender="true"
                                                              execute="@this"
                                                              render="panelPrice,pmMethod2,pgPaymentMethod,panelPrice2,price,stampDuty,vat,netPremium,totalPrice,productPlanCoverageRaider"/>
                                                </h:selectOneMenu>
                                                <rich:message id="msgproductPlan" for="productPlan" style="color:red; display: inline-table" />
                                            </td>
                                            <td style="padding-left: 5px;">
                                                <h:panelGroup id ="familyPlanButton">
                                                    <h:outputLink value="#{request.contextPath}/share/familyplanlist.jsf" target="_blank"  styleClass="gray02link" rendered="#{registrationPoController.product.familyProductType eq 2}">
                                                        <h:graphicImage value="/img/b_calculator2.png"/>
                                                        <f:param name="productId" value="#{registrationPoController.product.id}"/>
                                                        <f:param name="familyProductLogic" value="#{registrationPoController.product.familyProductLogic}"/>
                                                    </h:outputLink>
                                                </h:panelGroup>
                                            </td>
                                        </tr>
                                    </table>
                                </h:panelGroup>
                            </td>
                        </tr>
                    </table>

                    <h:panelGrid id="panelPrice" columns="6" cellpadding="3" columnClasses="colPrice1, colPrice2, colPrice1, colPrice2, colPrice1, colPrice2" rendered="#{registrationPoController.productFlexField1 ne 'VMI' and registrationPoController.productFlexField1 ne 'CMI'}">
                        <h:outputText value="#{msg.price} :"/>
                        <h:outputText id="price" value="#{registrationPoController.price}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>

                        <h:outputText value="#{msg.stampDuty} :"/>
                        <h:outputText id="stampDuty" value="#{registrationPoController.stampDuty}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>

                        <h:outputText value="#{msg.vat} :"/>
                        <h:outputText id="vat" value="#{registrationPoController.vat}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>

                        <h:outputText value="#{msg.netPremium} :"/>
                        <h:outputText id="netPremium" value="#{registrationPoController.netPremium}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>

                        <h:outputText value="#{msg.totalPrice} :"/>
                            <h:outputText id="totalPrice" value="#{registrationPoController.totalPrice}" rendered="#{registrationPoController.totalPrice gt 0 }">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputText>
                            <h:outputText id="totalPriceBlank" value="-  " rendered="#{registrationPoController.totalPrice le 0 }"/>

                        <h:outputText value="Sum Insured :"/>
                        <h:outputText value="#{registrationPoController.productPlan.sumInsured}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </h:panelGrid>
                </h:panelGroup>
            </td>
            <td>
                <table></table>
                <table width="80%" align="left">
                    <tr><td>
                        <h:panelGroup id="productPlanCoverageRaider">
                            <h:panelGroup rendered="#{registrationPoController.productPlanDetail ne null and registrationPoController.productPlanDetail ne '0' and 
                                                      registrationPoController.product.productPlanCoverage eq '1'}">
                                <rich:dataTable value="#{registrationPoController.coverageInfoList}" style="width: 100%;" styleClass="tableline01" headerClass="subh01"
                                                rows="#{global.maxrows}" var="list">
                                    <f:facet name="header">
                                        <rich:columnGroup>
                                            <rich:column style="text-align: center; color: #000000"><h:outputText value="Code"/></rich:column>
                                            <rich:column style="text-align: center; color: #000000"><h:outputText value="Net Premium"/></rich:column>
                                            <rich:column style="text-align: center; color: #000000"><h:outputText value="Sum Insured"/></rich:column>
                                        </rich:columnGroup>
                                    </f:facet>
                                        <rich:column style="text-align: left;"><h:outputText value="#{list.code}"/></rich:column>
                                        <rich:column style="text-align: right;">
                                            <h:outputText value="#{registrationPoController.convertStringToInt(list.premium_Amt)}">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                        </rich:column>
                                        <rich:column style="text-align: right;">
                                            <h:outputText value="#{registrationPoController.convertStringToInt(list.sum_Insured)}">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                        </rich:column>
                                </rich:dataTable>
                            </h:panelGroup>
                        </h:panelGroup>
                    </td></tr>
                </table>
            </td>
        </tr>
    </table>    
    <!-- END: Life - PaymentMethod and Product Plan Panel -->            
</h:panelGroup>
    
<!-- BEGIN: Customer Info Form -->            
<table width="1200" border="0" cellpadding="4" cellspacing="0" id="product">
    <tr>
        <td bgcolor="#EDD3E7" class="line01" width="100%"><a name="a1"/><h4 class="gray05 style2">Customer Information</h4></td>
    </tr>
    <tr>
        <td class="line01">
            <h:panelGroup id="panelForm">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="100%"  valign="top">
                        <h:panelGroup rendered="#{registrationPoController.product.familyProduct and registrationPoController.poCopyForMain ne null}">
                        <table width="100%" border="0" cellpadding="4" cellspacing="0">
                            <tr>
                                <td align="right" width="30%"><h:outputText value="Main Insured Person :" 
                                                  rendered="#{registrationPoController.poCopyForMain ne null}"/></td>
                                <td width="70%">
                                    <a4j:repeat value="#{registrationPoController.poCopyForMain.purchaseOrderDetailCollection}" var="list1" rowKeyVar="idx1">
                                        <a4j:repeat value="#{list1.purchaseOrderRegisterCollection}" var="list2" rowKeyVar="idx2" rendered="#{idx1 eq 0}">
                                            <h:outputText value="#{list2.name}" rendered="#{idx2 eq 0}" style="font-weight: bold"/>
                                            <h:outputText value=" " rendered="#{idx2 eq 0}"/>
                                            <h:outputText value="#{list2.surname}" rendered="#{idx2 eq 0}" style="font-weight: bold"/>
                                        </a4j:repeat>
                                    </a4j:repeat>
                                </td>
                            </tr>
                            <tr>
                                <td align="right" width="30%">
                                    <h:outputText value="Reference No. : " 
                                                  rendered="#{registrationPoController.poCopyForMain.refNo ne null}"/>
                                </td>
                                <td width="70%">
                                    <h:outputText value=" "/>
                                    <h:outputText value="#{registrationPoController.poCopyForMain.refNo}" 
                                                  rendered="#{registrationPoController.poCopyForMain.refNo ne null}"
                                                  style="font-weight: bold"/>
                                </td>
                            </tr>
                        </table>
                        </h:panelGroup>
                        <a4j:repeat id="reginfo" value="#{registrationPoController.regInfo}" var="registration" rowKeyVar="idform">
                            <table width="100%" border="0" cellpadding="4" cellspacing="0">
                                <tr>
                                    <td align="right" width="30%"></td>
                                    <td width="70%">
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="line01"><h4><h:outputText value="#{registration.groupTitle}" rendered="#{registration.groupTitle ne null}"/></h4></td>
                                </tr>
                                <tr><td colspan="2">
                                <h:panelGrid width="100%" columns="2"  columnClasses="colStyle1,colStyle2">
                                    <h:outputText value="#{registration.initial}:" rendered="#{registration.initial ne null}"/>
                                    <h:panelGroup rendered="#{registration.initial ne null}">
                                        <h:panelGroup rendered="#{registration.initialControlType eq msg.textFieldControl}">
                                            <h:inputText id="initialTextField" value="#{registration.po.initial}"
                                                         styleClass="textfield"
                                                         required="#{registration.requireInitial and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}" >
                                                <a4j:ajax event="blur"
                                                          queueId="regQueue"
                                                          limitRender="true"
                                                          execute="@this"
                                                          render="msgInitialTextField"/>
                                            </h:inputText>
                                            <rich:message id="msgInitialTextField" for="initialTextField" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.initialControlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="initialComboBox" value="#{registration.po.initial}"
                                                                required="#{registration.requireInitial and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.initialList}"/>
                                                <a4j:ajax event="blur"
                                                          queueId="regQueue"
                                                          limitRender="true"
                                                          execute="@this"
                                                          render="msgInitialComboBox"/>
                                            </h:selectOneMenu>
                                            <rich:message id="msgInitialComboBox" for="initialComboBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.initialControlType eq msg.suggestionBoxControl}">
                                            <rich:select id="initialSuggestionBox" 
                                                           defaultLabel="#{msg.pleaseSelect}"
                                                           value="#{registration.po.initial}"
                                                           required="#{registration.requireInitial and registrationPoController.immediateCheck}"
                                                           requiredMessage="#{msg.require}">
                                                <f:selectItems value="#{registration.initialList}"/>
                                                <a4j:ajax event="blur"
                                                          queueId="regQueue"
                                                          limitRender="true"
                                                          execute="@this"
                                                          render="msgInitialSuggestionBox"/>
                                            </rich:select>
                                            <rich:message id="msgInitialSuggestionBox" for="initialSuggestionBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.name}:" rendered="#{registration.name ne null}"/>
                                    <h:panelGroup rendered="#{registration.name ne null}">
                                        <h:inputText id="name" value="#{registration.po.name}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireName and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}"
                                                     rendered="#{registration.name ne null}">
                                                <a4j:ajax event="blur"
                                                          queueId="regQueue"
                                                          limitRender="true"
                                                          execute="@this"
                                                          render="msgName"/>
                                        </h:inputText>
                                        <h:message id="msgName" for="name" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.surname}:" rendered="#{registration.surname ne null}"/>
                                    <h:panelGroup rendered="#{registration.surname ne null}">
                                        <h:inputText id="surname" value="#{registration.po.surname}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireName and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <a4j:ajax event="blur"
                                                      queueId="regQueue"
                                                      limitRender="true"
                                                      execute="@this"
                                                      render="msgSurname"/>
                                        </h:inputText>
                                        <rich:message id="msgSurname" for="surname" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="ความสัมพันธ์กับผู้เอาประกัน:" rendered="#{registrationPoController.product.familyProduct and registrationPoController.poCopyForMain ne null}"/>
                                    <h:panelGroup rendered="#{registrationPoController.product.familyProduct and registrationPoController.poCopyForMain ne null}">
                                        <h:selectOneMenu id="relationMainInsured" value="#{registration.po.relationMainInsured}"
                                                         label="Relation with Main Insured"
                                                         required="#{registrationPoController.product.familyProduct and registrationPoController.poCopyForMain ne null}"
                                                         requiredMessage="#{msg.require}">
                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                            <f:selectItem itemLabel="Parent" itemValue="P"/>
                                            <f:selectItem itemLabel="Spouse" itemValue="S"/>
                                            <f:selectItem itemLabel="Kids" itemValue="K"/>
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message for="relationMainInsured" style="color:red; display: inline-table" />
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.idcardTypeId}:" rendered="#{registration.idcardTypeId ne null}"/>
                                    <h:panelGroup rendered="#{registration.idcardTypeId ne null}">
                                        <h:selectOneMenu  id="idcardTypeId" value="#{registration.po.idcardTypeId}"
                                                          required="#{registration.requireIdcardTypeId and registrationPoController.immediateCheck}"
                                                          requiredMessage="#{msg.require}">
                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                            <f:selectItem itemLabel="บัตรประชาชน" itemValue="1"/>
                                            <f:selectItem itemLabel="หนังสือเดินทาง" itemValue="2"/>
                                            <ui:remove>
                                            <f:selectItem itemLabel="บัตรข้าราชการ" itemValue="3"/>
                                            <f:selectItem itemLabel="ใบสำคัญประจำตัวคนต่างด้าว" itemValue="4"/>
                                            </ui:remove>
                                            <a4j:ajax event="change" render="panelIdCard" limitRender="true" execute="@this"/>
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message for="idcardTypeId" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.idno}:" rendered="#{registration.idno ne null}"/>
                                    <h:panelGroup id="panelIdCard" rendered="#{registration.idno ne null}" >
                                        <h:panelGroup rendered="#{registration.idno ne null and (registration.idcardTypeId eq null or registration.po.idcardTypeId eq 1)}">
                                            <h:inputText id="id1" value="#{registration.id1}" maxlength="1" style="width: 20px"
                                                         onkeypress="return isNumberKey(event)"  
                                                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('id2')}.focus()}"
                                                         required="#{registration.requireIdno and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNo(registration)}" 
                                                          render="id1,msgId1,msgIdno" limitRender="true" execute="@this" />
                                            </h:inputText><rich:message id="msgId1" for="id1" style="color:red; display: inline-table"/>
                                             <h:inputText id="id2" value="#{registration.id2}" maxlength="4" style="width: 40px"
                                                         onkeypress="return isNumberKey(event)"
                                                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('id3')}.focus()}"
                                                         required="#{registration.requireIdno and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNo(registration)}"
                                                             render="id2,msgId2,msgIdno" limitRender="true" execute="@this" />
                                            </h:inputText><rich:message id="msgId2" for="id2" style="color:red; display: inline-table"/>
                                             <h:inputText id="id3" value="#{registration.id3}" maxlength="5" style="width: 45px"
                                                         onkeypress="return isNumberKey(event)"
                                                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('id4')}.focus()}"
                                                         required="#{registration.requireIdno and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNo(registration)}" 
                                                             render="id3,msgId3,msgIdno" limitRender="true" execute="@this" />
                                            </h:inputText><rich:message id="msgId3" for="id3" style="color:red; display: inline-table"/>
                                             <h:inputText id="id4" value="#{registration.id4}" maxlength="2" style="width: 25px"
                                                         onkeypress="return isNumberKey(event)"
                                                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('id5')}.focus()}"
                                                         required="#{registration.requireIdno and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                               <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNo(registration)}" 
                                                             render="id4,msgId4,msgIdno" limitRender="true" execute="@this" />
                                            </h:inputText><rich:message id="msgId4" for="id4" style="color:red; display: inline-table"/>
                                             <h:inputText id="id5" value="#{registration.id5}" maxlength="1" style="width: 20px"
                                                         onkeypress="return isNumberKey(event)"
                                                         required="#{registration.requireIdno and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                               <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNo(registration)}" 
                                                             render="id5,msgId5,msgIdno" limitRender="true" execute="@this" />
                                            </h:inputText><rich:message id="msgId5" for="id5" style="color:red; display: inline-table"/>
                                            <h:outputText id="msgIdno" style="color:red; display: inline-table" value="#{registration.msgIdno}"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.idno ne null and registration.po.idcardTypeId ne 1}">
                                            <h:inputText id="textIdno" value="#{registration.citizenId}"
                                                         styleClass="textfield"
                                                         required="#{registration.requireIdno and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="textIdno" style="color:red; display: inline-table"/>
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.idCardIssue}:" rendered="#{registration.idCardIssue ne null}"/>
                                    <h:panelGroup rendered="#{registration.idCardIssue ne null}">

                                        <h:panelGroup rendered="#{registration.idCardIssueControlType eq msg.textFieldControl}">
                                            <h:inputText id="idcardissuedistricttextfield" label="#{registration.idCardIssue}" value="#{registration.po.idCardIssueDistrict}"
                                                     styleClass="textfield"
                                                     maxlength="30"
                                                     required="#{registration.requireIdCardIssue and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}" >
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="idcardissuedistricttextfield" style="color:red; display: inline-table"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.idCardIssueControlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="idcardissuedistrictcombobox" value="#{registration.po.idCardIssueDistrict}"
                                                             label="#{registration.idCardIssue}"
                                                         required="#{registration.requireIdCardIssue and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.idCardIssueList}"  />
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="idcardissuedistrictcombobox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.idCardIssueControlType eq msg.suggestionBoxControl}">
                                            <rich:select id="idcardissuedistrictsuggestionbox" value="#{registration.po.idCardIssueDistrict}"
                                                         defaultLabel="#{msg.pleaseSelect}"
                                                         required="#{registration.requireIdCardIssue and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.idCardIssueList}"/>
                                                <rich:validator/>
                                            </rich:select>
                                            <rich:message for="idcardissuedistrictsuggestionbox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:outputText value="จังหวัด"/>
                                        <h:selectOneMenu id="idcardissueprovincecombobox"
                                                         value="#{registration.po.idCardIssueProvince}"
                                                         required="#{registration.requireIdCardIssue and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}"
                                                         styleClass="select07">
                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                            <f:selectItems value="#{registrationPoController.provinceList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[1]}"/>
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message for="idcardissuedistrict" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.idcardExpiryDate}:" rendered="#{registration.idcardExpiryDate ne null}"/>
                                    <h:panelGroup rendered="#{registration.idcardExpiryDate ne null}">
                                        <ui:remove>
                                        <rich:calendar id="idcardExpiryDate" value="#{registration.po.idcardExpiryDate}"
                                                       inputClass="textfield" inputSize="14" buttonClass="rfcalbtn"
                                                       required="#{registration.requireIdcardExpiryDate and registrationPoController.immediateCheck}"
                                                       requiredMessage="#{msg.require}"
                                                       locale="#{msg.localeTh}"
                                                       datePattern="#{msg.datePattern}"
                                                       todayControlMode="hidden" 
                                                       timeZone="#{registrationPoController.defaultTimeZone}"
                                                       >
                                            <rich:validator/>
                                        </rich:calendar>
                                        <rich:message for="idcardExpiryDate" style="color:red; display: inline-table"/>
                                        </ui:remove>
                                        <a4j:jsFunction name="idcardExpiryDateChange" limitRender="true" execute="@this"
                                                        actionListener="#{registration.idcardExpiryDateListener}">
                                            <a4j:param name="expirydate" />
                                        </a4j:jsFunction>
                                        <input type="text" id="idcardExpiryDatepicker" name="idcardExpiryDate" readonly="readonly" value="#{registrationPoController.convertThaiDate(registration.po.idcardExpiryDate)}" onchange="idcardExpiryDateChange(this.value)" />
                                        <script>
                                            $("#idcardExpiryDatepicker").datepicker($.datepicker.regional["th"]);
                                            if ($("#idcardExpiryDatepicker").datepicker("getDate") === null) {
                                                $("#idcardExpiryDatepicker").datepicker("option", "minDate", new Date());
                                            }else if ($("#idcardExpiryDatepicker").datepicker("getDate") > new Date()) {
                                                $("#idcardExpiryDatepicker").datepicker("option", "minDate", new Date());
                                            }else{
                                                $("#idcardExpiryDatepicker").datepicker("option", "minDate", $("#idcardExpiryDatepicker").datepicker("getDate"));
                                            }
                                        </script>
                                        <ui:remove>
                                        <h:inputText styleClass="idcardExpiryDatepicker" value="#{registration.regIdcardExpiryDate}" valueChangeListener="#{registration.regIdcardExpiryDateListener}"/>
                                        <script>
                                            $(".idcardExpiryDatepicker").datepicker($.datepicker.regional["th"]);
                                            if ($(".idcardExpiryDatepicker").datepicker("getDate") === null) {
                                                $(".idcardExpiryDatepicker").datepicker("option", "minDate", new Date());
                                            }else if ($(".idcardExpiryDatepicker").datepicker("getDate") > new Date()) {
                                                $(".idcardExpiryDatepicker").datepicker("option", "minDate", new Date());
                                            }else{
                                                $(".idcardExpiryDatepicker").datepicker("option", "minDate", $(".idcardExpiryDatepicker").datepicker("getDate"));
                                            }
                                        </script>
                                        </ui:remove>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.dob}:" rendered="#{registration.dob ne null}"/>
                                    <h:panelGroup rendered="#{registration.dob ne null}">
                                        <ui:remove>
                                        <rich:calendar id="dob1" value="#{registration.po.dob}"
                                                       inputClass="textfield" inputSize="14" buttonClass="rfcalbtn"
                                                       required="#{registration.requireDob and registrationPoController.immediateCheck}"
                                                       requiredMessage="#{msg.require}"
                                                       locale="#{msg.localeTh}"
                                                       timeZone="#{registrationPoController.defaultTimeZone}"
                                                       datePattern="#{msg.datePattern}"
                                                       enableManualInput="false"
                                                       defaultTime="23:59"
                                                       valueChangeListener="#{registration.dobListener}"
                                                       todayControlMode="hidden" >
                                            <a4j:ajax event="change" queueId="regQueue" render="age,productInfo,panelPrice2,productPlanCoverageRaider" limitRender="true" execute="@this"
                                                         listener="#{registrationPoController.changeDobListener}"/>
                                            <a4j:ajax event="inputchange" queueId="regQueue" render="age,productInfo,panelPrice2,productPlanCoverageRaider" limitRender="true" execute="@this"
                                                         listener="#{registrationPoController.changeDobListener}"/>
                                            <f:facet name="footer">
                                                <h:panelGrid columns="4">
                                                    <h:outputText value="{todayControl}" />
                                                    <h:outputText value="{selectedDateControl}" />
                                                    <h:outputText value="{timeControl}" />
                                                </h:panelGrid>
                                            </f:facet>
                                        </rich:calendar>
                                        <rich:hotKey selector="#dob1" key="backspace" onkeydown="return false;" enabledInInput="true"/>
                                        <rich:message for="dob1" style="color:red; display: inline-table" />
                                        </ui:remove>
                                        <!-- BEGIN : jquery calendar -->
                                        <a4j:jsFunction name="dobThaiChangeAge" limitRender="true" execute="@this"
                                                        actionListener="#{registration.dobThaiListener}">
                                            <a4j:param name="param1" />
                                        </a4j:jsFunction>
                                        <a4j:jsFunction name="dobThaiChangePremium" render="age,productInfo,panelPrice2,productPlanCoverageRaider"
                                                        actionListener="#{registrationPoController.changeDobListener}"/>

                                        <input type="text" id="dobdatepicker" name="dob1" readonly="readonly" value="#{registration.po.dobThai}" onchange="dobThaiChangeAge(this.value);dobThaiChangePremium();"/>
                                        <script>
                                            $("#dobdatepicker").datepicker($.datepicker.regional["th"]);
                                            $("#dobdatepicker").datepicker("option", "maxDate", 0);
                                        </script>
                                        <!-- END : jquery calendar -->
                                        <h:outputText id="age" value="อายุ : #{registration.age}"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.gender}:" rendered="#{registration.gender ne null}"/>
                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" rendered="#{registration.gender ne null}">
                                        <h:selectOneRadio  id="gender" value="#{registration.po.gender}"
                                                           valueChangeListener="#{registrationPoController.genderValueChangeListener}"
                                                           required="#{registration.requireGender and registrationPoController.immediateCheck}"
                                                           requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                            <f:selectItem itemLabel="#{msg.male}" itemValue="#{msg.maleValue}"/>
                                            <f:selectItem itemLabel="#{msg.female}" itemValue="#{msg.femaleValue}"/>
                                            <a4j:ajax event="change"
                                                      queueId="regQueue"
                                                      limitRender="true"
                                                      execute="@this"
                                                      render="productPlan,panelPrice,panelPrice2,price,stampDuty,vat,netPremium,totalPrice,productPlanCoverageRaider"/>
                                        </h:selectOneRadio>
                                        <rich:message for="gender" style="color:red; display: inline-table"/>
                                    </h:panelGrid>

                                    <h:outputText value="#{registration.weight}:" rendered="#{registration.weight ne null}"/>
                                    <h:panelGroup rendered="#{registration.weight ne null}">
                                        <h:inputText id="weight" value="#{registration.po.weight}"
                                                     label="#{registration.weight}"
                                                     size="5"
                                                     maxlength="3"
                                                     styleClass="textfield"
                                                     required="#{registration.requireWeight and registrationPoController.immediateCheck}"
                                                     valueChangeListener="#{registration.weightListener}"
                                                     onkeypress="return isNumberKey(event)"
                                                     requiredMessage="#{msg.require}"
                                                     rendered="#{registration.weight ne null}">
                                            <f:convertNumber/>
                                            <f:validateDoubleRange minimum="0" maximum="300"/>
                                            <a4j:ajax event="keyup" queueId="regQueue" render="bmi" limitRender="true" execute="@this"/>
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="weight" style="color:red; display: inline-table" />
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.height}:" rendered="#{registration.height ne null}"/>
                                    <h:panelGroup rendered="#{registration.height ne null}">
                                        <h:inputText id="height" value="#{registration.po.height}"
                                                     label="#{registration.height}"
                                                     size="5"
                                                     maxlength="3"
                                                     styleClass="textfield"
                                                     required="#{registration.requireHeight and registrationPoController.immediateCheck}"
                                                     onkeypress="return isNumberKey(event)"
                                                     requiredMessage="#{msg.require}"
                                                     valueChangeListener="#{registration.heightListener}"
                                                     rendered="#{registration.height ne null}">
                                            <f:convertNumber/>
                                            <f:validateDoubleRange minimum="0" maximum="300"/>
                                            <a4j:ajax event="keyup" queueId="regQueue" render="bmi" limitRender="true" execute="@this"/>
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="height" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.bmi}:" rendered="#{registration.bmi ne null}"/>    
                                    <h:panelGrid  columns="2" cellpadding="2" cellspacing="0" rendered="#{registration.bmi ne null}">
                                        <ui:remove>
                                        <h:outputText id="bmi" value="#{registration.bmiValue}"  
                                                    style="background-color:#{ (registration.bmiValue == null) ? 'transparent': (registration.bmiValue lt 17)? 'red' : '#99CC00'};" />
                                        <h:outputText id="bmiRemark" value="คุ้มครองค่า BMI ตั้งแต่ 17 ขึ้นไป "  style="margin-left:70px;"/>
                                        </ui:remove>
                                        <h:outputText id="bmi" value="#{registration.bmiValue}"  
                                                    style="background-color:#{ (registration.bmiValue == null) ? 'transparent': (registration.bmiValue lt 18 or registration.bmiValue gt 32) ? 'red' : '#99CC00'};" />
                                        <h:outputText id="bmiRemark" value="คุ้มครองค่า BMI ที่อยู่ระหว่าง 18-32 "  style="margin-left:70px;"/>
                                    </h:panelGrid>                                

                                    <h:outputText value="#{registration.maritalStatus}:" rendered="#{registration.maritalStatus ne null}"/>
                                    <h:panelGroup rendered="#{registration.maritalStatus ne null}">
                                        <h:selectOneMenu id="maritalStatus" value="#{registration.po.maritalStatus}"
                                             label="#{registration.maritalStatus}"
                                             required="#{registration.requireMaritalStatus and registrationPoController.immediateCheck}"
                                             requiredMessage="#{msg.require}"
                                             rendered="#{registration.maritalStatus ne null}">
                                            <f:selectItems value="#{registrationPoController.maritalStatusList}" var="s" itemLabel="#{s.description}" itemValue="#{s.value}"/>
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message for="maritalStatus" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.nationality}:" rendered="#{registration.nationality ne null}"/>
                                    <h:panelGroup rendered="#{registration.nationality ne null}">
                                        <h:panelGroup rendered="#{registration.nationalityControlType eq msg.textFieldControl}">
                                            <h:inputText id="nationalitytextfield" value="#{registration.po.nationality}"
                                                         label="#{registration.nationality}"
                                                         styleClass="textfield"
                                                         required="#{registration.requireNationality and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="nationalitytextfield" style="color:red; display: inline-table"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.nationalityControlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="nationalitycombobox" value="#{registration.po.nationality}"
                                                         label="#{registration.nationality}"
                                                         required="#{registration.requireNationality and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.nationalityList}"  />
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="nationalitycombobox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.nationalityControlType eq msg.suggestionBoxControl}">
                                            <rich:select id="nationalitysuggestionbox" value="#{registration.po.nationality}"
                                                         defaultLabel="#{msg.pleaseSelect}"
                                                         required="#{registration.requireNationality and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.nationalityList}"/>
                                                <rich:validator/>
                                            </rich:select>
                                            <rich:message for="nationalitysuggestionbox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.race}:" rendered="#{registration.race ne null}"/>
                                    <h:panelGroup rendered="#{registration.race ne null}">
                                        <h:panelGroup rendered="#{registration.raceControlType eq msg.textFieldControl}">
                                            <h:inputText id="racetextfield" value="#{registration.po.race}"
                                                         label="#{registration.race}"
                                                         styleClass="textfield"
                                                         required="#{registration.requireRace and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="racetextfield" style="color:red; display: inline-table"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.raceControlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="racecombobox" value="#{registration.po.race}"
                                                         label="#{registration.race}"
                                                         required="#{registration.requireRace and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.raceList}"  />
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="racecombobox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.raceControlType eq msg.suggestionBoxControl}">
                                            <rich:select id="racesuggestionbox" value="#{registration.po.race}"
                                                         defaultLabel="#{msg.pleaseSelect}"
                                                         required="#{registration.requireRace and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.raceList}"/>
                                                <rich:validator/>
                                            </rich:select>
                                            <rich:message for="racesuggestionbox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.religion}:" rendered="#{registration.religion ne null}"/>
                                    <h:panelGroup rendered="#{registration.religion ne null}">
                                        <h:panelGroup rendered="#{registration.religionControlType eq msg.textFieldControl}">
                                            <h:inputText id="religiontextfield" value="#{registration.po.religion}"
                                                         label="#{registration.religion}"
                                                         styleClass="textfield"
                                                         required="#{registration.requireReligion and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="religiontextfield" style="color:red; display: inline-table"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.religionControlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="religioncombobox" value="#{registration.po.religion}"
                                                         label="#{registration.religion}"
                                                         required="#{registration.requireReligion and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.religionList}"  />
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="religioncombobox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.religionControlType eq msg.suggestionBoxControl}">
                                            <rich:select id="religionsuggestionbox" value="#{registration.po.religion}"
                                                         defaultLabel="#{msg.pleaseSelect}"
                                                         required="#{registration.requireReligion and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.religionList}"/>
                                                <rich:validator/>
                                            </rich:select>
                                            <rich:message for="religionsuggestionbox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.homePhone}:" rendered="#{registration.homePhone ne null}"/>
                                    <h:panelGroup rendered="#{registration.homePhone ne null}">
                                        <h:inputText id="homephone" value="#{registration.po.homePhone}"
                                                     label="#{registration.homePhone}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireHomePhone and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="homephone" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.officePhone}:" rendered="#{registration.officePhone ne null}"/>
                                    <h:panelGroup rendered="#{registration.officePhone ne null}">
                                        <h:inputText id="officephone" value="#{registration.po.officePhone}"
                                                     label="#{registration.officePhone}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireOfficePhone and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="officephone" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.mobilePhone}:" rendered="#{registration.mobilePhone ne null}"/>
                                    <h:panelGroup rendered="#{registration.mobilePhone ne null}">
                                        <h:inputText id="mobilephone" value="#{registration.po.mobilePhone}"
                                                     label="#{registration.mobilePhone}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireMobilePhone and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="mobilephone" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.email}:" rendered="#{registration.email ne null}"/>
                                    <h:panelGroup rendered="#{registration.email ne null}">
                                        <h:inputText id="email" value="#{registration.po.email}"
                                                     label="#{registration.email}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireEmail and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="email" style="color:red; display: inline-table" />
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.occupation}:" rendered="#{registration.occupation ne null}"/>
                                    <h:panelGroup rendered="#{registration.occupation ne null}">
                                        <h:selectOneMenu id="currentoccupationcategory"
                                                         value="#{registration.occupationCategoryId}"
                                                         valueChangeListener="#{registration.occupationCategoryListener}"
                                                         required="#{registration.requireOccupation and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}"
                                                         styleClass="select07">
                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                            <f:selectItems value="#{registrationPoController.occupationCategoryList}" var="list" itemValue="#{list.id}" itemLabel="#{list.name}" />
                                            <rich:validator/>
                                            <a4j:ajax event="change"
                                                         queueId="regQueue"
                                                         render="occupation"
                                                         limitRender="true"
                                                         execute="@this"/>
                                        </h:selectOneMenu>
                                        <rich:message for="currentoccupationcategory" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="" rendered="#{registration.occupation ne null}"/>
                                    <h:panelGroup rendered="#{registration.occupation ne null}">

                                        <h:selectOneMenu id="occupation"
                                                         value="#{registration.occupationId}"
                                                         required="#{registration.requireOccupation and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}"
                                                         styleClass="select07">
                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                            <f:selectItems value="#{registration.occupationList}" var="list" itemValue="#{list[0]}" itemLabel="#{list[1]}"/>
                                            <rich:validator/>
                                              <a4j:ajax event="change"
                                                           queueId="regQueue"
                                                         render="occupationtexttextfield"
                                                         limitRender="true"
                                                         execute="@this"/>
                                        </h:selectOneMenu>
                                        <rich:message for="occupation" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.occupationText}:" rendered="#{registration.occupationText ne null}"/>
                                    <h:panelGroup rendered="#{registration.occupationText ne null}">
                                        <h:panelGroup rendered="#{registration.occupationTextControlType eq msg.textFieldControl}">
                                            <h:inputText id="occupationtexttextfield" value="#{registration.po.occupationText}"
                                                         label="#{registration.occupationText}"
                                                         styleClass="textfield"
                                                         required="#{registration.requireOccupationText and registrationPoController.immediateCheck and registration.occupationId eq 999}"
                                                         requiredMessage="#{msg.require}">
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="occupationtexttextfield" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.occupationTextControlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="occupationtextcombobox" value="#{registration.po.occupationText}"
                                                         label="#{registration.occupationText}"
                                                         required="#{registration.requireOccupationText and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.occupationTextList}"/>
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="occupationtextcombobox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{registration.occupationTextControlType eq msg.suggestionBoxControl}">
                                            <rich:select id="occupationtextsuggestionbox" value="#{registration.po.occupationText}"
                                                         defaultLabel="#{msg.pleaseSelect}"
                                                         required="#{registration.requireOccupationText and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{registration.occupationTextList}"/>
                                                <rich:validator/>
                                            </rich:select>
                                            <rich:message for="occupationtextsuggestionbox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.job}:" rendered="#{registration.job ne null}"/>
                                    <h:panelGroup rendered="#{registration.job ne null}">
                                        <h:inputText id="jobdescription" value="#{registration.po.jobDescription}"
                                                     label="#{registration.job}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireJob and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="jobdescription" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.jobPosition}:" rendered="#{registration.jobPosition ne null}"/>
                                    <h:panelGroup rendered="#{registration.jobPosition ne null}">
                                        <h:inputText id="jobposition" value="#{registration.po.position}"
                                                     label="#{registration.jobPosition}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireJobPosition and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="jobposition" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.businessType}:" rendered="#{registration.businessType ne null}"/>
                                    <h:panelGroup rendered="#{registration.businessType ne null}">
                                        <h:inputText id="businesstype" value="#{registration.po.businessType}"
                                                     label="#{registration.businessType}"
                                                     styleClass="textfield"
                                                     required="#{registration.requireBusinessType and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="businesstype" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="#{registration.income}:" rendered="#{registration.income ne null}"/>
                                    <h:panelGroup rendered="#{registration.income ne null}">
                                        <h:inputText id="income" value="#{registration.po.income}"
                                                     label="#{registration.income}"
                                                     styleClass="textfield"
                                                     onkeypress="return isNumberKey(event)"
                                                     required="#{registration.requireIncome and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator/>
                                        </h:inputText>
                                        <rich:message for="income" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                </h:panelGrid>
                                </td>
                                </tr>
                                <a4j:jsFunction name="flexFieldDateChange"
                                                limitRender="true" execute="@this"
                                                actionListener="#{registrationPoController.flexFieldDateListener}">
                                    <a4j:param name="flexFieldNo" />
                                    <a4j:param name="flexFieldDate" />
                                    <a4j:param name="registrationNo" />
                                </a4j:jsFunction>
                                <a4j:repeat id="flexfields" value="#{registration.flexFields}" var="fx">
                                    <tr>
                                        <td align="right" valign="top"><h:outputText value="#{fx.flexField}:" rendered="#{fx.flexField ne null}"/></td>
                                    <td>
                                        <h:panelGroup rendered="#{fx.controlType eq msg.textFieldControl and registrationPoController.productFlexField1 ne 'CMI' and registrationPoController.productFlexField1 ne 'VMI'}" >
                                            <h:inputText id="fxTextField" value="#{fx.poFlexField}"
                                                         styleClass="textfield"
                                                         required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}" >
                                                <rich:validator/>
                                            </h:inputText>       
                                            <rich:message for="fxTextField" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <!-- hardcode -->
                                        <h:panelGroup rendered="#{fx.controlType eq msg.textFieldControl and fx.no ne 50 and (registrationPoController.productFlexField1 eq 'CMI' or registrationPoController.productFlexField1 eq 'VMI')}" >
                                            <h:inputText id="fxTextField2" value="#{fx.poFlexField}"
                                                         styleClass="textfield"
                                                         required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}" >
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="fxTextField2" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup  rendered="#{fx.controlType eq msg.textFieldControl and fx.no eq 50 and (registrationPoController.productFlexField1 eq 'CMI' or registrationPoController.productFlexField1 eq 'VMI')}" >
                                            <h:inputText id="fxTextField3" value="#{fx.poFlexField}"
                                                         disabled="true"
                                                         required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}" >
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="fxTextField3" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <!-- hardcode -->
                                        <h:panelGroup rendered="#{fx.controlType eq msg.textBoxControl}">
                                            <h:inputTextarea cols="30"  rows="5" id="fxTextBox" value="#{fx.poFlexField}"
                                                             name="fxTextBox"
                                                             validatorMessage="อักษรสามารถบันทึกได้สูงสุด 2000 ตัว"
                                                             required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                             requiredMessage="#{msg.require}" >
                                                <f:validateLength for="" maximum="2000"/>
                                                <rich:validator/>
                                            </h:inputTextarea>       
                                            <rich:message for="fxTextBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{fx.controlType eq msg.calendarControl}">
                                            <ui:remove>
                                            <rich:calendar id="fxCalendar" value="#{fx.poFlexField}"
                                               inputClass="textfield" inputSize="20"  buttonClass="rfcalbtn"
                                               datePattern="dd/MM/yyyy HH:mm"
                                               locale="#{msg.localeTh}"
                                               required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                               requiredMessage="#{msg.require}"
                                               todayControlMode="hidden"
                                               timeZone="#{registrationPoController.defaultTimeZone}">
                                               <f:converter converterId="DateStringConverter"/>
                                            </rich:calendar>
                                            <rich:message for="fxCalendar" style="color:red; display: inline-table" />
                                            </ui:remove>
                                            <c:set var="fxNo" value="${fx.no}" />
                                            <c:set var="regNo" value="${idform}" />
                                            <c:set var="fxId" value="fxdatepicker_${registrationPoController.regInfo.indexOf(registration)}_${fxNo}" />
                                            <input type="text" id="${fxId}" class="fxdatepicker" readonly="readonly" value="#{registrationPoController.convertThaiStrDate(fx.poFlexField)}" onchange="flexFieldDateChange(${fxNo}, this.value, ${regNo})" />
                                            <h:inputText id="fxCalendar" style="display: none"
                                                         required="#{fx.requireFlexField and registrationPoController.immediateCheck and (fx.poFlexField eq '' or fx.poFlexField eq null)}"
                                                         requiredMessage="#{msg.require}">
                                                <rich:validator />
                                            </h:inputText>
                                            <rich:message for="fxCalendar" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{fx.controlType eq msg.comboBoxControl and registrationPoController.productFlexField1 ne 'CMI' and registrationPoController.productFlexField1 ne 'VMI'}">
                                            <h:selectOneMenu id="fxComboBox" value="#{fx.poFlexField}"
                                                                required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{fx.itemList}"/>
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="fxComboBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <!-- hard code -->
                                        <h:panelGroup rendered="#{fx.controlType eq msg.comboBoxControl and fx.no ne 44 and (registrationPoController.productFlexField1 eq 'CMI' or registrationPoController.productFlexField1 eq 'VMI')}">
                                            <h:selectOneMenu id="fxComboBox2" value="#{fx.poFlexField}"
                                                             required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                             requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{fx.itemList}"/>
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="fxComboBox2" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <h:panelGroup id="fxComboGroup" rendered="#{fx.controlType eq msg.comboBoxControl and fx.no eq 44 and (registrationPoController.productFlexField1 eq 'CMI' or registrationPoController.productFlexField1 eq 'VMI')}">
                                            <h:selectOneMenu id="fxComboBox3" value="#{fx.poFlexField}"
                                                                disabled="true"
                                                                required="false"
                                                                requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{fx.itemList}"/>
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="fxComboBox3" style="color:red; display: inline-table" />
                                        </h:panelGroup>
                                        <!-- hard code -->
                                        <h:panelGroup rendered="#{fx.controlType eq msg.suggestionBoxControl}">
                                            <rich:select id="fxSuggestionBox" 
                                                           defaultLabel="#{msg.pleaseSelect}"
                                                           value="#{fx.poFlexField}"
                                                           required="#{fx.requireFlexField and registrationPoController.immediateCheck}"
                                                           requiredMessage="#{msg.require}">
                                                <f:selectItems value="#{fx.itemList}"/>
                                                <rich:validator/>
                                            </rich:select>
                                            <rich:message for="fxSuggestionBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>


                                    </td>
                                    </tr>
                                </a4j:repeat>
                                <h:panelGroup rendered="#{registrationPoController.productFlexField1 eq 'VMI' or registrationPoController.productFlexField1 eq 'CMI'}">
                                    <tr>
                                        <td align="right" valign="top">
                                            <h:outputText value="เบี้ยประกันก่อนภาษีอากร:"/>
                                        </td>
                                        <td>
                                            <h:panelGroup id="motorPrice">
                                                <h:inputText value="#{registrationPoController.price}" disabled="true"/>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right" valign="top">
                                            <h:outputText value="เบี้ยประกันรวมภาษีอากร:"/>
                                        </td>
                                        <td>
                                            <h:panelGroup id="motorNetPremium">
                                                <h:inputText value="#{registrationPoController.netPremium}" disabled="true"/>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right" valign="top">
                                            <h:outputText value="ประเภทส่วนลด:"/>
                                        </td>
                                        <td>
                                            <h:selectOneRadio value="#{registrationPoController.discountType}">
                                                <f:selectItem itemValue="P" itemLabel="% ส่วนลด"></f:selectItem>
                                                <f:selectItem itemValue="V" itemLabel="จำนวนเงินส่วนลด"></f:selectItem>
                                                <a4j:ajax event="change" execute="@this"
                                                  listener="#{registrationPoController.typeDiscountListener}" render="panelDiscount,totalamount"
                                                />
                                            </h:selectOneRadio>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right" valign="top">
                                            <h:outputText value="ส่วนลด (มูลค่าไม่เกิน 20% ของเบี้ยประกัน):"/>
                                        </td>
                                        <td>
                                            <h:panelGroup id="panelDiscount">
                                                <h:inputText id="discountbypercent" value="#{registrationPoController.discountByPercent}"
                                                             disabled="#{registrationPoController.disableDiscountByPercent}"
                                                             style="width:50px;">
                                                    <a4j:ajax execute="@this" listener="#{registrationPoController.calculateDiscountByPercent}" event="change" render="totalamount,panelDiscount"/>
                                                </h:inputText>
                                                <h:outputText value=" % "/>
                                                <h:inputText id="discountbymoney" value="#{registrationPoController.discountByMoney}"
                                                             disabled="#{registrationPoController.disableDiscountByMoney}"
                                                             style="width:100px;">
                                                    <a4j:ajax execute="@this" listener="#{registrationPoController.calculateDiscountByMoney}" event="change" render="totalamount,panelDiscount"/>
                                                </h:inputText>
                                                <h:outputText value=" บาท"/>
                                                <h:outputText id="discountMessgeDup" value=" #{registrationPoController.discountMessageDup}" style="color:red"/>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right" valign="top">
                                            <h:outputText value="รวมเบี้ยประกันหลังหักจากส่วนลด:"/>
                                        </td>
                                        <td>
                                            <h:panelGroup id="totalamount">
                                                <h:inputText value="#{registrationPoController.totalPrice}" disabled="true"/>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                </h:panelGroup>
                                <script>
                                    $(".fxdatepicker").datepicker($.datepicker.regional["th"]);
                                    if ($(".fxdatepicker").datepicker("getDate") === null) {
                                        $(".fxdatepicker").datepicker("option", "defaultDate", new Date());
                                    }
                                </script>
                                <tr>
                                    <td colspan="2" width="100%">
                                    <!-- BEGIN ADDRESS FORM -->               
                                    <!-- Begin 1 Current Address Form -->               
                                    <h:panelGroup id="currentPanelAddr" rendered="#{registration.currentAddress ne null}">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="3" >
                                            <tr><td colspan="2"><h4 class="line01"><h:outputText value="#{registration.currentAddress eq '' ? 'Current Address' : registration.currentAddress}" /></h4></td></tr>
                                            <tr>
                                                <td width="60%">
                                                    <h:panelGrid width="100%" columns="2"  columnClasses="colStyle1,colStyle2" rendered="#{registration.currentAddress1 ne null || registration.currentAddressProvince ne null}"> 
                                                        <h:outputText value="#{registration.currentAddressFullName}:" rendered="#{registration.currentAddressFullName ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddressFullName ne null}"> 
                                                            <h:inputText id="currentaddressfullname" value="#{registration.po.currentFullname}"
                                                                                         styleClass="textfield"
                                                                                         size="40"
                                                                                         maxlength="100"
                                                                                         required="#{registration.requireCurrentAddressFullName and registrationPoController.immediateCheck}"
                                                                                         requiredMessage="#{msg.require}" >
                                                                    <rich:validator/>
                                                              </h:inputText>
                                                              <rich:message for="currentaddressfullname" style="color:red; display: inline-table"/>    
                                                        </h:panelGroup>

                                                        <h:outputText value="#{registration.currentAddress1}:" rendered="#{registration.currentAddress1 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress1 ne null}"> 
                                                            <h:inputText id="currentaddress1" value="#{registration.po.currentAddressLine1}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress1 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>  
                                                                        <a4j:ajax event="keyup" render="previewCurrentAddPanel1"  queueId="regQueue"
                                                                              limitRender="true" execute="@this"
                                                                              listener="#{registrationPoController.countPreviewCurrentAdd1(registration)}"/>                                                                
                                                            </h:inputText>
                                                            <rich:message for="currentaddress1" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress2}:" rendered="#{registration.currentAddress2 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress2 ne null}"> 
                                                            <h:inputText id="currentaddress2" value="#{registration.po.currentAddressLine2}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress2 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                                        <a4j:ajax event="keyup" render="previewCurrentAddPanel1"  queueId="regQueue"
                                                                              limitRender="true" execute="@this"
                                                                              listener="#{registrationPoController.countPreviewCurrentAdd1(registration)}"/>                                                                
                                                            </h:inputText>
                                                            <rich:message for="currentaddress2" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress3}:" rendered="#{registration.currentAddress3 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress3 ne null}"> 
                                                            <h:inputText id="currentaddress3" value="#{registration.po.currentAddressLine3}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress3 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/> 
                                                                        <a4j:ajax event="keyup" render="previewCurrentAddPanel1"  queueId="regQueue"
                                                                              limitRender="true" execute="@this"
                                                                              listener="#{registrationPoController.countPreviewCurrentAdd1(registration)}"/> 
                                                            </h:inputText>
                                                            <rich:message for="currentaddress3" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress4}:" rendered="#{registration.currentAddress4 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress4 ne null}"> 
                                                            <h:inputText id="currentaddress4" value="#{registration.po.currentAddressLine4}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress4 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                                        <a4j:ajax event="keyup" render="previewCurrentAddPanel1"  queueId="regQueue"
                                                                              limitRender="true" execute="@this"
                                                                              listener="#{registrationPoController.countPreviewCurrentAdd1(registration)}"/> 

                                                            </h:inputText>
                                                            <rich:message for="currentaddress4" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress5}:" rendered="#{registration.currentAddress5 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress5 ne null}"> 
                                                            <h:inputText id="currentaddress5" value="#{registration.po.currentAddressLine5}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress5 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                                        <a4j:ajax event="keyup" render="previewCurrentAddPanel2"  queueId="regQueue"
                                                                              limitRender="true" execute="@this"
                                                                              listener="#{registrationPoController.countPreviewCurrentAdd2(registration)}"/> 

                                                            </h:inputText>
                                                            <rich:message for="currentaddress5" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress6}:" rendered="#{registration.currentAddress6 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress6 ne null}"> 
                                                            <h:inputText id="currentaddress6" value="#{registration.po.currentAddressLine6}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress6 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                            </h:inputText>
                                                            <rich:message for="currentaddress6" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress7}:" rendered="#{registration.currentAddress7 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress7 ne null}"> 
                                                            <h:inputText id="currentaddress7" value="#{registration.po.currentAddressLine7}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress7 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                            </h:inputText>
                                                            <rich:message for="currentaddress7" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddress8}:" rendered="#{registration.currentAddress8 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddress8 ne null}"> 
                                                            <h:inputText id="currentaddress8" value="#{registration.po.currentAddressLine8}"
                                                                             styleClass="textfield"
                                                                             size="40"
                                                                             maxlength="100"
                                                                             required="#{registration.requireCurrentAddress8 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                            </h:inputText>
                                                            <rich:message for="currentaddress8" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddressProvince}:" rendered="#{registration.currentAddressProvince ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddressProvince ne null}"> 
                                                            <h:selectOneMenu id="currentaddress1province"
                                                                                 value="#{registration.currentProvinceId}"
                                                                                 valueChangeListener="#{registration.currentProvinceListener}"
                                                                                 required="#{registration.requireCurrentAddressProvince and registrationPoController.immediateCheck}"
                                                                                 requiredMessage="#{msg.require}"
                                                                                 styleClass="select07">
                                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                                <f:selectItems value="#{registrationPoController.provinceList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                                <rich:validator/>
                                                                <a4j:ajax event="change"
                                                                             queueId="regQueue"
                                                                             render="currentaddress1district, currentaddress1subdistrict, currentaddressPostal, previewCurrentAddPanel3, previewCurrentAddPanel2"
                                                                             limitRender="true"
                                                                             execute="@this"
                                                                             listener="#{registrationPoController.countPreviewCurrentAdd3(registration)}" />

                                                            </h:selectOneMenu>
                                                            <rich:message for="currentaddress1province" style="color:red; display: inline-table"/>
                                                        </h:panelGroup>

                                                        <h:outputText value="อำเภอ:" rendered="#{registration.currentAddressProvince ne null}"/>    
                                                        <h:panelGroup rendered="#{registration.currentAddressProvince ne null}"> 
                                                        <h:selectOneMenu id="currentaddress1district"
                                                                                 value="#{registration.currentDistrictId}"
                                                                        valueChangeListener="#{registration.currentDistrictListener}"
                                                                        required="#{registration.requireCurrentAddressProvince and registrationPoController.immediateCheck}"
                                                                                 requiredMessage="#{msg.require}"
                                                                                 styleClass="select07">
                                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                                <f:selectItems value="#{registration.currentDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                                <rich:validator/>
                                                                <a4j:ajax event="change"
                                                                             queueId="regQueue"
                                                                             render="currentaddress1subdistrict, currentaddressPostal, previewCurrentAddPanel2"
                                                                             limitRender="true"
                                                                             execute="@this"
                                                                             listener="#{registrationPoController.countPreviewCurrentAdd2(registration)}"/>
                                                            </h:selectOneMenu>
                                                            <rich:message for="currentaddress1district" style="color:red; display: inline-table"/>
                                                        </h:panelGroup> 

                                                        <h:outputText value="ตำบล:" rendered="#{registration.currentAddressProvince ne null}"/>    
                                                        <h:panelGroup rendered="#{registration.currentAddressProvince ne null}"> 
                                                        <h:selectOneMenu id="currentaddress1subdistrict"
                                                                        value="#{registration.currentSubDistrictId}"
                                                                        valueChangeListener="#{registration.currentSubDistrictListener}"
                                                                        required="#{registration.requireCurrentAddressProvince and registrationPoController.immediateCheck}"
                                                                        requiredMessage="#{msg.require}"
                                                                        styleClass="select07">
                                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                                <f:selectItems value="#{registration.currentSubDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                                        <rich:validator/>
                                                                <a4j:ajax event="change"
                                                                             queueId="regQueue"
                                                                             render="currentaddressPostal, previewCurrentAddPanel2 "
                                                                             limitRender="true"
                                                                             execute="@this"
                                                                             listener="#{registrationPoController.countPreviewCurrentAdd2(registration)}"/>
                                                            </h:selectOneMenu>
                                                            <rich:message for="currentaddress1subdistrict" style="color:red; display: inline-table"/>
                                                        </h:panelGroup> 

                                                        <h:outputText value="รหัสไปรษณีย์:" rendered="#{registration.currentAddressProvince ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddressProvince ne null}"> 
                                                            <h:inputText id="currentaddressPostal"
                                                                         value="#{registration.currentPostal}"
                                                                         required="#{registration.requireCurrentAddressProvince and registrationPoController.immediateCheck}"
                                                                         requiredMessage="#{msg.require}"
                                                                         styleClass="textfield"
                                                                         size="20"
                                                                         maxlength="50">
                                                                                <f:ajax execute="@this" event="change" />
                                                                <rich:validator/>
                                                            </h:inputText>
                                                            <rich:message for="currentaddressPostal" style="color:red; display: inline-table"/>

                                                            <a4j:commandButton image="/img/b_search_small.png"   
                                                                               limitRender="true" execute="@this"
                                                                               render="currentaddress1province, currentaddress1district, currentaddress1subdistrict, currentaddressPostal, previewCurrentAddPanel3, previewCurrentAddPanel2, msgCurrentPostal"
                                                                               actionListener="#{registrationPoController.searchZipCode(registration)}" >
                                                                <f:param name="selectedAddress" value="current"/>
                                                            </a4j:commandButton>

                                                            <a4j:commandButton image="/img/b_clear_small.png" 
                                                                               limitRender="true" execute="@this"
                                                                               render="currentaddress1province, currentaddress1district, currentaddress1subdistrict, currentaddressPostal, previewCurrentAddPanel3, previewCurrentAddPanel2, msgCurrentPostal"
                                                                               actionListener="#{registrationPoController.clearZipCode(registration)}" >
                                                                <f:param name="selectedAddress" value="current"/>
                                                            </a4j:commandButton>

                                                            <h:outputText id="msgCurrentPostal" value="#{registration.msgPostalCode}" style="color: red" />

                                                        </h:panelGroup>  

                                                        <h:outputText value="#{registration.currentAddressTelephone1}:" rendered="#{registration.currentAddressTelephone1 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddressTelephone1 ne null}"> 
                                                            <h:inputText id="currentaddressTelephone1" value="#{registration.po.currentTelephone1}"
                                                                             styleClass="textfield"
                                                                             size="20"
                                                                             maxlength="50"
                                                                             required="#{registration.requireCurrentAddressTelephone1 and registrationPoController.immediateCheck}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                            </h:inputText>
                                                            <rich:message for="currentaddressTelephone1" style="color:red; display: inline-table"/>
                                                        </h:panelGroup> 

                                                        <h:outputText value="#{registration.currentAddressTelephone2}:" rendered="#{registration.currentAddressTelephone2 ne null}"/>
                                                        <h:panelGroup rendered="#{registration.currentAddressTelephone2 ne null}"> 
                                                            <h:inputText id="currentaddressTelephone2" value="#{registration.po.currentTelephone2 and registrationPoController.immediateCheck}"
                                                                             styleClass="textfield"
                                                                             size="20"
                                                                             maxlength="50"
                                                                             required="#{registration.requireCurrentAddressTelephone2}"
                                                                             requiredMessage="#{msg.require}" >
                                                                        <rich:validator/>
                                                            </h:inputText>
                                                            <rich:message for="currentaddressTelephone2" style="color:red; display: inline-table"/>
                                                        </h:panelGroup> 
                                                    </h:panelGrid> 
                                                </td>
                                                <td valign="top" align="center" width="40%" >
                                                    <table width="80%" border="0" cellpadding="0" cellspacing="1" >
                                                        <tr>
                                                            <td class="gray03" align="left" height="30px" width="70px"><h:outputText value="Copy From: "/></td>
                                                            <td class="gray03" align="left">
                                                                <h:selectOneMenu id="currentCopyId" styleClass="select07" value="#{registrationPoController.currentCopyFrom}">
                                                                    <f:selectItems value="#{registration.addrCopyForCurrent}" />
                                                                    <a4j:ajax event="change" queueId="regQueue" render="currentPanelAddr"
                                                                              limitRender="true" execute="@this"
                                                                              listener="#{registrationPoController.copyAddressToCurrent(registration)}"/>
                                                                </h:selectOneMenu>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <table width="80%" border="0" cellpadding="0" cellspacing="1" bgcolor="#dedfe0">
                                                    <tr>
                                                        <td class="gray03" width="300px" style="height: 30px"><h:outputText value="Preview #{registration.currentAddress eq '' ? 'Current Address' : registration.currentAddress}" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td bgcolor="#FFFFFF"  valign="top" class="gray03"  >
                                                            <div  style="width:320px;padding:5px;overflow-wrap: break-word;overflow-style:panner;">
                                                            <h:panelGroup id="previewCurrentAddPanel1" ><br/>
                                                                                <h:outputText value="#{registration.previewCurrentAdd1}"/>
                                                                                <h:outputText style="color:#{registration.previewCurrentAdd1.length() gt 100 ? 'red' : '#00D300'};" 
                                                                                              value=" (#{registration.previewCurrentAdd1.length()})" 
                                                                                              rendered="#{registration.previewCurrentAdd1.length() > 0}"/>
                                                                </h:panelGroup><br/><br/>
                                                            <h:panelGroup id="previewCurrentAddPanel2" >
                                                                                <h:outputText value="#{registration.previewCurrentAdd2}"/>
                                                                                <h:outputText style="color:#{registration.previewCurrentAdd2.length() gt 100 ? 'red' : '#00D300'};" 
                                                                                                  value=" (#{registration.previewCurrentAdd2.length()})" 
                                                                                                  rendered="#{registration.previewCurrentAdd2.length() > 0}"/>  
                                                            </h:panelGroup><br/><br/>
                                                            <h:panelGroup id="previewCurrentAddPanel3" >
                                                                                <h:outputText value="#{registration.previewCurrentAdd3}"/>
                                                                                <h:outputText style="color:#{registration.previewCurrentAdd3.length() gt 100 ? 'red' : '#00D300'};" 
                                                                                                  value=" (#{registration.previewCurrentAdd3.length()})" 
                                                                                                  rendered="#{registration.previewCurrentAdd3.length() > 0}"/>  
                                                            </h:panelGroup>
                                                            </div>
                                                        <br/><br/></td>
                                                    </tr>
                                                    </table>
                                                </td>                                        
                                            </tr>
                                        </table>
                                    </h:panelGroup>

                                    <!-- Begin 2 Home Address Form -->               
                                    <h:panelGroup id="homePanelAddr" rendered="#{registration.homeAddress ne null}">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="3" >
                                            <tr><td colspan="2"><h4 class="line01"><h:outputText value="#{registration.homeAddress eq '' ? 'Home Address' : registration.homeAddress}" /></h4></td></tr>
                                            <tr>
                                                <td width="60%">
                                                <h:panelGrid width="100%" columns="2" columnClasses="colStyle1,colStyle2" rendered="#{registration.homeAddress1 ne null || registration.homeAddressProvince ne null}">
                                                <h:outputText value="#{registration.homeAddressFullName}:" rendered="#{registration.homeAddressFullName ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddressFullName ne null}"> 
                                                    <h:inputText id="homeaddressfullname" value="#{registration.po.homeFullname}"
                                                                                 styleClass="textfield"
                                                                                 size="40"
                                                                                 maxlength="100"
                                                                                 required="#{registration.requireHomeAddressFullName and registrationPoController.immediateCheck}"
                                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                      </h:inputText>
                                                      <rich:message for="homeaddressfullname" style="color:red; display: inline-table"/>    
                                                </h:panelGroup>

                                                <h:outputText value="#{registration.homeAddress1}:" rendered="#{registration.homeAddress1 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress1 ne null}"> 
                                                    <h:inputText id="homeaddress1" value="#{registration.po.homeAddressLine1}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress1 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewHomeAddPanel1"  queueId="regQueue"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.countPreviewHomeAdd1(registration)}"/>                                                                
                                                    </h:inputText>
                                                    <rich:message for="homeaddress1" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddress2}:" rendered="#{registration.homeAddress2 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress2 ne null}">
                                                    <h:inputText id="homeaddress2" value="#{registration.po.homeAddressLine2}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress2}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewHomeAddPanel1"  queueId="regQueue"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.countPreviewHomeAdd1(registration)}"/>                                                                
                                                    </h:inputText>
                                                    <rich:message for="homeaddress2" style="color:red; display: inline-table"/>
                                                </h:panelGroup>

                                                <h:outputText value="#{registration.homeAddress3}:" rendered="#{registration.homeAddress3 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress3 ne null}"> 
                                                    <h:inputText id="homeaddress3" value="#{registration.po.homeAddressLine3}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress3}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewHomeAddPanel1"  queueId="regQueue"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.countPreviewHomeAdd1(registration)}"/>                                                                
                                                    </h:inputText>
                                                    <rich:message for="homeaddress3" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddress4}:" rendered="#{registration.homeAddress4 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress4 ne null}"> 
                                                    <h:inputText id="homeaddress4" value="#{registration.po.homeAddressLine4}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress4}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewHomeAddPanel1"  queueId="regQueue"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.countPreviewHomeAdd1(registration)}"/>                                                                
                                                    </h:inputText>
                                                    <rich:message for="homeaddress4" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddress5}:" rendered="#{registration.homeAddress5 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress5 ne null}"> 
                                                    <h:inputText id="homeaddress5" value="#{registration.po.homeAddressLine5}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress5 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewHomeAddPanel2"  queueId="regQueue"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.countPreviewHomeAdd2(registration)}"/>                                                                

                                                    </h:inputText>
                                                    <rich:message for="homeaddress5" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddress6}:" rendered="#{registration.homeAddress6 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress6 ne null}"> 
                                                    <h:inputText id="homeaddress6" value="#{registration.po.homeAddressLine6}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress6 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="homeaddress6" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddress7}:" rendered="#{registration.homeAddress7 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress7 ne null}"> 
                                                    <h:inputText id="homeaddress7" value="#{registration.po.homeAddressLine7}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress7 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="homeaddress7" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddress8}:" rendered="#{registration.homeAddress8 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddress8 ne null}"> 
                                                    <h:inputText id="homeaddress8" value="#{registration.po.homeAddressLine8}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireHomeAddress8 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="homeaddress8" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddressProvince}:" rendered="#{registration.homeAddressProvince ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddressProvince ne null}"> 
                                                    <h:selectOneMenu id="homeaddress1province"
                                                                         value="#{registration.homeProvinceId}"
                                                                         valueChangeListener="#{registration.homeProvinceListener}"
                                                                         required="#{registration.requireHomeAddressProvince and registrationPoController.immediateCheck}"
                                                                         requiredMessage="#{msg.require}"
                                                                         styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registrationPoController.provinceList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="homeaddress1district, homeaddress1subdistrict, homeaddressPostal, previewHomeAddPanel2, previewHomeAddPanel3"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewHomeAdd3(registration)}"/>
                                                    </h:selectOneMenu>
                                                    <rich:message for="homeaddress1province" style="color:red; display: inline-table"/>
                                                </h:panelGroup>

                                                <h:outputText value="อำเภอ:" rendered="#{registration.homeAddressProvince ne null}"/>    
                                                <h:panelGroup rendered="#{registration.homeAddressProvince ne null}"> 
                                                <h:selectOneMenu id="homeaddress1district"
                                                                         value="#{registration.homeDistrictId}"
                                                                valueChangeListener="#{registration.homeDistrictListener}"
                                                                required="#{registration.requireHomeAddressProvince and registrationPoController.immediateCheck}"
                                                                         requiredMessage="#{msg.require}"
                                                                         styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registration.homeDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="homeaddress1subdistrict, homeaddressPostal, previewHomeAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewHomeAdd2(registration)}" />
                                                    </h:selectOneMenu>
                                                    <rich:message for="homeaddress1district" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="ตำบล:" rendered="#{registration.homeAddressProvince ne null}"/>    
                                                <h:panelGroup rendered="#{registration.homeAddressProvince ne null}"> 
                                                <h:selectOneMenu id="homeaddress1subdistrict"
                                                                value="#{registration.homeSubDistrictId}"
                                                                valueChangeListener="#{registration.homeSubDistrictListener}"
                                                                required="#{registration.requireHomeAddressProvince and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}"
                                                                styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registration.homeSubDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                                <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="homeaddressPostal, previewHomeAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewHomeAdd2(registration)}" />
                                                    </h:selectOneMenu>
                                                    <rich:message for="homeaddress1subdistrict" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="รหัสไปรษณีย์:" rendered="#{registration.homeAddressProvince ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddressProvince ne null}"> 
                                                    <h:inputText id="homeaddressPostal"
                                                                value="#{registration.homePostal}"
                                                                required="#{registration.requireHomeAddressProvince and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}"
                                                                styleClass="textfield"
                                                                size="20"
                                                                maxlength="50">
                                                            <f:ajax execute="@this" event="change" />
                                                        <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="homeaddressPostal" style="color:red; display: inline-table"/>

                                                    <a4j:commandButton image="/img/b_search_small.png"   
                                                                       limitRender="true" execute="@this"
                                                                       render="homeaddress1province, homeaddress1district, homeaddress1subdistrict, homeaddressPostal, previewHomeAddPanel3, previewHomeAddPanel2, msgHomePostal"
                                                                       actionListener="#{registrationPoController.searchZipCode(registration)}" >
                                                        <f:param name="selectedAddress" value="home"/>
                                                    </a4j:commandButton>

                                                    <a4j:commandButton image="/img/b_clear_small.png" 
                                                                       limitRender="true" execute="@this"
                                                                       render="homeaddress1province, homeaddress1district, homeaddress1subdistrict, homeaddressPostal, previewHomeAddPanel3, previewHomeAddPanel2, msgHomePostal"
                                                                       actionListener="#{registrationPoController.clearZipCode(registration)}" >
                                                        <f:param name="selectedAddress" value="home"/>
                                                    </a4j:commandButton>

                                                    <h:outputText id="msgHomePostal" value="#{registration.msgPostalCode}" style="color: red" />

                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.homeAddressTelephone1}:" rendered="#{registration.homeAddressTelephone1 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddressTelephone1 ne null}"> 
                                                    <h:inputText id="homeaddressTelephone1" value="#{registration.po.homeTelephone1}"
                                                                     styleClass="textfield"
                                                                     size="20"
                                                                     maxlength="50"
                                                                     required="#{registration.requireHomeAddressTelephone1 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="homeaddressTelephone1" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="#{registration.homeAddressTelephone2}:" rendered="#{registration.homeAddressTelephone2 ne null}"/>
                                                <h:panelGroup rendered="#{registration.homeAddressTelephone2 ne null}"> 
                                                    <h:inputText id="homeaddressTelephone2" value="#{registration.po.homeTelephone2}"
                                                                     styleClass="textfield"
                                                                     size="20"
                                                                     maxlength="50"
                                                                     required="#{registration.requireHomeAddressTelephone2 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="homeaddressTelephone2" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 
                                            </h:panelGrid> 
                                            </td>
                                            <td valign="top" align="center" width="40%">
                                                <table width="80%" border="0" cellpadding="0" cellspacing="1" >
                                                    <tr>
                                                        <td class="gray03" align="left" height="30px" width="70px"><h:outputText value="Copy From: "/></td>
                                                        <td class="gray03" align="left">
                                                            <h:selectOneMenu id="homeCopyId" styleClass="select07" value="#{registrationPoController.homeCopyFrom}">
                                                                <f:selectItems value="#{registration.addrCopyForHome}" />
                                                                <a4j:ajax event="change" queueId="regQueue" render="homePanelAddr"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.copyAddressToHome(registration)}"/>
                                                            </h:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table width="80%" border="0" cellpadding="0" cellspacing="1" bgcolor="#dedfe0">
                                                <tr>
                                                    <td class="gray03" width="80%" style="height: 30px"><h:outputText value="Preview #{registration.homeAddress eq '' ? 'Home Address' : registration.homeAddress}"/></td>
                                                </tr>
                                                <tr>
                                                    <td bgcolor="#FFFFFF"  valign="top" class="gray03">
                                                        <div  style="width:320px;padding:5px;overflow-wrap: break-word;overflow-style:panner;">
                                                        <h:panelGroup id="previewHomeAddPanel1" ><br/>
                                                                                    <h:outputText value="#{registration.previewHomeAdd1}"/>
                                                                                    <h:outputText style="color:#{registration.previewHomeAdd1.length() gt 100 ? 'red' : '#00D300'};" 
                                                                                                  value=" (#{registration.previewHomeAdd1.length()})" 
                                                                                                  rendered="#{registration.previewHomeAdd1.length() > 0}"/>
                                                            </h:panelGroup><br/><br/>
                                                        <h:panelGroup id="previewHomeAddPanel2" >
                                                                                    <h:outputText value="#{registration.previewHomeAdd2}"/>
                                                                                    <h:outputText style="color:#{registration.previewHomeAdd2.length() gt 100 ? 'red' : '#00D300'};" 
                                                                                                      value=" (#{registration.previewHomeAdd2.length()})" 
                                                                                                      rendered="#{registration.previewHomeAdd2.length() > 0}"/>  
                                                        </h:panelGroup><br/><br/>
                                                        <h:panelGroup id="previewHomeAddPanel3" >
                                                                                    <h:outputText value="#{registration.previewHomeAdd3}"/>
                                                                                    <h:outputText style="color:#{registration.previewHomeAdd3.length() gt 100 ? 'red' : '#00D300'};" 
                                                                                                      value=" (#{registration.previewHomeAdd3.length()})" 
                                                                                                      rendered="#{registration.previewHomeAdd3.length() > 0}"/>  
                                                        </h:panelGroup>
                                                        </div>
                                                    <br/><br/></td>
                                                </tr>
                                                </table>
                                            </td>                                        
                                        </tr>
                                        </table>
                                    </h:panelGroup>    

                                    <!-- Begin 3 Shipping Address Form -->               
                                    <h:panelGroup id="shippingPanelAddr" rendered="#{registration.shippingAddress ne null}">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="3" >
                                            <tr><td colspan="2"><h4 class="line01"><h:outputText value="#{registration.shippingAddress eq '' ? 'Shipping Address' : registration.shippingAddress}" /></h4></td></tr>
                                            <tr>
                                                <td width="60%">
                                                <h:panelGrid width="100%" columns="2" columnClasses="colStyle1,colStyle2" >
                                                <h:outputText value="#{registration.shippingAddressFullName}:" rendered="#{registration.shippingAddressFullName ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddressFullName ne null}"> 
                                                    <h:inputText id="shippingaddressfullname" value="#{registration.po.shippingFullname}"
                                                                                 styleClass="textfield"
                                                                                 size="40"
                                                                                 maxlength="100"
                                                                                 required="#{registration.requireShippingAddressFullName and registrationPoController.immediateCheck}"
                                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                      </h:inputText>
                                                      <rich:message for="shippingaddressfullname" style="color:red; display: inline-table"/>    
                                                </h:panelGroup>

                                                <h:outputText value="#{registration.shippingAddress1}:" rendered="#{registration.shippingAddress1 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress1 ne null}"> 
                                                    <h:inputText id="shippingaddress1" value="#{registration.po.shippingAddressLine1}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress1 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewShippingAddPanel1"  queueId="regQueue"
                                                                                  limitRender="true" execute="@this"
                                                                                  listener="#{registrationPoController.countPreviewShippingAdd1(registration)}"/> 
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress1" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress2}:" rendered="#{registration.shippingAddress2 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress2 ne null}"> 
                                                    <h:inputText id="shippingaddress2" value="#{registration.po.shippingAddressLine2}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress2 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewShippingAddPanel1"  queueId="regQueue"
                                                                                  limitRender="true" execute="@this"
                                                                                  listener="#{registrationPoController.countPreviewShippingAdd1(registration)}"/> 
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress2" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress3}:" rendered="#{registration.shippingAddress3 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress3 ne null}"> 
                                                    <h:inputText id="shippingaddress3" value="#{registration.po.shippingAddressLine3}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress3 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewShippingAddPanel1"  queueId="regQueue"
                                                                                  limitRender="true" execute="@this"
                                                                                  listener="#{registrationPoController.countPreviewShippingAdd1(registration)}"/> 
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress3" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress4}:" rendered="#{registration.shippingAddress4 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress4 ne null}"> 
                                                    <h:inputText id="shippingaddress4" value="#{registration.po.shippingAddressLine4}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress4 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewShippingAddPanel1"  queueId="regQueue"
                                                                                  limitRender="true" execute="@this"
                                                                                  listener="#{registrationPoController.countPreviewShippingAdd1(registration)}"/> 
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress4" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress5}:" rendered="#{registration.shippingAddress5 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress5 ne null}"> 
                                                    <h:inputText id="shippingaddress5" value="#{registration.po.shippingAddressLine5}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress5 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                                <a4j:ajax event="keyup" render="previewShippingAddPanel2"  queueId="regQueue"
                                                                                  limitRender="true" execute="@this"
                                                                                  listener="#{registrationPoController.countPreviewShippingAdd2(registration)}"/> 
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress5" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress6}:" rendered="#{registration.shippingAddress6 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress6 ne null}"> 
                                                    <h:inputText id="shippingaddress6" value="#{registration.po.shippingAddressLine6}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress6 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress6" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress7}:" rendered="#{registration.shippingAddress7 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress7 ne null}"> 
                                                    <h:inputText id="shippingaddress7" value="#{registration.po.shippingAddressLine7}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress7 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress7" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddress8}:" rendered="#{registration.shippingAddress8 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddress8 ne null}"> 
                                                    <h:inputText id="shippingaddress8" value="#{registration.po.shippingAddressLine8}"
                                                                     styleClass="textfield"
                                                                     size="40"
                                                                     maxlength="100"
                                                                     required="#{registration.requireShippingAddress8 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="shippingaddress8" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddressProvince}:" rendered="#{registration.shippingAddressProvince ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddressProvince ne null}"> 
                                                    <h:selectOneMenu id="shippingaddress1province"
                                                                         value="#{registration.shippingProvinceId}"
                                                                         valueChangeListener="#{registration.shippingProvinceListener}"
                                                                         required="#{registration.requireShippingAddressProvince and registrationPoController.immediateCheck}"
                                                                         requiredMessage="#{msg.require}"
                                                                         styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registrationPoController.provinceList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="shippingaddress1district, shippingaddress1subdistrict, shippingaddressPostal,previewShippingAddPanel3, previewShippingAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewShippingAdd3(registration)}" />
                                                    </h:selectOneMenu>
                                                    <rich:message for="shippingaddress1province" style="color:red; display: inline-table"/>
                                                </h:panelGroup>

                                                <h:outputText value="อำเภอ:" rendered="#{registration.shippingAddressProvince ne null}"/>    
                                                <h:panelGroup rendered="#{registration.shippingAddressProvince ne null}"> 
                                                    <h:selectOneMenu id="shippingaddress1district"
                                                                    value="#{registration.shippingDistrictId}"
                                                                    valueChangeListener="#{registration.shippingDistrictListener}"
                                                                    required="#{registration.requireShippingAddressProvince and registrationPoController.immediateCheck}"
                                                                    requiredMessage="#{msg.require}"
                                                                    styleClass="select07">
                                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                            <f:selectItems value="#{registration.shippingDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                            <rich:validator/>
                                                            <a4j:ajax event="change"
                                                                         queueId="regQueue"
                                                                         render="shippingaddress1subdistrict, shippingaddressPostal, previewShippingAddPanel2 "
                                                                         limitRender="true"
                                                                         execute="@this"
                                                                         listener="#{registrationPoController.countPreviewShippingAdd2(registration)}" />
                                                        </h:selectOneMenu>
                                                    <rich:message for="shippingaddress1district" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="ตำบล:" rendered="#{registration.shippingAddressProvince ne null}"/>    
                                                <h:panelGroup rendered="#{registration.shippingAddressProvince ne null}"> 
                                                <h:selectOneMenu id="shippingaddress1subdistrict"
                                                                value="#{registration.shippingSubDistrictId}"
                                                                valueChangeListener="#{registration.shippingSubDistrictListener}"
                                                                required="#{registration.requireShippingAddressProvince and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}"
                                                                styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registration.shippingSubDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="shippingaddressPostal, previewShippingAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewShippingAdd2(registration)}" /> 
                                                    </h:selectOneMenu>
                                                    <rich:message for="shippingaddress1subdistrict" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="รหัสไปรษณีย์:" rendered="#{registration.shippingAddressProvince ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddressProvince ne null}"> 
                                                    <h:inputText id="shippingaddressPostal"
                                                                value="#{registration.shippingPostal}"
                                                                required="#{registration.requireShippingAddressProvince and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}"
                                                                styleClass="textfield"
                                                                size="20"
                                                                maxlength="50">
                                                            <f:ajax execute="@this" event="change" />
                                                        <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="shippingaddressPostal" style="color:red; display: inline-table"/>

                                                    <a4j:commandButton image="/img/b_search_small.png"   
                                                                       limitRender="true" execute="@this"
                                                                       render="shippingaddress1province, shippingaddress1district, shippingaddress1subdistrict, shippingaddressPostal, previewShippingAddPanel3, previewShippingAddPanel2, msgShippingPostal"
                                                                       actionListener="#{registrationPoController.searchZipCode(registration)}" >
                                                        <f:param name="selectedAddress" value="shipping"/>
                                                    </a4j:commandButton>

                                                    <a4j:commandButton image="/img/b_clear_small.png" 
                                                                       limitRender="true" execute="@this"
                                                                       render="shippingaddress1province, shippingaddress1district, shippingaddress1subdistrict, shippingaddressPostal, previewShippingAddPanel3, previewShippingAddPanel2, msgShippingPostal"
                                                                       actionListener="#{registrationPoController.clearZipCode(registration)}" >
                                                        <f:param name="selectedAddress" value="shipping"/>
                                                    </a4j:commandButton>

                                                    <h:outputText id="msgShippingPostal" value="#{registration.msgPostalCode}" style="color: red" />

                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.shippingAddressTelephone1}:" rendered="#{registration.shippingAddressTelephone1 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddressTelephone1 ne null}"> 
                                                    <h:inputText id="shippingaddressTelephone1" value="#{registration.po.shippingTelephone1}"
                                                                     styleClass="textfield"
                                                                     size="20"
                                                                     maxlength="50"
                                                                     required="#{registration.requireShippingAddressTelephone1 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                        <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="shippingaddressTelephone1" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="#{registration.shippingAddressTelephone2}:" rendered="#{registration.shippingAddressTelephone2 ne null}"/>
                                                <h:panelGroup rendered="#{registration.shippingAddressTelephone2 ne null}"> 
                                                    <h:inputText id="shippingaddressTelephone2" value="#{registration.po.shippingTelephone2}"
                                                                     styleClass="textfield"
                                                                     size="20"
                                                                     maxlength="50"
                                                                     required="#{registration.requireShippingAddressTelephone2 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="shippingaddressTelephone2" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 
                                            </h:panelGrid>
                                            </td>
                                            <td valign="top" align="center" width="40%">
                                                <table width="80%" border="0" cellpadding="0" cellspacing="1" >
                                                    <tr>
                                                        <td class="gray03" align="left" height="30px" width="70px"><h:outputText value="Copy From: "/></td>
                                                        <td class="gray03" align="left">
                                                            <h:selectOneMenu id="shippingCopyId" styleClass="select07" value="#{registrationPoController.shippingCopyFrom}">
                                                                <f:selectItems value="#{registration.addrCopyForShipping}" />
                                                                <a4j:ajax event="change" queueId="regQueue" render="shippingPanelAddr"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.copyAddressToShipping(registration)}"/>
                                                            </h:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table width="80%" border="0" cellpadding="0" cellspacing="1" bgcolor="#dedfe0">
                                                <tr>
                                                    <td class="gray03" width="80%" style="height: 30px"><h:outputText value="Preview #{registration.shippingAddress eq '' ? 'Shipping Address' : registration.shippingAddress}"/></td>
                                                </tr>
                                                <tr>
                                                    <td bgcolor="#FFFFFF"  valign="top" class="gray03">
                                                        <div  style="width:320px;padding:5px;overflow-wrap: break-word;overflow-style:panner;">
                                                        <h:panelGroup id="previewShippingAddPanel1" ><br/>
                                                            <h:outputText value="#{registration.previewShippingAdd1}"/>
                                                            <h:outputText style="color:#{registration.previewShippingAdd1.length() gt 100 ? 'red' : '#00D300'};" 
                                                                          value=" (#{registration.previewShippingAdd1.length()})" 
                                                                          rendered="#{registration.previewShippingAdd1.length() > 0}"/>
                                                        </h:panelGroup><br/><br/>
                                                        <h:panelGroup id="previewShippingAddPanel2" >
                                                            <h:outputText value="#{registration.previewShippingAdd2}"/>
                                                            <h:outputText style="color:#{registration.previewShippingAdd2.length() gt 100 ? 'red' : '#00D300'};" 
                                                                              value=" (#{registration.previewShippingAdd2.length()})" 
                                                                              rendered="#{registration.previewShippingAdd2.length() > 0}"/>  
                                                        </h:panelGroup><br/><br/>
                                                        <h:panelGroup id="previewShippingAddPanel3" >
                                                            <h:outputText value="#{registration.previewShippingAdd3}"/>
                                                            <h:outputText style="color:#{registration.previewShippingAdd3.length() gt 100 ? 'red' : '#00D300'};" 
                                                                              value=" (#{registration.previewShippingAdd3.length()})" 
                                                                              rendered="#{registration.previewShippingAdd3.length() > 0}"/>  
                                                        </h:panelGroup>
                                                        </div>
                                                    <br/><br/></td>
                                                </tr>
                                                </table>
                                            </td>                                        
                                        </tr>
                                    </table>
                                </h:panelGroup>

                                    <!-- Begin 4 Billing Address Form --> 
                                    <h:panelGroup id="billingPanelAddr" rendered="#{registration.billingAddress ne null}">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="3" >
                                            <tr><td colspan="2"><h4 class="line01"><h:outputText value="#{registration.billingAddress eq '' ? 'Billing Address' : registration.billingAddress}" /></h4></td></tr>
                                            <tr>
                                                <td width="60%">
                                                <h:panelGrid width="100%"  columns="2" columnClasses="colStyle1,colStyle2" >
                                                <h:outputText value="#{registration.billingAddressFullName}:" rendered="#{registration.billingAddressFullName ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddressFullName ne null}"> 
                                                    <h:inputText id="billingaddressfullname" value="#{registration.po.billingFullname}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="100"
                                                                 required="#{registration.requireBillingAddressFullName and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                      </h:inputText>
                                                      <rich:message for="billingaddressfullname" style="color:red; display: inline-table"/>    
                                                </h:panelGroup>

                                                <h:outputText value="#{registration.billingAddress1}:" rendered="#{registration.billingAddress1 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress1 ne null}"> 
                                                    <h:inputText id="billingaddress1" value="#{registration.po.billingAddressLine1}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress1 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                            <a4j:ajax event="keyup" render="previewBillingAddPanel1"  queueId="regQueue"
                                                                      limitRender="true" execute="@this"
                                                                      listener="#{registrationPoController.countPreviewBillingAdd1(registration)}"/>                                                     
                                                    </h:inputText>
                                                    <rich:message for="billingaddress1" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress2}:" rendered="#{registration.billingAddress2 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress2 ne null}"> 
                                                    <h:inputText id="billingaddress2" value="#{registration.po.billingAddressLine2}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress2 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                        <rich:validator/>
                                                        <a4j:ajax event="keyup" render="previewBillingAddPanel1"  queueId="regQueue"
                                                                  limitRender="true" execute="@this"
                                                                  listener="#{registrationPoController.countPreviewBillingAdd1(registration)}"/>                                                     
                                                    </h:inputText>
                                                    <rich:message for="billingaddress2" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress3}:" rendered="#{registration.billingAddress3 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress3 ne null}"> 
                                                    <h:inputText id="billingaddress3" value="#{registration.po.billingAddressLine3}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress3 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                        <rich:validator/>
                                                        <a4j:ajax event="keyup" render="previewBillingAddPanel1"  queueId="regQueue"
                                                                  limitRender="true" execute="@this"
                                                                  listener="#{registrationPoController.countPreviewBillingAdd1(registration)}"/>                                                     

                                                    </h:inputText>
                                                    <rich:message for="billingaddress3" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress4}:" rendered="#{registration.billingAddress4 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress4 ne null}"> 
                                                    <h:inputText id="billingaddress4" value="#{registration.po.billingAddressLine4}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress4 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                        <rich:validator/>
                                                        <a4j:ajax event="keyup" render="previewBillingAddPanel1"  queueId="regQueue"
                                                                  limitRender="true" execute="@this"
                                                                  listener="#{registrationPoController.countPreviewBillingAdd1(registration)}"/>                                                     
                                                    </h:inputText>
                                                    <rich:message for="billingaddress4" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress5}:" rendered="#{registration.billingAddress5 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress5 ne null}"> 
                                                    <h:inputText id="billingaddress5" value="#{registration.po.billingAddressLine5}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress5 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                        <rich:validator/>
                                                        <a4j:ajax event="keyup" render="previewBillingAddPanel2"  queueId="regQueue"
                                                                  limitRender="true" execute="@this"
                                                                  listener="#{registrationPoController.countPreviewBillingAdd2(registration)}"/>                                                     

                                                    </h:inputText>
                                                    <rich:message for="billingaddress5" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress6}:" rendered="#{registration.billingAddress6 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress6 ne null}"> 
                                                    <h:inputText id="billingaddress6" value="#{registration.po.billingAddressLine6}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress6 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="billingaddress6" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress7}:" rendered="#{registration.billingAddress7 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress7 ne null}"> 
                                                    <h:inputText id="billingaddress7" value="#{registration.po.billingAddressLine7}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress7 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="billingaddress7" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddress8}:" rendered="#{registration.billingAddress8 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddress8 ne null}"> 
                                                    <h:inputText id="billingaddress8" value="#{registration.po.billingAddressLine8}"
                                                                 styleClass="textfield"
                                                                 size="40"
                                                                 maxlength="200"
                                                                 required="#{registration.requireBillingAddress8 and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}" >
                                                            <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="billingaddress8" style="color:red; display: inline-table"/>
                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddressProvince}:" rendered="#{registration.billingAddressProvince ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddressProvince ne null}"> 
                                                    <h:selectOneMenu id="billingaddress1province"
                                                                         value="#{registration.billingProvinceId}"
                                                                         valueChangeListener="#{registration.billingProvinceListener}"
                                                                         required="#{registration.requireBillingAddressProvince and registrationPoController.immediateCheck}"
                                                                         requiredMessage="#{msg.require}"
                                                                         styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registrationPoController.provinceList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="billingaddress1district, billingaddress1subdistrict, billingaddressPostal,previewBillingAddPanel3, previewBillingAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewBillingAdd3(registration)}"  />

                                                    </h:selectOneMenu>
                                                    <rich:message for="billingaddress1province" style="color:red; display: inline-table"/>
                                                </h:panelGroup>

                                                <h:outputText value="อำเภอ:" rendered="#{registration.billingAddressProvince ne null}"/>    
                                                <h:panelGroup rendered="#{registration.billingAddressProvince ne null}"> 
                                                    <h:selectOneMenu id="billingaddress1district"
                                                                    value="#{registration.billingDistrictId}"
                                                                    valueChangeListener="#{registration.billingDistrictListener}"
                                                                    required="#{registration.requireBillingAddressProvince and registrationPoController.immediateCheck}"
                                                                    requiredMessage="#{msg.require}"
                                                                    styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registration.billingDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="billingaddress1subdistrict, billingaddressPostal, previewBillingAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewBillingAdd2(registration)}"  />
                                                    </h:selectOneMenu>
                                                    <rich:message for="billingaddress1district" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="ตำบล:" rendered="#{registration.billingAddressProvince ne null}"/>    
                                                <h:panelGroup rendered="#{registration.billingAddressProvince ne null}"> 
                                                <h:selectOneMenu id="billingaddress1subdistrict"
                                                                value="#{registration.billingSubDistrictId}"
                                                                valueChangeListener="#{registration.billingSubDistrictListener}"
                                                                required="#{registration.requireBillingAddressProvince and registrationPoController.immediateCheck}"
                                                                requiredMessage="#{msg.require}"
                                                                styleClass="select07">
                                                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                        <f:selectItems value="#{registration.billingSubDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                                                        <rich:validator/>
                                                        <a4j:ajax event="change"
                                                                     queueId="regQueue"
                                                                     render="billingaddressPostal, previewBillingAddPanel2"
                                                                     limitRender="true"
                                                                     execute="@this"
                                                                     listener="#{registrationPoController.countPreviewBillingAdd2(registration)}"  />
                                                    </h:selectOneMenu>
                                                    <rich:message for="billingaddress1subdistrict" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="รหัสไปรษณีย์:" rendered="#{registration.billingAddressProvince ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddressProvince ne null}"> 
                                                    <h:inputText id="billingaddressPostal"
                                                                 value="#{registration.billingPostal}"
                                                                 required="#{registration.requireBillingAddressProvince and registrationPoController.immediateCheck}"
                                                                 requiredMessage="#{msg.require}"
                                                                 styleClass="textfield"
                                                                 size="20"
                                                                 maxlength="50">
                                                        <f:ajax execute="@this" event="change" />
                                                        <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="billingaddressPostal" style="color:red; display: inline-table"/>

                                                    <a4j:commandButton image="/img/b_search_small.png"   
                                                                       limitRender="true" execute="@this"
                                                                       render="billingaddress1province, billingaddress1district, billingaddress1subdistrict, billingaddressPostal, previewBillingAddPanel3, previewBillingAddPanel2, msgBillingPostal"
                                                                       actionListener="#{registrationPoController.searchZipCode(registration)}" >
                                                        <f:param name="selectedAddress" value="billing"/>
                                                    </a4j:commandButton>

                                                    <a4j:commandButton image="/img/b_clear_small.png" 
                                                                       limitRender="true" execute="@this"
                                                                       render="billingaddress1province, billingaddress1district, billingaddress1subdistrict, billingaddressPostal, previewBillingAddPanel3, previewBillingAddPanel2, msgBillingPostal"
                                                                       actionListener="#{registrationPoController.clearZipCode(registration)}" >
                                                        <f:param name="selectedAddress" value="billing"/>
                                                    </a4j:commandButton>

                                                    <h:outputText id="msgBillingPostal" value="#{registration.msgPostalCode}" style="color: red" />

                                                </h:panelGroup>  

                                                <h:outputText value="#{registration.billingAddressTelephone1}:" rendered="#{registration.billingAddressTelephone1 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddressTelephone1 ne null}"> 
                                                    <h:inputText id="billingaddressTelephone1" value="#{registration.po.billingTelephone1}"
                                                                     styleClass="textfield"
                                                                     size="20"
                                                                     maxlength="50"
                                                                     required="#{registration.requireBillingAddressTelephone1 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="billingaddressTelephone1" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 

                                                <h:outputText value="#{registration.billingAddressTelephone2}:" rendered="#{registration.billingAddressTelephone2 ne null}"/>
                                                <h:panelGroup rendered="#{registration.billingAddressTelephone2 ne null}"> 
                                                    <h:inputText id="billingaddressTelephone2" value="#{registration.po.billingTelephone2}"
                                                                     styleClass="textfield"
                                                                     size="20"
                                                                     maxlength="50"
                                                                     required="#{registration.requireBillingAddressTelephone2 and registrationPoController.immediateCheck}"
                                                                     requiredMessage="#{msg.require}" >
                                                                <rich:validator/>
                                                    </h:inputText>
                                                    <rich:message for="billingaddressTelephone2" style="color:red; display: inline-table"/>
                                                </h:panelGroup> 
                                            </h:panelGrid>           
                                            </td>
                                            <td valign="top" align="center" width="40%">
                                                <table width="80%" border="0" cellpadding="0" cellspacing="1" >
                                                    <tr>
                                                        <td class="gray03" align="left" height="30px" width="70px"><h:outputText value="Copy From: "/></td>
                                                        <td class="gray03" align="left">
                                                            <h:selectOneMenu id="billingCopyId" styleClass="select07" value="#{registrationPoController.billingCopyFrom}">
                                                                <f:selectItems value="#{registration.addrCopyForBilling}" />
                                                                <a4j:ajax event="change" queueId="regQueue" render="billingPanelAddr"
                                                                          limitRender="true" execute="@this"
                                                                          listener="#{registrationPoController.copyAddressToBilling(registration)}"/>
                                                            </h:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table width="80%" border="0" cellpadding="0" cellspacing="1" bgcolor="#dedfe0">
                                                <tr>
                                                    <td class="gray03" width="80%" style="height: 30px"><h:outputText value="Preview #{registration.billingAddress eq '' ? 'Billing Address' : registration.billingAddress}"/></td>
                                                </tr>
                                                <tr>
                                                    <td bgcolor="#FFFFFF"  valign="top" class="gray03">
                                                        <div  style="width:320px;padding:5px;overflow-wrap: break-word;overflow-style:panner;">
                                                        <h:panelGroup id="previewBillingAddPanel1" ><br/>
                                                            <h:outputText value="#{registration.previewBillingAdd1}"/>
                                                            <h:outputText style="color:#{registration.previewBillingAdd1.length() gt 100 ? 'red' : '#00D300'};" 
                                                                          value=" (#{registration.previewBillingAdd1.length()})" 
                                                                          rendered="#{registration.previewBillingAdd1.length() > 0}"/>
                                                        </h:panelGroup><br/><br/>
                                                        <h:panelGroup id="previewBillingAddPanel2" >
                                                            <h:outputText value="#{registration.previewBillingAdd2}"/>
                                                            <h:outputText style="color:#{registration.previewBillingAdd2.length() gt 100 ? 'red' : '#00D300'};" 
                                                                          value=" (#{registration.previewBillingAdd2.length()})" 
                                                                          rendered="#{registration.previewBillingAdd2.length() > 0}"/>  
                                                        </h:panelGroup><br/><br/>
                                                        <h:panelGroup id="previewBillingAddPanel3" >
                                                            <h:outputText value="#{registration.previewBillingAdd3}"/>
                                                            <h:outputText style="color:#{registration.previewBillingAdd3.length() gt 100 ? 'red' : '#00D300'};" 
                                                                          value=" (#{registration.previewBillingAdd3.length()})" 
                                                                          rendered="#{registration.previewBillingAdd3.length() > 0}"/>  
                                                        </h:panelGroup>
                                                        </div>
                                                    <br/><br/></td>
                                                </tr>
                                                </table>
                                            </td>                                        
                                        </tr>
                                        </table>
                                    </h:panelGroup>       
                                    <!-- END ADDRESS FORM -->
                                    </td>
                                </tr>
                            </table>
                        </a4j:repeat>
                    </td>
                </tr>
                <tr>
                    <td align="right" valign="bottom"><a href="#a2"><img src="#{request.contextPath}/icon/down.png" width="42" height="42"/></a></td>
                </tr>
            </table>
            </h:panelGroup>
        </td>
    </tr>
</table>
<!-- END: Customer Info Form -->

<h:panelGroup rendered="#{registrationPoController.product.registrationForm.qaForm ne null or registrationPoController.purchaseOrder.qaTransApproval ne null}">
<table width="1200" border="0" cellpadding="4" cellspacing="0" id="product2">
    <tr>
        <td bgcolor="#DBDD84" class="line01"><a name="a2" id="a2"/><div id="hproduct2"><h4 class="style3">Sale Approval</h4></div></td>
    </tr>
    <tr>
        <td style="padding-left:10%">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="100%" rowspan="2" valign="top">
                    <h:panelGroup id="qaForm">
                        <ui:include src="../../templates/qaform.xhtml" />
                    </h:panelGroup>
                </td>
                <td width="66" height="100" align="center" valign="top"><a href="#a1"><img src="#{request.contextPath}/icon/up.png" width="42" height="42"/>
                </a></td>
            </tr>
            <tr>
                <td align="center" valign="bottom"><a href="#a3"><img src="#{request.contextPath}/icon/down.png" width="42" height="42"/></a></td>
            </tr>
        </table>
        </td>
    </tr>
    <tr>
        <td></td>
    </tr>
</table>
</h:panelGroup>

<h:panelGroup id="childRegPanel" rendered="#{registrationPoController.childRegInfo.size() > 0}">
<table width="1200" border="0" cellpadding="4" cellspacing="0">
    <a4j:repeat value="#{registrationPoController.childRegType}" var="childRegType">
    <tr>
        <td colspan="2" bgcolor="#DBDD84" class="line01"><a name="a2" id="a2"/><div id="hproduct_childregtype"><h4 class="style3"><h:outputText value="#{childRegType.name}" /></h4></div></td>
    </tr>
    <tr>
        <td style="padding-left:10%">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <a4j:repeat value="#{registrationPoController.childRegInfo}" var="childRegistration">
                <h:panelGroup rendered="#{childRegistration.childRegForm.childRegType.name eq childRegType.name}">
                <tr>
                    <td class="line01" width="100%">
                        <h:selectBooleanCheckbox value="#{childRegistration.enable}" valueChangeListener="#{registrationPoController.childRegistrationFormListener}"
                                                 disabled="#{(childRegistration.childRegForm.required eq true)}">
                            <a4j:ajax event="click" render="childRegPanel" limitRender="true" />
                            <f:attribute name="formNo" value="#{childRegistration.no}" />
                        </h:selectBooleanCheckbox><span class="blue04"><h:outputText value="#{childRegistration.childRegForm.name}"/></span>

                        <h:panelGroup rendered="#{childRegistration.enable}">
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <a4j:repeat value="#{childRegistration.flexFields}" var="childRegFx">
                                <tr>
                                    <td align="right" valign="top" width="300" height="30">
                                        <h:outputText style="color:red" value="*" rendered="#{childRegFx.requireFlexField}"/>
                                        <h:outputText value="#{childRegFx.flexField}:" rendered="#{childRegFx.flexField ne null}"/>
                                    </td>
                                    <td valign="top" height="20">&#160;
                                        <h:panelGroup rendered="#{childRegFx.controlType eq msg.textFieldControl and childRegFx.flexField ne '%ผู้รับผลประโยชน์'}">
                                            <h:inputText id="childRegFxTextField" value="#{childRegFx.poFlexField}"
                                                         styleClass="textfield"
                                                         required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}"
                                                     onkeypress="#{(childRegFx.flexField eq 'อายุ' or childRegFx.flexField eq 'รหัสไปรษณีย์')? 'return isNumberKey(event)': 'return true'}">
                                                <f:ajax/>
                                                <rich:validator/>
                                            </h:inputText>
                                            <rich:message for="childRegFxTextField" style="color:red; display: inline-table" />
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{childRegFx.controlType eq msg.textFieldControl and childRegFx.flexField eq '%ผู้รับผลประโยชน์'}">
                                            <h:inputText id="childRegFxBeneficiary" value="#{childRegFx.poFlexField}"
                                                         styleClass="textfield" maxlength="6"
                                                         onkeypress="return isNumberFloatKey(event)"
                                                         required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}" >
                                                <f:convertNumber pattern="##0.00"/>
                                                <f:ajax />

                                            </h:inputText>
                                            <rich:message for="childRegFxBeneficiary" style="color:red; display: inline-table" />

                                            <h:inputText id="childRegValidate" style="display: none"
                                                         required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck and (registrationPoController.sumPercentBeneficiary(childRegType.id) ne 100)}"
                                                         requiredMessage="Percentage for all beneficiaries must also equal 100%">
                                                <rich:validator />
                                            </h:inputText>
                                            <rich:message for="childRegValidate" style="color:red; display: inline-table" />
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{childRegFx.controlType eq msg.textBoxControl}">
                                            <h:inputTextarea cols="30"  rows="5" id="childRegFxTextBox" value="#{childRegFx.poFlexField}"
                                                             required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck}"
                                                             requiredMessage="#{msg.require}" >
                                                <f:ajax />
                                                <rich:validator/>
                                            </h:inputTextarea>
                                            <rich:message for="childRegFxTextBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{childRegFx.controlType eq msg.comboBoxControl}">
                                            <h:selectOneMenu id="childRegFxComboBox" value="#{childRegFx.poFlexField}"
                                                             required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck}"
                                                             requiredMessage="#{msg.require}">
                                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                                <f:selectItems value="#{childRegFx.itemList}"/>
                                                <f:ajax />
                                                <rich:validator/>
                                            </h:selectOneMenu>
                                            <rich:message for="childRegFxComboBox" style="color:red; display: inline-table" />
                                        </h:panelGroup>

                                        <h:panelGroup id="childRegCheckboxPanel" rendered="#{childRegFx.controlType eq 'radio' or childRegFx.controlType eq 'checkbox'}">
                                            <a4j:repeat value="#{childRegFx.itemList}" var="item">
                                                <h:panelGroup rendered="#{item.label.contains('|') and childRegistration.childRegForm.code ne 'tax'}">
                                                    <c:set var="label" value="${fn:split(item.label,'|')}" />
                                                    <h:selectBooleanCheckbox value="#{item.disabled}"
                                                                             valueChangeListener="#{registrationPoController.childRegFieldListener}">
                                                        <a4j:ajax event="click" render="childRegCheckboxPanel" limitRender="true" />
                                                        <f:attribute name="formNo" value="#{childRegistration.no}" />
                                                        <f:attribute name="fieldNo" value="#{childRegFx.no}" />
                                                        <f:attribute name="itemNo" value="#{childRegFx.itemList.indexOf(item)+1}" />
                                                    </h:selectBooleanCheckbox>
                                                    <h:outputText value="${label[0]}"/>&#160;
                                                    <h:outputText value="${label[1]}"/>&#160;
                                                    <h:inputText styleClass="textfield"
                                                                 value="#{item.description}">
                                                        <f:ajax />
                                                        <rich:validator/>
                                                    </h:inputText>
                                                </h:panelGroup>
                                                <!--hard code-->
                                                <h:panelGroup rendered="#{item.label.contains('|') and childRegistration.childRegForm.code eq 'tax'}">
                                                    <c:set var="label" value="${fn:split(item.label,'|')}" />
                                                    <h:selectBooleanCheckbox value="#{item.disabled}"
                                                                             valueChangeListener="#{registrationPoController.childRegFieldListener}">
                                                        <a4j:ajax event="click" render="childRegCheckboxPanel" limitRender="true" />
                                                        <f:attribute name="formNo" value="#{childRegistration.no}" />
                                                        <f:attribute name="fieldNo" value="#{childRegFx.no}" />
                                                        <f:attribute name="itemNo" value="#{childRegFx.itemList.indexOf(item)+1}" />
                                                    </h:selectBooleanCheckbox>
                                                    <h:outputText value="${label[0]}"/>&#160;
                                                    <h:outputText value="${label[1]}"/>&#160;
                                                    <h:inputText styleClass="textfield"
                                                                 value="#{item.description}"
                                                                 onkeypress="return isNumberFloatKey(event)" maxlength="13"
                                                            >
                                                        <f:ajax />
                                                    </h:inputText>
                                                </h:panelGroup>
                                                <!---->
                                                <h:panelGroup rendered="#{not item.label.contains('|')}">
                                                    <h:selectBooleanCheckbox value="#{item.disabled}"
                                                                             valueChangeListener="#{registrationPoController.childRegFieldListener}">
                                                        <a4j:ajax event="click" render="childRegCheckboxPanel" limitRender="true" />
                                                        <f:attribute name="formNo" value="#{childRegistration.no}" />
                                                        <f:attribute name="fieldNo" value="#{childRegFx.no}" />
                                                        <f:attribute name="itemNo" value="#{childRegFx.itemList.indexOf(item)+1}" />
                                                    </h:selectBooleanCheckbox> <h:outputText value="#{item.label}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{childRegFx.itemList.indexOf(item) + 1 eq childRegFx.itemList.size()}">
                                                    <h:inputText id="childRegRequire" style="display: none"
                                                                 required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck and childRegFx.isEmptyCheckboxControl(childRegistration.childRegForm,childRegFx)}"
                                                                 requiredMessage="#{msg.require}">
                                                        <rich:validator />
                                                    </h:inputText>
                                                    <rich:message for="childRegRequire" style="color:red; display: inline-table" />
                                                </h:panelGroup>
                                                <br/>&#160;
                                            </a4j:repeat>
                                        </h:panelGroup>

                                        <h:panelGroup id="childRegCalendarPanel" rendered="#{childRegFx.controlType eq 'calendar'}">
                                            <c:set var="childRegFormNo" value="${childRegistration.no}" />
                                            <c:set var="childRegFieldNo" value="${childRegFx.no}" />
                                            <c:set var="childRegDateId" value="childregdatepicker_${childRegFormNo}_${childRegFieldNo}" />
                                            <input type="text" id="${childRegDateId}" class="childregdatepicker" readonly="readonly" value="#{registrationPoController.convertThaiStrDate(childRegFx.poFlexField)}" onchange="childRegDateChange(${childRegFormNo}, ${childRegFieldNo}, this.value)"/>
                                            <h:inputText id="childRegFxCalendar" style="display: none"
                                                         required="#{childRegFx.requireFlexField and registrationPoController.immediateCheck and (childRegFx.poFlexField eq null or childRegFx.poFlexField.trim() eq '')}"
                                                         requiredMessage="#{msg.require}" >
                                                <rich:validator />
                                            </h:inputText>
                                            <rich:message for="childRegFxCalendar" style="color:red; display: inline-table" />
                                        </h:panelGroup>

                                    </td>
                                </tr>
                                </a4j:repeat>
                            </table>
                        </h:panelGroup>
                    </td>
                </tr>
                </h:panelGroup>
                </a4j:repeat>

                <a4j:jsFunction name="childRegDateChange" limitRender="true" execute="@this"
                                actionListener="#{registrationPoController.childRegDateListener}">
                    <a4j:param name="formNo" />
                    <a4j:param name="fieldNo" />
                    <a4j:param name="date" />
                </a4j:jsFunction>

                <script>
                    $(".childregdatepicker").datepicker($.datepicker.regional["th"]);
                    if ($(".childregdatepicker").datepicker("getDate") === null) {
                        $(".childregdatepicker").datepicker("option", "defaultDate", new Date());
                    }
                </script>

            </table>
        </td>
        <td align="right" valign="top" width="42"><a href="#a2"><img src="#{request.contextPath}/icon/up.png" width="42"/></a></td>
    </tr>
    <tr>
        <td colspan="2" align="right" valign="bottom"><a href="#a3"><img src="#{request.contextPath}/icon/down.png" width="42" height="42"/></a></td>
    </tr>
    </a4j:repeat>
</table>
</h:panelGroup>

<h:panelGroup id="declarationPanel" rendered="#{registrationPoController.declarInfo.size() > 0}">
<table width="1200" border="0" cellpadding="4" cellspacing="0" id="product_declaration">
    <tr>
        <td colspan="2" bgcolor="#DBDD84" class="line01"><a name="a2" id="a2"/><div id="hproduct_declaration"><h4 class="style3">Declaration</h4></div></td>
    </tr>
    <tr>
        <td style="padding-left:10%">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <a4j:repeat value="#{registrationPoController.declarInfo}" var="declaration">              
                <tr>
                    <td class="line01" width="100%">
                        <h:selectBooleanCheckbox value="#{declaration.declarationEnable}" valueChangeListener="#{registrationPoController.declarationFormListener}">
                            <a4j:ajax event="click" render="declarationPanel" limitRender="true" />
                            <f:attribute name="formNo" value="#{declaration.declarationNo}" />
                        </h:selectBooleanCheckbox><span class="blue04"><h:outputText value="#{declaration.declarationForm.name}"/></span>
                        <h:panelGroup rendered="#{declaration.declarationEnable}">
                            <a4j:jsFunction name="declarationDateChange" limitRender="true" execute="@this"
                                            actionListener="#{registrationPoController.declarationDateListener}">
                                <a4j:param name="formNo" />
                                <a4j:param name="fieldNo" />
                                <a4j:param name="date" />
                            </a4j:jsFunction>
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <a4j:repeat value="#{declaration.flexFields}" var="declarationFx">
                                <tr>
                                    <td align="right" valign="top" width="300" height="30">
                                        <h:outputText style="color:red" value="*" rendered="#{declarationFx.requireFlexField}"/>
                                        <h:outputText value="#{declarationFx.flexField}:" rendered="#{declarationFx.flexField ne null}"/>
                                    </td>
                                    <td valign="top" height="20">&#160;
                                    <h:panelGroup rendered="#{declarationFx.controlType eq msg.textFieldControl}">
                                        <h:inputText id="declarationFxTextField" value="#{declarationFx.poFlexField}"
                                                     styleClass="textfield"
                                                     required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}" >
                                            <f:ajax />
                                            <rich:validator/>
                                        </h:inputText>       
                                        <rich:message for="declarationFxTextField" style="color:red; display: inline-table" />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{declarationFx.controlType eq msg.textBoxControl}">
                                        <h:inputTextarea cols="30"  rows="5" id="declarationFxTextBox" value="#{declarationFx.poFlexField}" 
                                                        required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck}"
                                                        requiredMessage="#{msg.require}" >
                                            <f:ajax />
                                            <rich:validator/>
                                        </h:inputTextarea>       
                                        <rich:message for="declarationFxTextBox" style="color:red; display: inline-table" />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{declarationFx.controlType eq msg.calendarControl}">
                                        <ui:remove>
                                        <rich:calendar id="declarationFxCalendar" value="#{declarationFx.poFlexField}"
                                           inputClass="textfield" inputSize="25"  buttonClass="rfcalbtn"
                                           datePattern="dd/MM/yyyy HH:mm"
                                           locale="#{msg.localeTh}"
                                           required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck}"
                                           requiredMessage="#{msg.require}"
                                           todayControlMode="hidden" 
                                           timeZone="#{registrationPoController.defaultTimeZone}"> 
                                           <f:converter converterId="DateStringConverter"/>
                                        </rich:calendar>
                                        <rich:message for="declarationFxCalendar" style="color:red; display: inline-table" />
                                        </ui:remove>                       
                                        <c:set var="declarationFormNo" value="${declaration.declarationNo}" />
                                        <c:set var="declarationFieldNo" value="${declarationFx.no}" />
                                        <c:set var="declarationDateId" value="declarationdatepicker_${declarationFormNo}_${declarationFieldNo}" />
                                        <input type="text" id="${declarationDateId}" class="declarationdatepicker" readonly="readonly" value="#{declarationFx.poFlexField}" onchange="declarationDateChange(${declarationFormNo}, ${declarationFieldNo}, this.value)"/>
                                        <h:inputText id="declarationFxCalendar" style="display: none"

                                                     required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck and declarationFx.poFlexField.isEmpty()}"
                                                     requiredMessage="#{msg.require}">
                                            <rich:validator />
                                        </h:inputText>
                                        <rich:message for="declarationFxCalendar" style="color:red; display: inline-table" />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{declarationFx.controlType eq msg.comboBoxControl}">
                                        <h:selectOneMenu id="declarationFxComboBox" value="#{declarationFx.poFlexField}"
                                                         required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck}"
                                                         requiredMessage="#{msg.require}">
                                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                            <f:selectItems value="#{declarationFx.itemList}"/>
                                            <f:ajax />
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message for="declarationFxComboBox" style="color:red; display: inline-table" />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{declarationFx.controlType eq msg.suggestionBoxControl}">
                                        <rich:select id="declarationFxSuggestionBox"
                                                     defaultLabel="#{msg.pleaseSelect}"
                                                     value="#{declarationFx.poFlexField}"
                                                     required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck}"
                                                     requiredMessage="#{msg.require}">
                                            <f:selectItems value="#{declarationFx.itemList}"/>
                                            <f:ajax />
                                            <rich:validator/>
                                        </rich:select>
                                        <rich:message for="declarationFxSuggestionBox" style="color:red; display: inline-table" />
                                    </h:panelGroup>                                  
                                    <h:panelGroup id="declarationCheckboxPanel" rendered="#{declarationFx.controlType eq 'radio' or declarationFx.controlType eq 'checkbox'}">
                                        <a4j:repeat value="#{declarationFx.itemList}" var="item">
                                            <h:panelGroup rendered="#{item.label.contains('|')}">
                                                <c:set var="label" value="${fn:split(item.label,'|')}" />
                                                <h:selectBooleanCheckbox value="#{item.disabled}"
                                                                         valueChangeListener="#{registrationPoController.declarationFieldListener}">
                                                    <a4j:ajax event="click" render="declarationCheckboxPanel" limitRender="true" />
                                                    <f:attribute name="formNo" value="#{declaration.declarationNo}" />
                                                    <f:attribute name="fieldNo" value="#{declarationFx.no}" />
                                                    <f:attribute name="itemNo" value="#{declarationFx.itemList.indexOf(item)+1}" />
                                                </h:selectBooleanCheckbox>
                                                <h:outputText value="${label[0]}"/>&#160;
                                                <h:outputText value="${label[1]}"/>&#160;
                                                <h:inputText styleClass="textfield"
                                                             value="#{item.description}">
                                                    <f:ajax />
                                                    <rich:validator/>
                                                </h:inputText>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{not item.label.contains('|')}">
                                                <h:selectBooleanCheckbox value="#{item.disabled}" 
                                                                         valueChangeListener="#{registrationPoController.declarationFieldListener}">
                                                    <a4j:ajax event="click" render="declarationCheckboxPanel" limitRender="true" />
                                                    <f:attribute name="formNo" value="#{declaration.declarationNo}" />
                                                    <f:attribute name="fieldNo" value="#{declarationFx.no}" />
                                                    <f:attribute name="itemNo" value="#{declarationFx.itemList.indexOf(item)+1}" />
                                                </h:selectBooleanCheckbox> <h:outputText value="#{item.label}"/>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{declarationFx.itemList.indexOf(item) + 1 eq declarationFx.itemList.size()}">
                                                <h:inputText id="declarationRequire" style="display: none"
                                                             required="#{declarationFx.requireFlexField and registrationPoController.immediateCheck and declarationFx.isEmptyCheckboxControl(declarationFx.itemList)}"
                                                             requiredMessage="#{msg.require}">
                                                    <rich:validator />
                                                </h:inputText>
                                                <rich:message for="declarationRequire" style="color:red; display: inline-table" />
                                            </h:panelGroup>
                                            <br/>&#160;
                                        </a4j:repeat>
                                    </h:panelGroup>
                                    </td>
                                </tr>
                                </a4j:repeat>
                            </table>
                            <script>
                                $(".declarationdatepicker").datepicker($.datepicker.regional["th"]);
                                if ($(".declarationdatepicker").datepicker("getDate") === null) {
                                    $(".declarationdatepicker").datepicker("option", "defaultDate", new Date());
                                }
                            </script>
                        </h:panelGroup>
                    </td>
                </tr> 
                </a4j:repeat>
                <ui:remove>
                <tr>
                    <td colspan="2" align="center" valign="bottom"><a href="#a3"><img src="#{request.contextPath}/icon/down.png" width="42" height="42"/></a></td>
                </tr>
                </ui:remove>
            </table>
        </td>
        <td align="right" valign="top" width="42"><a href="#a2"><img src="#{request.contextPath}/icon/up.png" width="42"/></a></td>
    </tr>
    <tr>
        <td colspan="2" align="right" valign="bottom"><a href="#a3"><img src="#{request.contextPath}/icon/down.png" width="42" height="42"/></a></td>
    </tr>
</table>
</h:panelGroup>

<h:panelGroup id="paymentPanel">
<table width="1200" border="0" cellpadding="4" cellspacing="0" id="product3">
    <tr>
        <td bgcolor="#F4CDCD" class="line01"><div id="hproduct3">
                <h4><span class="style4">Payment Information</span><a name="a3" id="a"></a></h4>
            </div></td>
    </tr>
</table><br/><br/>
<h:panelGroup rendered="#{registrationPoController.enableReferenceNo}">
    <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250"><b><h:outputText value="Reference No. :" rendered="#{registrationPoController.enableReferenceNo}"/></b></td>
            <td>
                <h:inputText value="#{registrationPoController.purchaseOrder.refNo2}"
                                id="refNo2"
                                styleClass="textfield"
                                required="#{registrationPoController.immediateCheck}"
                                requiredMessage="#{msg.require}" rendered="#{registrationPoController.enableReferenceNo}">
                </h:inputText>
                <rich:message for="refNo2" style="color:red; display: inline-table" rendered="#{registrationPoController.enableTraceNo}" />
            </td>
        </tr>
    </table>
</h:panelGroup>
<table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="" width="250"><b>Payment Method :</b></td>
            <td valign="top">
                <!-- Payment Method Version 1 -->
                <h:selectOneMenu id="pmMethod" value="#{registrationPoController.purchaseOrder.paymentMethod}"
                                 required="#{registrationPoController.immediateCheck}"
                                 valueChangeListener="#{registrationPoController.paymentMethodValueChangeListener}" 
                                 requiredMessage="#{msg.require}" rendered="#{registrationPoController.productPaymentMethodCastorList eq null}">
                    <f:selectItem itemLabel="Select" itemValue="#{null}"/>
                    <f:selectItem itemLabel="Credit Card" itemValue="1" itemDisabled="#{not registrationPoController.product.paymentMethod.contains('1')}"/>
                    <f:selectItem itemLabel="Cash" itemValue="2" itemDisabled="#{not registrationPoController.product.paymentMethod.contains('2')}"/>
                    <f:selectItem itemLabel="Bank Transfer" itemValue="3" itemDisabled="#{not registrationPoController.product.paymentMethod.contains('3')}"/>
                    <a4j:ajax event="change" queueId="regQueue" render="pgPaymentMethod,panelPrice,panelPrice2,BTcreditCardUsage,BTdebitCardUsage" limitRender="true" execute="@this"/>
                </h:selectOneMenu>
                <rich:message for="pmMethod" style="color:red; display: inline-table" rendered="#{registrationPoController.productPaymentMethodCastorList eq null}" />

                <!-- Payment Method Version 2 -->
                <h:selectOneMenu id="pmMethod2" value="#{registrationPoController.purchaseOrder.paymentMethod}"
                                 required="#{registrationPoController.immediateCheck}"
                                 valueChangeListener="#{registrationPoController.paymentMethodValueChangeListener}"
                                 requiredMessage="#{msg.require}" rendered="#{registrationPoController.productPaymentMethodCastorList ne null}">
                    <f:selectItem itemLabel="Select" itemValue="#{null}"/>
                    <f:selectItems value="#{registrationPoController.productPaymentMethodList}" 
                                   var="pml" itemLabel="#{pml.name}" itemValue="#{pml.id}" itemDisabled="#{not (pml.enable or pml.status)}" />
                    <a4j:ajax event="change" queueId="regQueue" render="pgPaymentMethod,panelPrice,panelPrice2,BTcreditCardUsage,BTdebitCardUsage" 
                              limitRender="true" execute="@this"/>
                </h:selectOneMenu>
                <rich:message for="pmMethod2" style="color:red; display: inline-table" rendered="#{registrationPoController.productPaymentMethodCastorList ne null}" />
                
            </td>
        </tr>
        <tr>
            <td  colspan="2" style="padding-left:18%;">
                <h:panelGrid id="panelPrice2" columns="6" cellpadding="3"
                             style="border:1px solid black;" 
                             columnClasses="colPrice1, colPrice2, colPrice1, colPrice2, colPrice1, colPrice2" rendered="#{registrationPoController.productFlexField1 ne 'VMI' and registrationPoController.productFlexField1 ne 'CMI'}">
                <h:outputText value="#{msg.price} :"/>
                <h:outputText  value="#{registrationPoController.price}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputText>
                    
                <h:outputText value="#{msg.stampDuty} :"/>
                <h:outputText value="#{registrationPoController.stampDuty}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputText>
                    
                <h:outputText value="#{msg.vat} :"/>
                <h:outputText value="#{registrationPoController.vat}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputText>
                    
                <h:outputText value="#{msg.netPremium} :"/>
                <h:outputText value="#{registrationPoController.netPremium}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputText>
                    
                <h:outputText value="#{msg.totalPrice} :"/>
                    <h:outputText value="#{registrationPoController.totalPrice}" rendered="#{registrationPoController.totalPrice gt 0 }">
                        <f:convertNumber pattern="#,##0.00"/>
                    </h:outputText>
                    <h:outputText value="-  " rendered="#{registrationPoController.totalPrice le 0 }"/>
                
                <h:outputText value="Sum Insured :"/>
                <h:outputText value="#{registrationPoController.productPlan.sumInsured}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputText>
                </h:panelGrid>        
            </td>
        </tr>
</table>
<h:panelGroup id="pgPaymentMethod">
    
    <h:panelGroup rendered="#{registrationPoController.showCreditCardInfo}">
    <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250">Card No. :</td>
            <td valign="top">
            <h:inputText id="cardno1" label="#{msg.cardNo}" 
                         maxlength="4" style="width: 45px"
                         value="#{registrationPoController.cardNo1}"
                         required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}"
                         onkeypress="return isNumberKey(event)"
                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('cardno2')}.focus()}">
                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkCardNo}" 
                          execute="@this" render="cardno1,msgCardno1,msgCardno,cardIssuer,cardType" limitRender="true"/>
            </h:inputText><rich:message id="msgCardno1" for="cardno1" style="color:red; display: inline-table"/>

            <h:inputText id="cardno2" label="#{msg.cardNo}"
                         maxlength="4" style="width: 45px"
                         value="#{registrationPoController.cardNo2}"
                         required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}"
                         onkeypress="return isNumberKey(event)"
                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('cardno3')}.focus()}">
                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkCardNo}" 
                          execute="@this" render="cardno2,msgCardno2,msgCardno,cardIssuer,cardType" limitRender="true"/>
            </h:inputText><rich:message id="msgCardno2" for="cardno2" style="color:red; display: inline-table"/>

            <h:inputText id="cardno3" label="#{msg.cardNo}" 
                         maxlength="4" style="width: 45px"
                         value="#{registrationPoController.cardNo3}"
                         required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}"
                         onkeypress="return isNumberKey(event)"
                         onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('cardno4')}.focus()}">
                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkCardNo}" 
                          execute="@this" render="cardno3,msgCardno3,msgCardno,cardIssuer,cardType" limitRender="true"/>
            </h:inputText><rich:message id="msgCardno3" for="cardno3" style="color:red; display: inline-table"/>

            <h:inputText id="cardno4" label="#{msg.cardNo}"
                         maxlength="4" style="width: 45px"
                         value="#{registrationPoController.cardNo4}"
                         required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}"
                         onkeypress="return isNumberKey(event)">
                <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkCardNo}" 
                          execute="@this" render="cardno4,msgCardno4,msgCardno,cardIssuer,cardType" limitRender="true"/>
            </h:inputText><rich:message id="msgCardno4" for="cardno4" style="color:red; display: inline-table"/>
            <h:outputText id="msgCardno" style="color:red; display: inline-table" value="#{registrationPoController.messageCardno}"/>
            <a4j:commandButton id="BTcreditCardUsage" image="/resources/img/b_creditcard_usage.png" style="padding-left:10px;"
                               rendered="#{(registrationPoController.paymentMethod != null and registrationPoController.paymentMethod.creditcard) and registrationPoController.enableTraceNo}" 
                               actionListener="#{registrationPoController.retrieveCreditCardUsage}"
                               oncomplete="if(#{(registrationPoController.cardNo.length() eq 16) and (registrationPoController.messageCardno == null or (registrationPoController.messageCardno != null and registrationPoController.messageCardno eq ''))}){#{rich:component('creditUsage')}.show();}else{alert('Please input valid Card Number');}"
                               execute="@this" limitRender="true"
                               render="creditCardUsageList,creditUsagePanel"> 
            </a4j:commandButton>
            <a4j:commandButton id="BTdebitCardUsage" image="/resources/img/b_debitcard_usage.png" style="padding-left:10px;"
                               rendered="#{(registrationPoController.paymentMethod != null and registrationPoController.paymentMethod.debitcard) and registrationPoController.enableTraceNo}" 
                               actionListener="#{registrationPoController.retrieveCreditCardUsage}"
                               oncomplete="if(#{(registrationPoController.cardNo.length() eq 16) and (registrationPoController.messageCardno == null or (registrationPoController.messageCardno != null and registrationPoController.messageCardno eq ''))}){#{rich:component('creditUsage')}.show();}else{alert('Please input valid Card Number');}"
                               execute="@this" limitRender="true"
                               render="creditCardUsageList,creditUsagePanel"> 
            </a4j:commandButton>
            </td>
        </tr> 
        <tr>
            <td align="right">Card Issuer :</td>
            <td>
                <h:selectOneMenu value="#{registrationPoController.bankId}"
                                 id="cardIssuer" required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}">
                    <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                    <f:selectItems value="#{registrationPoController.bankList}" var="list" itemValue="#{list.id}" itemLabel="#{list.name}"/>
                    <rich:validator/>
                </h:selectOneMenu>  
                <rich:message for="cardIssuer" style="color:red; display: inline-table"/>
            </td>
        </tr>
        <tr>
            <td align="right">Card Holder Name :</td>
            <td>
                <h:inputText value="#{registrationPoController.purchaseOrder.cardHolderName}"
                                id="cardHolderName"
                                required="#{registrationPoController.immediateCheck}"
                                requiredMessage="#{msg.require}"
                                styleClass="textfield">
                    <rich:validator/>
                </h:inputText>
                <rich:message for="cardHolderName" style="color:red; display: inline-table"/>
            </td>
        </tr>             
        <tr>
            <td align="right">Card Type :</td>
            <td>
                <h:outputText id="cardType" value="#{registrationPoController.purchaseOrder.cardType}"/>
            </td>
        </tr>
        <tr>
            <td align="right">Expiry Date (MM/YYYY) :</td>
            <td>
                <ui:remove>
                <h:inputText value="#{registrationPoController.purchaseOrder.cardExpiryMonth}"
                                id="cardExpiryMonth"
                                size="2" 
                                maxlength="2" 
                                required="#{registrationPoController.immediateCheck}" 
                                requiredMessage="#{msg.require}"
                                styleClass="textfield">
                    <rich:validator/>
                </h:inputText>
                </ui:remove>
                <h:selectOneMenu value="#{registrationPoController.purchaseOrder.cardExpiryMonth}"
                                id="cardExpiryMonth"
                                required="#{registrationPoController.immediateCheck}" 
                                requiredMessage="#{msg.require}">
                    <f:selectItem itemLabel="Select"/>
                    <f:selectItem itemLabel="01" itemValue="1"/>
                    <f:selectItem itemLabel="02" itemValue="2"/>
                    <f:selectItem itemLabel="03" itemValue="3"/>
                    <f:selectItem itemLabel="04" itemValue="4"/>
                    <f:selectItem itemLabel="05" itemValue="5"/>
                    <f:selectItem itemLabel="06" itemValue="6"/>
                    <f:selectItem itemLabel="07" itemValue="7"/>
                    <f:selectItem itemLabel="08" itemValue="8"/>
                    <f:selectItem itemLabel="09" itemValue="9"/>
                    <f:selectItem itemLabel="10" itemValue="10"/>
                    <f:selectItem itemLabel="11" itemValue="11"/>
                    <f:selectItem itemLabel="12" itemValue="12"/>

                    <rich:validator/>
                </h:selectOneMenu>
                <rich:message for="cardExpiryMonth" style="color:red; display: inline-table"/> / 

                <h:selectOneMenu value="#{registrationPoController.purchaseOrder.cardExpiryYear}" 
                                id="cardExpiryYear"
                                required="#{registrationPoController.immediateCheck}" 
                                requiredMessage="#{msg.require}">
                    <f:selectItem itemLabel="Select"/>
                    <f:selectItem itemLabel="2016" itemValue="16"/>
                    <f:selectItem itemLabel="2017" itemValue="17"/>
                    <f:selectItem itemLabel="2018" itemValue="18"/>
                    <f:selectItem itemLabel="2019" itemValue="19"/>
                    <f:selectItem itemLabel="2020" itemValue="20"/>
                    <f:selectItem itemLabel="2021" itemValue="21"/>
                    <f:selectItem itemLabel="2022" itemValue="22"/>
                    <f:selectItem itemLabel="2023" itemValue="23"/>
                    <f:selectItem itemLabel="2024" itemValue="24"/>
                    <f:selectItem itemLabel="2025" itemValue="25"/>
                    <f:selectItem itemLabel="2026" itemValue="26"/>
                    <f:selectItem itemLabel="2027" itemValue="27"/>
                    <f:selectItem itemLabel="2028" itemValue="28"/>
                    <f:selectItem itemLabel="2029" itemValue="29"/>
                    <f:selectItem itemLabel="2030" itemValue="30"/>
                    <f:selectItem itemLabel="2031" itemValue="31"/>
                    <f:selectItem itemLabel="2032" itemValue="32"/>
                    <rich:validator/>
                </h:selectOneMenu>

                <rich:message for="cardExpiryYear" style="color:red; display: inline-table"/>
            </td>
        </tr>
    </table>
    </h:panelGroup>
    <h:panelGroup id="cashpanel" rendered="#{registrationPoController.purchaseOrder.paymentMethod eq '2' and (registrationPoController.productFlexField1 eq 'VMI' or registrationPoController.productFlexField1 eq 'CMI')}">
        <table width="100%" border="0" cellspacing="0" cellpadding="3">
            <tr>
                <td align="right" valign="top" width="250">Channel Cash Type :</td>
                <td valign="top">
                    <h:selectOneMenu value="#{registrationPoController.channelCashType}"
                                     id="channelcashtype" required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}"
                    >
                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                        <f:selectItem itemValue="1" itemLabel="Over The Counter"/>
                        <f:selectItem itemValue="2" itemLabel="Bank Channel"/>
                        <f:ajax event="change" execute="@this" render="cashpanel" listener="#{registrationPoController.changeChannelCashType}" ></f:ajax>
                        <rich:validator/>
                    </h:selectOneMenu>
                    <rich:message for="channelcashtype" style="color:red; display: inline-table"/>
                </td>
            </tr>
            <tr>
                <td align="right"><h:panelGroup id="channelcashcodetxt" rendered="#{registrationPoController.channelCashType eq '2'}">
                    <h:outputText value="Channel Code :"></h:outputText></h:panelGroup></td>
                <td>
                    <h:panelGroup id="channelcodepanel" rendered="#{registrationPoController.channelCashType eq '2'}">
                        <h:selectOneMenu value="#{registrationPoController.channelCashCode}"
                                         id="channelcode1" required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.channelCashCodeMap}"/>
                            <rich:validator/>
                        </h:selectOneMenu>
                        <rich:message for="channelcode1" style="color:red; display: inline-table"/>
                    </h:panelGroup>
                </td>
            </tr>
            <tr>
                <td align="right">Agent Code :</td>
                <td>
                    <h:selectOneMenu value="#{registrationPoController.agentCashCode}"
                                     id="agentcashcode" required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}">
                        <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                        <f:selectItems value="#{registrationPoController.agentCashCodeMap}"/>
                        <rich:validator/>
                    </h:selectOneMenu>
                    <rich:message for="agentcashcode" style="color:red; display: inline-table"/>
                </td>
            </tr>
        </table>
    </h:panelGroup>
    <h:panelGroup rendered="#{registrationPoController.showBankTransferInfo}">
        <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250">เลขที่บัญชี :</td>
            <td valign="top">
                <h:inputText value="#{registrationPoController.purchaseOrder.bankAccountNo}"
                                id="bankAccountNo"
                                required="#{registrationPoController.immediateCheck}"
                                requiredMessage="#{msg.require}"
                                styleClass="textfield">
                    <rich:validator/>
                </h:inputText>
                <rich:message for="accountNo" style="color:red; display: inline-table"/>
            </td>
        </tr> 
        <tr>
            <td align="right" valign="top" width="250">ธนาคาร :</td>
            <td valign="top">
                <h:selectOneMenu value="#{registrationPoController.bankId}"
                                 id="accountBankId" required="#{registrationPoController.immediateCheck}" requiredMessage="#{msg.require}">
                    <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                    <f:selectItems value="#{registrationPoController.bankList}" var="list" itemValue="#{list.id}" itemLabel="#{list.name}"/>
                    <rich:validator/>
                </h:selectOneMenu>  
                <rich:message for="accountBankId" style="color:red; display: inline-table"/>
            </td> 
        </tr> 
        </table>
    </h:panelGroup>
    <h:panelGroup rendered="#{registrationPoController.enableTraceNo and registrationPoController.productFlexField1 ne 'VMI' and registrationPoController.productFlexField1 ne 'CMI'}">
        <table width="100%" border="0" cellspacing="0" cellpadding="3">
            <tr>
                <td align="right" valign="top" width="250"><h:outputText value="Trace No. :" rendered="#{registrationPoController.enableTraceNo}"/></td>
                <td>
                    <h:inputText value="#{registrationPoController.purchaseOrder.traceNo}"
                                    id="traceNo"
                                    styleClass="textfield"
                                    rendered="#{registrationPoController.enableTraceNo}"
                                    disabled="#{registrationPoController.purchaseOrder.settlement}">
                        <rich:validator />
                    </h:inputText>
                </td>
            </tr>         
            <tr>
                <td align="right"><h:outputText value="Paid Date :" rendered="#{registrationPoController.enableTraceNo}"/></td>
                <td>
                    <ui:remove>
                    <rich:calendar value="#{registrationPoController.purchaseOrder.paidDate}"
                                   locale="#{msg.locale}"
                                   timeZone="#{registrationPoController.defaultTimeZone}"
                                   popup="true"
                                   datePattern="#{msg.dateTimePattern}"
                                   inputClass="textfield" inputSize="20" buttonClass="rfcalbtn"
                                   resetTimeOnDateSelect="false"
                                   defaultTime="12:00"
                                   rendered="#{registrationPoController.enableTraceNo}"
                                   disabled="#{registrationPoController.purchaseOrder.settlement}"/>
                    </ui:remove>
                    <a4j:jsFunction name="paidDateChange"
                            limitRender="true" execute="@this"
                            actionListener="#{registrationPoController.paidDateListener}">
                    <a4j:param name="paiddate" />
                    </a4j:jsFunction>
                    <input type="text" id="paiddatepicker" name="paiddate" readonly="readonly" value="#{registrationPoController.convertThaiDate(registrationPoController.purchaseOrder.paidDate)}" onchange="paidDateChange(this.value)" />
                    <script>
                        $("#paiddatepicker").datepicker($.datepicker.regional["th"]);
                        if ($("#paiddatepicker").datepicker("getDate") === null) {
                            $("#paiddatepicker").datepicker("option", "defaultDate", new Date());
                        }
                    </script>
                </td>
            </tr>
        </table>
    </h:panelGroup>
    <h:panelGroup rendered="#{registrationPoController.paymentMethod.accountNo gt 0}">
        <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250">
                <h:outputText style="color:red" value="*" rendered="#{registrationPoController.paymentMethod.accountNo eq 2}"/>
                Account No :
            </td>
            <td valign="top">
                <h:inputText value="#{registrationPoController.purchaseOrder.paymentAccountNo}"
                                id="paymentAccountNo"
                                required="#{registrationPoController.paymentMethod.accountNo eq 2 and registrationPoController.immediateCheck}"
                                requiredMessage="#{msg.require}"
                                styleClass="textfield">
                    <rich:validator/>
                </h:inputText>
                <rich:message for="paymentAccountNo" style="color:red; display: inline-table"/>
            </td>
        </tr> 
        </table>
    </h:panelGroup>
    <h:panelGroup rendered="#{registrationPoController.paymentMethod.expectedDate gt 0}">
        <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250">
                <h:outputText style="color:red" value="*" rendered="#{registrationPoController.paymentMethod.expectedDate eq 2}"/>
                Billing Date :
            </td>
            <td valign="top">
                <a4j:jsFunction name="paymentExpectedDateChange"
                        limitRender="true" execute="@this"
                        actionListener="#{registrationPoController.paymentExpectedDateListener}">
                <a4j:param name="expecteddate" />
                </a4j:jsFunction>
                <input type="text" id="paymentexpecteddatepicker" name="paymentexpecteddate" readonly="readonly" value="#{registrationPoController.convertThaiDate(registrationPoController.purchaseOrder.paymentExpectedDate)}" onchange="paymentExpectedDateChange(this.value)" />
                <script>
                    $("#paymentexpecteddatepicker").datepicker($.datepicker.regional["th"]);
                    if ($("#paymentexpecteddatepicker").datepicker("getDate") === null) {
                        $("#paymentexpecteddatepicker").datepicker("option", "defaultDate", new Date());
                    }
                </script>
                <ui:remove>
                <h:inputText id="paymentExpectedDate" style="display: none"
                             required="#{registrationPoController.paymentMethod.expectedDate eq 2 and registrationPoController.immediateCheck and registrationPoController.purchaseOrder.paymentExpectedDate eq null}"
                             requiredMessage="#{msg.require}">
                    <f:convertDateTime pattern="#{msg.dateTimePattern}"/> 
                    <rich:validator/>
                </h:inputText>
                <rich:message for="paymentExpectedDate" style="color:red; display: inline-table"/>
                </ui:remove>
            </td>
        </tr> 
        </table>
    </h:panelGroup>
    <h:panelGroup rendered="#{registrationPoController.paymentMethod.remarks gt 0 and registrationPoController.productFlexField1 ne 'VMI' and registrationPoController.productFlexField1 ne 'CMI'}">
        <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250">
                <h:outputText style="color:red" value="*" rendered="#{registrationPoController.paymentMethod.remarks eq 2}"/>
                Remarks :
            </td>
            <td valign="top">
                <h:inputText value="#{registrationPoController.purchaseOrder.paymentRemarks}"
                                id="paymentRemarks"
                                required="#{registrationPoController.paymentMethod.remarks eq 2 and registrationPoController.immediateCheck}"
                                requiredMessage="#{msg.require}"
                                styleClass="textfield">
                    <rich:validator/>
                </h:inputText>
                <rich:message for="paymentRemarks" style="color:red; display: inline-table"/>
            </td>
        </tr> 
        </table>
    </h:panelGroup>
    <br/><br/>
</h:panelGroup>
<table width="800" border="0" cellpadding="4" cellspacing="0" id="product3">
        <tr>
            <td bgcolor="#F4CDCD" class="line01"><div id="hproduct3">
                    <h4><span class="style4">Payer Information</span><a name="a3" id="a"></a></h4>
                </div></td>
        </tr>
    </table>
<br/><br/>
<h:panelGroup id="panelPayer">
    <table width="100%" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td align="right" valign="top" width="250">* ผู้ชำระเงิน :</td>
            <td valign="top">
                <h:selectOneMenu id="payer" 
                                 value="#{registrationPoController.purchaseOrder.payerType}"
                                 valueChangeListener="#{registrationPoController.payerListener}"
                                 required="#{(registrationPoController.immediateCheck)}"
                                 requiredMessage="#{msg.require}">
                    <f:selectItem itemLabel="Select"/>
                    <f:selectItem itemLabel="Main Insured" itemValue="1" itemDisabled="#{not (registrationPoController.product.familyProduct and registrationPoController.poCopyForMain ne null)}"/>
                    <f:selectItem itemLabel="ตนเอง" itemValue="2"/>
                    <f:selectItem itemLabel="ผู้อื่น" itemValue="3"/>
                    <a4j:ajax event="change" render="panelPayerDetail" limitRender="true" execute="@this"/>
                    <rich:validator/>
                </h:selectOneMenu>
                <rich:message for="payer" style="color:red; display: inline-table"/>
            </td>
        </tr> 
    </table>
    <h:panelGroup id="panelPayerDetail">
        <h:panelGroup rendered="#{registrationPoController.purchaseOrder.payerType eq 3}">
            <table width="100%" border="0" cellspacing="0" cellpadding="3">
                <tr>
                    <td align="right" valign="top" width="250">คำนำหน้าชื่อ :</td>
                    <td valign="top">
                        <h:panelGroup rendered="#{registrationPoController.payerInitialType eq msg.textFieldControl}">
                            <h:inputText id="payerInitialTextField" value="#{registrationPoController.purchaseOrder.payerInitial}"
                                         styleClass="textfield"
                                         required="#{false}"
                                         requiredMessage="#{msg.require}" >
                                <rich:validator/>
                            </h:inputText>
                            <rich:message for="payerInitialTextField" style="color:red; display: inline-table" />
                        </h:panelGroup>
                        <h:panelGroup rendered="#{registrationPoController.payerInitialType eq msg.comboBoxControl}">
                            <h:selectOneMenu id="payerInitialComboBox" value="#{registrationPoController.purchaseOrder.payerInitial}"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                                <f:selectItems value="#{registrationPoController.payerInitialList}"/>
                                <rich:validator/>
                            </h:selectOneMenu>
                            <rich:message for="payerInitialComboBox" style="color:red; display: inline-table" />
                        </h:panelGroup>
                        <h:panelGroup rendered="#{registrationPoController.payerInitialType eq msg.suggestionBoxControl}">
                            <rich:select id="payerInitialSuggestionBox" 
                                         defaultLabel="#{msg.pleaseSelect}"
                                         value="#{registrationPoController.purchaseOrder.payerInitial}"
                                         required="#{false}"
                                         requiredMessage="#{msg.require}">
                                <f:selectItems value="#{registrationPoController.payerInitialList}"/>
                                <a4j:ajax event="blur"
                                          queueId="regQueue"
                                          limitRender="true"
                                          execute="@this"
                                          render="msgInitialSuggestionBox"/>
                            </rich:select>
                            <rich:message id="msgInitialSuggestionBox" for="payerInitialSuggestionBox" style="color:red; display: inline-table" />
                        </h:panelGroup>
                    </td>
                </tr> 
                <tr>
                    <td align="right">* ชื่อ :</td>
                    <td>
                        <h:inputText id="payerName" value="#{registrationPoController.purchaseOrder.payerName}"
                                     styleClass="textfield"
                                     required="#{registrationPoController.immediateCheck}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerName" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                <tr>
                    <td align="right">* นามสกุล :</td>
                    <td>
                        <h:inputText id="payerSurname" value="#{registrationPoController.purchaseOrder.payerSurname}"
                                     styleClass="textfield"
                                     required="#{registrationPoController.immediateCheck}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerSurname" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                <tr>
                    <td align="right">ประเภทบัตร :</td>
                    <td>
                        <h:selectOneMenu  id="payerIdtype" value="#{registrationPoController.purchaseOrder.payerIdtype}"
                                           required="#{false}"
                                           requiredMessage="#{msg.require}">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItem itemLabel="บัตรประชาชน" itemValue="1"/>
                            <f:selectItem itemLabel="หนังสือเดินทาง" itemValue="2"/>
                            <ui:remove>
                            <f:selectItem itemLabel="บัตรข้าราชการ" itemValue="3"/>
                            <f:selectItem itemLabel="ใบสำคัญประจำตัวคนต่างด้าว" itemValue="4"/>
                            </ui:remove>
                            <a4j:ajax event="change" render="panelGroupId" limitRender="true" execute="@this"/>
                            <rich:validator/>
                        </h:selectOneMenu>
                        <rich:message for="payerIdtype" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                <tr>
                    <td align="right">เลขที่บัตร :</td>
                    <td><h:panelGroup id="panelGroupId">
                            <h:panelGroup rendered="#{registrationPoController.purchaseOrder.payerIdtype ne '1'}">
                                <h:inputText id="payerIdcard" value="#{registrationPoController.purchaseOrder.payerIdcard}"
                                             styleClass="textfield"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                    <a4j:ajax event="blur" 
                                              queueId="regQueue" 
                                              render="msgPayerIdcard" 
                                              limitRender="true" 
                                              execute="@this"/>
                                    <rich:validator/>
                                </h:inputText>
                                <rich:message id="msgPayerIdcard" for="payerIdcard" style="color:red; display: inline-table"/>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{registrationPoController.purchaseOrder.payerIdtype eq '1'}">
                                <h:inputText id="pid1" value="#{registrationPoController.pid1}" maxlength="1" style="width: 20px"
                                             onkeypress="return isNumberKey(event)"  
                                             onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('pid2')}.focus()}"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                    <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNoPayer}" 
                                              render="pid1,pmsgId1,pmsgIdno" limitRender="true" execute="@this"/>
                                </h:inputText><rich:message id="pmsgId1" for="pid1" style="color:red"/>
                                <h:inputText id="pid2" value="#{registrationPoController.pid2}" maxlength="4" style="width: 40px"
                                             onkeypress="return isNumberKey(event)"
                                             onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('pid3')}.focus()}"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                    <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNoPayer}" 
                                              render="pid2,pmsgId2,pmsgIdno" limitRender="true" execute="@this"/>
                                </h:inputText><rich:message id="pmsgId2" for="pid2" style="color:red"/>
                                <h:inputText id="pid3" value="#{registrationPoController.pid3}" maxlength="5" style="width: 45px"
                                             onkeypress="return isNumberKey(event)"
                                             onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('pid4')}.focus()}"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                    <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNoPayer}" 
                                              render="pid3,pmsgId3,pmsgIdno" limitRender="true" execute="@this"/>
                                </h:inputText><rich:message id="pmsgId3" for="pid3" style="color:red"/>
                                <h:inputText id="pid4" value="#{registrationPoController.pid4}" maxlength="2" style="width: 25px"
                                             onkeypress="return isNumberKey(event)"
                                             onkeyup="if(this.value.length >= this.getAttribute('maxlength')) {#{rich:element('pid5')}.focus()}"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                    <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNoPayer}" 
                                              render="pid4,pmsgId4,pmsgIdno" limitRender="true" execute="@this"/>
                                </h:inputText><rich:message id="pmsgId4" for="pid4" style="color:red"/>
                                <h:inputText id="pid5" value="#{registrationPoController.pid5}" maxlength="1" style="width: 20px"
                                             onkeypress="return isNumberKey(event)"
                                             required="#{false}"
                                             requiredMessage="#{msg.require}">
                                    <a4j:ajax event="blur" queueId="regQueue" listener="#{registrationPoController.checkIdNoPayer}" 
                                              render="pid5,pmsgId5,pmsgIdno" limitRender="true" execute="@this"/>
                                </h:inputText><rich:message id="pmsgId5" for="pid5" style="color:red"/>
                                <h:outputText id="pmsgIdno" style="color:red" value="#{registrationPoController.msgIdnoPayer}"/>
                            </h:panelGroup>
                        </h:panelGroup>
                    </td>
                </tr>
                <tr>
                    <td align="right">วันที่บัตรหมดอายุ :</td>
                    <td>
                        <h:panelGroup >
                            <ui:remove>
                            <rich:calendar id="payerIdcardExpiryDate" value="#{registrationPoController.purchaseOrder.payerIdcardExpiryDate}"
                                           required="#{false}"
                                           inputClass="textfield" inputSize="14" buttonClass="rfcalbtn"
                                           locale="#{msg.localeTh}"
                                           timeZone="#{registrationPoController.defaultTimeZone}"
                                           datePattern="#{msg.datePattern}">
                                <rich:validator/>
                            </rich:calendar>
                            <rich:message for="payerIdcardExpiryDate" style="color:red; display: inline-table"/>
                            </ui:remove>
                            <a4j:jsFunction name="payerIdCardExpiryDateChange"
                                    limitRender="true" execute="@this"
                                    actionListener="#{registrationPoController.payerIdCardExpiryDateListener}">
                            <a4j:param name="expirydate" />
                            </a4j:jsFunction>
                            <input type="text" id="payerexpirydatepicker" name="payerexpirydate" readonly="readonly" value="#{registrationPoController.convertThaiDate(registrationPoController.purchaseOrder.payerIdcardExpiryDate)}" onchange="payerIdCardExpiryDateChange(this.value)" />
                            <script>
                                $("#payerexpirydatepicker").datepicker($.datepicker.regional["th"]);
                                if ($("#payerexpirydatepicker").datepicker("getDate") === null) {
                                    $("#payerexpirydatepicker").datepicker("option", "minDate", new Date());
                                }else if ($("#payerexpirydatepicker").datepicker("getDate") > new Date()) {
                                    $("#payerexpirydatepicker").datepicker("option", "minDate", new Date());
                                }else{
                                    $("#payerexpirydatepicker").datepicker("option", "minDate", $("#payerexpirydatepicker").datepicker("getDate"));
                                }
                            </script>
                        </h:panelGroup>
                    </td>
                </tr>
                <ui:remove>
                <tr>
                    <td align="right">* เพศ :</td>
                    <td nowrap="nowrap">
                        <h:panelGrid columns="2">
                        <h:selectOneRadio  id="payerGender" value="#{registrationPoController.purchaseOrder.payerGender}"
                                           required="#{registrationPoController.immediateCheck}"
                                           requiredMessage="#{msg.require}">
                            <rich:validator/>
                            <f:selectItem itemLabel="#{msg.male}" itemValue="#{msg.maleValue}"/>
                            <f:selectItem itemLabel="#{msg.female}" itemValue="#{msg.femaleValue}"/>
                        </h:selectOneRadio>
                        <rich:message for="payerGender" style="color:red; display: inline-table"/>
                        </h:panelGrid>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">* วันเดือนปีเกิด :</td>
                    <td>
                        <rich:calendar id="payerDob" value="#{registrationPoController.purchaseOrder.payerDob}"
                                       inputClass="textfield" inputSize="14" buttonClass="rfcalbtn"
                                       required="#{registrationPoController.immediateCheck}"
                                       requiredMessage="#{msg.require}"
                                       locale="#{msg.localeTh}"
                                       timeZone="#{registrationPoController.defaultTimeZone}"
                                       datePattern="#{msg.datePattern}"
                                       enableManualInput="false"
                                       defaultTime="23:59"
                                       todayControlMode="hidden"
                                       oninputkeyup="addSlashes(this)"
                                       >
                            <rich:validator/>
                            <f:facet name="footer">
                                <h:panelGrid columns="4">
                                    <h:outputText value="{todayControl}" />
                                    <h:outputText value="{selectedDateControl}" />
                                    <h:outputText value="{timeControl}" />
                                </h:panelGrid>
                            </f:facet>
                        </rich:calendar>
                        <rich:message for="payerDob" style="color:red; display: inline-table" />
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">* สถานะ :</td>
                    <td>
                        <h:selectOneMenu id="payerMaritalStatus" value="#{registrationPoController.purchaseOrder.payerMaritalStatus}"
                                         required="#{registrationPoController.immediateCheck}"
                                         requiredMessage="#{msg.require}">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.maritalStatusList}" var="s" itemLabel="#{s.description}" itemValue="#{s.value}"/>
                            <rich:validator/>
                        </h:selectOneMenu>
                        <rich:message for="payerMaritalStatus" style="color:red; display: inline-table"/>                
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">อาชีพ :</td>
                    <td>
                        <ui:remove>
                        <h:selectOneMenu id="payeroccupationcategory"
                                         value="#{registrationPoController.payerOccupationCategoryId}"
                                         valueChangeListener="#{registrationPoController.payerOccupationCategoryListener}"
                                         required="#{false}"
                                         requiredMessage="#{msg.require}"
                                         styleClass="select07">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.occupationCategoryList}" var="list" itemValue="#{list.id}" itemLabel="#{list.name}" />
                            <rich:validator/>
                            <a4j:ajax event="change"
                                      queueId="regQueue"
                                      render="payeroccupation"
                                      limitRender="true"
                                      execute="@this"/>
                        </h:selectOneMenu>
                        <rich:message for="payercurrentoccupationcategory" style="color:red; display: inline-table"/>
                        <br/>
                        <h:selectOneMenu id="payeroccupation"
                                         value="#{registrationPoController.payerOccupationId}"
                                         required="#{false}"
                                         requiredMessage="#{msg.require}"
                                         styleClass="select07">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.payerOccupationList}" var="list" itemValue="#{list[0]}" itemLabel="#{list[1]}"/>
                            <rich:validator/>
                        </h:selectOneMenu>
                        <rich:message for="payeroccupation" style="color:red; display: inline-table"/>
                        </ui:remove>

                        <h:selectOneMenu id="payeroccupation"
                                         value="#{registrationPoController.purchaseOrder.payerOccupationCode}"
                                         requiredMessage="#{msg.require}"
                                         styleClass="select07">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItem itemValue="Y001" itemLabel="การก่อสร้าง"/>
                            <f:selectItem itemValue="Y002" itemLabel="การเงิน/ธนาคาร/เงินทุน/ประกัน"/>
                            <f:selectItem itemValue="Y003" itemLabel="การเกษตรและเลี้ยงสัตว์"/>
                            <f:selectItem itemValue="Y004" itemLabel="การบริการ"/>
                            <f:selectItem itemValue="Y005" itemLabel="การกีฬา"/>
                            <f:selectItem itemValue="Y006" itemLabel="ขนส่งและคลังสินค้า"/>
                            <f:selectItem itemValue="Y007" itemLabel="ค้าขาย"/>
                            <f:selectItem itemValue="Y008" itemLabel="โฆษณาและสื่อสาร"/>
                            <f:selectItem itemValue="Y009" itemLabel="ทหาร/ตำรวจ"/>
                            <f:selectItem itemValue="Y010" itemLabel="ทั่วไป"/>
                            <f:selectItem itemValue="Y011" itemLabel="ทำเหมือง"/>
                            <f:selectItem itemValue="Y012" itemLabel="นักวิชาการและการศึกษา"/>
                            <f:selectItem itemValue="Y013" itemLabel="บริการสาธารณชน"/>
                            <f:selectItem itemValue="Y014" itemLabel="การบันเทิง"/>
                            <f:selectItem itemValue="Y015" itemLabel="ประมง"/>
                            <f:selectItem itemValue="Y016" itemLabel="ป่าไม้"/>
                            <f:selectItem itemValue="Y017" itemLabel="การแพทย์"/>
                            <f:selectItem itemValue="Y018" itemLabel="การโรงแรม/ท่องเที่ยว"/>
                            <f:selectItem itemValue="Y019" itemLabel="สาธารณูปโภค/สาธารณูปการ"/>
                            <f:selectItem itemValue="Y020" itemLabel="การปกครอง"/>
                            <f:selectItem itemValue="Y021" itemLabel="อุตสาหกรรมการผลิต"/>
                            <f:selectItem itemValue="Y999" itemLabel="อื่นๆ"/>
                            <rich:validator/>
                        </h:selectOneMenu>
                        <rich:message for="payeroccupation" style="color:red; display: inline-table"/>

                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">ลักษณะอาชีพ :</td>
                    <td>
                        <h:inputText id="payeroccupationother" value="#{registrationPoController.purchaseOrder.payerOccupationOther}"
                                     styleClass="textfield"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payeroccupationother" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">ตำแหน่ง :</td>
                    <td>
                        <h:inputText id="payeroccupationposition" value="#{registrationPoController.purchaseOrder.payerOccupationPosition}"
                                     styleClass="textfield"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payeroccupationposition" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <tr>
                    <td align="right">ความสัมพันธ์กับผู้ขอเอาประกัน :</td>
                    <td>
                        <h:selectOneMenu id="payerRelation" value="#{registrationPoController.purchaseOrder.payerRelation}"
                                         required="#{false}"
                                         requiredMessage="#{msg.require}">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItem itemValue="กองมรดก" itemLabel="กองมรดก"/>
                            <f:selectItem itemValue="คู่หมั้น" itemLabel="คู่หมั้น"/>
                            <f:selectItem itemValue="เจ้าหนี้" itemLabel="เจ้าหนี้"/>
                            <f:selectItem itemValue="ตา" itemLabel="ตา"/>
                            <f:selectItem itemValue="ทวด" itemLabel="ทวด"/>
                            <f:selectItem itemValue="น้องเขย" itemLabel="น้องเขย"/>
                            <f:selectItem itemValue="น้องชาย" itemLabel="น้องชาย"/>
                            <f:selectItem itemValue="น้องสะใภ้" itemLabel="น้องสะใภ้"/>
                            <f:selectItem itemValue="น้องสาว" itemLabel="น้องสาว"/>
                            <f:selectItem itemValue="น้า" itemLabel="น้า"/>
                            <f:selectItem itemValue="น้า" itemLabel="น้า"/>
                            <f:selectItem itemValue="นายจ้าง" itemLabel="นายจ้าง"/>
                            <f:selectItem itemValue="บิดา" itemLabel="บิดา"/>
                            <f:selectItem itemValue="บุตร" itemLabel="บุตร"/>
                            <f:selectItem itemValue="บุตรบุญธรรม" itemLabel="บุตรบุญธรรม"/>
                            <f:selectItem itemValue="บุตรเลี้ยง" itemLabel="บุตรเลี้ยง"/>
                            <f:selectItem itemValue="ป้า" itemLabel="ป้า"/>
                            <f:selectItem itemValue="ปู่" itemLabel="ปู่"/>
                            <f:selectItem itemValue="ผู้อยู่ในอุปการะ" itemLabel="ผู้อยู่ในอุปการะ"/>
                            <f:selectItem itemValue="ผู้อุปการะ" itemLabel="ผู้อุปการะ"/>
                            <f:selectItem itemValue="ผู้เอาประกันภัย" itemLabel="ผู้เอาประกันภัย"/>
                            <f:selectItem itemValue="พี่เขย" itemLabel="พี่เขย"/>
                            <f:selectItem itemValue="พี่ชาย" itemLabel="พี่ชาย"/>
                            <f:selectItem itemValue="พี่สะใภ้" itemLabel="พี่สะใภ้"/>
                            <f:selectItem itemValue="พี่สาว" itemLabel="พี่สาว"/>
                            <f:selectItem itemValue="เพื่อน" itemLabel="เพื่อน"/>
                            <f:selectItem itemValue="ภรรยา" itemLabel="ภรรยา"/>
                            <f:selectItem itemValue="มารดา" itemLabel="มารดา"/>
                            <f:selectItem itemValue="ย่า" itemLabel="ย่า"/>
                            <f:selectItem itemValue="ยาย" itemLabel="ยาย"/>
                            <f:selectItem itemValue="ลุง" itemLabel="ลุง"/>
                            <f:selectItem itemValue="ลูกพี่ลูกน้อง" itemLabel="ลูกพี่ลูกน้อง"/>
                            <f:selectItem itemValue="ลูกสะใภ้" itemLabel="ลูกสะใภ้"/>
                            <f:selectItem itemValue="สาธารณะกุศล" itemLabel="สาธารณะกุศล"/>
                            <f:selectItem itemValue="สามี" itemLabel="สามี"/>
                            <f:selectItem itemValue="หลานเขย" itemLabel="หลานเขย"/>
                            <f:selectItem itemValue="หลานชาย" itemLabel="หลานชาย"/>
                            <f:selectItem itemValue="หลานสะใภ้" itemLabel="หลานสะใภ้"/>
                            <f:selectItem itemValue="หลานสาว" itemLabel="หลานสาว"/>
                            <f:selectItem itemValue="เหลน" itemLabel="เหลน"/>
                            <f:selectItem itemValue="อา" itemLabel="อา"/>
                            <rich:validator/>
                        </h:selectOneMenu>
                        <rich:message for="payerRelation" style="color:red"/>   
                    </td>
                </tr>
                <ui:remove>
                <tr>
                    <td align="right">* ที่อยู่ (เลขที่, หมู่บ้าน, ซอย) :</td>
                    <td>
                        <h:inputText id="payeraddress1" value="#{registrationPoController.purchaseOrder.payerAddress1}"
                                     styleClass="textfield"
                                     size="40"
                                     maxlength="30"
                                     required="#{registrationPoController.immediateCheck}"
                                     requiredMessage="#{msg.require}" >
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payeraddress1" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">ที่อยู่ (อาคาร) :</td>
                    <td>
                        <h:inputText id="payeraddress2" value="#{registrationPoController.purchaseOrder.payerAddress2}"
                                     styleClass="textfield"
                                     size="40"
                                     maxlength="30"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}" >
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payeraddress2" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">ที่อยู่ (ถนน) :</td>
                    <td>
                        <h:inputText id="payeraddress3" value="#{registrationPoController.purchaseOrder.payerAddress3}"
                                     styleClass="textfield"
                                     size="40"
                                     maxlength="48"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}" >
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payeraddress3" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">* จังหวัด :</td>
                    <td>
                        <h:selectOneMenu id="payerprovince"
                                         value="#{registrationPoController.payerProvinceId}"
                                         valueChangeListener="#{registrationPoController.payerProvinceListener}"
                                         required="#{registrationPoController.immediateCheck}"
                                         requiredMessage="#{msg.require}"
                                         styleClass="select07">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.provinceList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                            <rich:validator/>
                            <a4j:ajax event="change"
                                      queueId="regQueue"
                                      render="payerdistrict, payersubdistrict, payerPostal"
                                      limitRender="true"
                                      execute="@this"/>
                        </h:selectOneMenu>
                        <rich:message for="payerprovince" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">* อำเภอ :</td>
                    <td>
                        <h:selectOneMenu id="payerdistrict"
                                         value="#{registrationPoController.payerDistrictId}"
                                         valueChangeListener="#{registrationPoController.payerDistrictListener}"
                                         required="#{registrationPoController.immediateCheck}"
                                         requiredMessage="#{msg.require}"
                                         styleClass="select07">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.payerDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                            <rich:validator/>
                            <a4j:ajax event="change"
                                      queueId="regQueue"
                                      render="payersubdistrict, payerPostal"
                                      limitRender="true"
                                      execute="@this"/>
                        </h:selectOneMenu>
                        <rich:message for="payerdistrict" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">* ตำบล :</td>
                    <td>
                        <h:selectOneMenu id="payersubdistrict"
                                         value="#{registrationPoController.payerSubDistrictId}"
                                         valueChangeListener="#{registrationPoController.payerSubDistrictListener}"
                                         required="#{registrationPoController.immediateCheck}"
                                         requiredMessage="#{msg.require}"
                                         styleClass="select07">
                            <f:selectItem itemLabel="#{msg.pleaseSelect}"/>
                            <f:selectItems value="#{registrationPoController.payerSubDistrictList}" var="list" itemLabel="#{list[1]}" itemValue="#{list[0]}"/>
                            <rich:validator/>
                            <a4j:ajax event="change"
                                      queueId="regQueue"
                                      render="payerPostal"
                                      limitRender="true"
                                      execute="@this"/>
                        </h:selectOneMenu>
                        <rich:message for="payersubdistrict" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <ui:remove>
                <tr>
                    <td align="right">* รหัสไปรษณีย์ :</td>
                    <td>
                        <h:inputText id="payerPostal"
                                     value="#{registrationPoController.payerPostalCode}"
                                     required="#{registrationPoController.immediateCheck}"
                                     requiredMessage="#{msg.require}"
                                     styleClass="textfield"
                                     size="20"
                                     maxlength="5">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerPostal" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                </ui:remove>
                <tr>
                    <td align="right">โทรศัพท์บ้าน :</td>
                    <td>
                        <h:inputText id="payerHomePhone" value="#{registrationPoController.purchaseOrder.payerHomePhone}"
                                     styleClass="textfield"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerHomePhone" style="color:red; display: inline-table"/>
                    </td>
                </tr>
                <tr>
                    <td align="right">* โทรศัพท์มือถือ :</td>
                    <td>
                        <h:inputText id="payerMobilePhone" value="#{registrationPoController.purchaseOrder.payerMobilePhone}"
                                     styleClass="textfield"
                                     required="#{registrationPoController.immediateCheck}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerMobilePhone" style="color:red"/>
                    </td>
                </tr>
                <tr>
                    <td align="right">โทรศัพท์ที่ทำงาน :</td>
                    <td>
                        <h:inputText id="payerOfficePhone" value="#{registrationPoController.purchaseOrder.payerOfficePhone}"
                                     styleClass="textfield"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerOfficePhone" style="color:red"/>
                    </td>
                </tr>
                <ui:remove>
                <tr>
                    <td align="right">Email :</td>
                    <td>
                        <h:inputText id="payerEmail" value="#{registrationPoController.purchaseOrder.payerEmail}"
                                     styleClass="textfield"
                                     required="#{false}"
                                     requiredMessage="#{msg.require}">
                            <rich:validator/>
                        </h:inputText>
                        <rich:message for="payerOfficePhone" style="color:red"/>
                    </td>
                </tr>
                </ui:remove>
            </table>   
        </h:panelGroup>
    </h:panelGroup>
    <br/><br/>
</h:panelGroup>
</h:panelGroup>    
<h:panelGroup id="delivery" rendered="#{(registrationPoController.product.deliveryMethod ne null) and (registrationPoController.product.deliveryMethod ne '')}" >
<table width="1200" border="0" cellpadding="4" cellspacing="0" id="product3">
    <tr>
        <td bgcolor="#e45d27" class="line01"><a name="a3" id="a3"/><div id="hproduct3"><h4 class="white01 style3" style="font-weight: bold">Delivery Method</h4></div></td>
    </tr>
    <tr>
        <td>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="100%" rowspan="2" valign="top">
                    <table width="100%" border="0" cellspacing="0" cellpadding="4">
                     <tr>
                        <td align="right" valign="top">Delivery Method: </td>
                        <td valign="top">
                            <h:selectOneMenu id="deliveryId" value="#{registrationPoController.deliveryId}"
                                            styleClass="select08">
                                <f:selectItem itemLabel="Please Select"/>
                                <f:selectItems value="#{registrationPoController.deliveryMethodList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                            </h:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td align="right" valign="top">Delivery Date: </td>
                        <td valign="top">
                            <rich:calendar id="deliveryDate"
                                           value="#{registrationPoController.deliveryDate}"
                                           inputClass="textfield" inputSize="15" buttonClass="rfcalbtn"
                                           datePattern="#{msg.dateTimePattern}"
                                           locale="#{msg.locale}"
                                           timeZone="#{registrationPoController.defaultTimeZone}"
                                           defaultTime="00:00"/>
                        </td>
                    </tr>
                    <tr>
                        <td align="right" valign="top">Delivery Description: </td>
                        <td valign="top">
                            <h:inputTextarea id="deliveryDesc" cols="40" rows="5" value="#{registrationPoController.deliveryDescription}"/>
                        </td>
                    </tr>
                    </table>
                </td>
                <td width="66" height="100" align="center" valign="top"><a href="#a2"><img src="#{request.contextPath}/icon/up.png" width="42" height="42"/>
                </a></td>
            </tr>
            <tr>
                <td align="center" valign="bottom"><a href="#a4"><img src="#{request.contextPath}/icon/down.png" width="42" height="42"/></a></td>
            </tr>
        </table>
        </td>
    </tr>
    <tr>
        <td></td>
    </tr>
</table>
</h:panelGroup>
<table width="800" border="0" cellpadding="4" cellspacing="0" id="product4">
    <tr>
        <td bgcolor="#AAD9F2" class="line01"><a name="a4" id="a4"/><div id="hproduct4"><h4 class="style5">Sale Result</h4></div></td>
    </tr>
    <tr>
        <td>
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="1566" rowspan="2" valign="top">
                        <table width="100%" border="0" cellpadding="4" cellspacing="0">
                            <tr>
                                <td width="150" align="right" valign="top"></td>
                                <td align="right"></td>
                            </tr>
                            <tr>
                                <td width="100" align="right" valign="top"><span class="blue04">Sale Result:</span></td>
                                <td><table border="0" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td valign="top">&#160;</td>
                                            <td valign="top">
                                                <a4j:jsFunction name="renderAgain" execute="@form"
                                                                render="panelForm,nosaleReasonId,msgNosaleReason,followupsaleReasonId">
                                                </a4j:jsFunction>
                                                <a4j:jsFunction name="clickAction" execute="@form"
                                                                oncomplete="#{rich:component('waitPopup')}.hide(); renderAgain();">
                                                </a4j:jsFunction>
                                                <h:panelGroup>
                                                <h:selectOneRadio value="#{registrationPoController.purchaseOrder.saleResult}"
                                                                  layout="pageDirection"
                                                                  style="padding: 3px">
                                                    <f:selectItem itemValue="Y" itemLabel="Yes"/>
                                                    <f:selectItem itemValue="N" itemLabel="No"/>
                                                    <f:selectItem itemValue="F" itemLabel="Follow up"/>
                                                    <a4j:ajax event="click" execute="@this"
                                                              listener="#{registrationPoController.checkImmediate}"
                                                              render="nosaleReasonId,msgNosaleReason,followupsaleReasonId,msgSaveRemark"
                                                              onbegin="#{rich:component('waitPopup')}.show('',{height:'80px', width:'150px'})"
                                                              oncomplete="#{rich:component('waitPopup')}.hide()"/>
                                                </h:selectOneRadio>
                                                </h:panelGroup>
                                </td>
                                <td valign="top">
                                <h:panelGrid id="panelReason" columns="2" cellpadding="1">
                                    <h:outputText value="&#160;" style="line-height: 25px"/>
                                    <h:outputText value=" "/>

                                    <h:outputText value="Reason :"/>
                                    <h:panelGroup>
                                        <h:selectOneMenu id="nosaleReasonId"
                                                         value="#{registrationPoController.nosaleReasonId}"
                                                         required="#{fn:contains(registrationPoController.purchaseOrder.saleResult, 'N')}"
                                                         requiredMessage="#{msg.require}"
                                                         disabled="#{not fn:contains(registrationPoController.purchaseOrder.saleResult, 'N')}">
                                            <f:selectItem itemLabel="Please Select"/>
                                            <f:selectItems value="#{registrationPoController.nosaleReasonList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message id="msgNosaleReason" for="nosaleReasonId" style="color:red; display: inline-table"/>
                                    </h:panelGroup>

                                    <h:outputText value="Reason :"/>
                                    <h:panelGroup>
                                        <h:selectOneMenu id="followupsaleReasonId"
                                                         value="#{registrationPoController.followupsaleReasonId}"
                                                         required="#{fn:contains(registrationPoController.purchaseOrder.saleResult, 'F')}"
                                                         requiredMessage="#{msg.require}"
                                                         disabled="#{not fn:contains(registrationPoController.purchaseOrder.saleResult, 'F')}">
                                            <f:selectItem itemLabel="Please Select"/>
                                            <f:selectItems value="#{registrationPoController.followupsaleReasonList}" var="list" itemLabel="#{list.name}" itemValue="#{list.id}"/>
                                            <rich:validator/>
                                        </h:selectOneMenu>
                                        <rich:message for="followupsaleReasonId" style="color:red; display: inline-table"/>
                                    </h:panelGroup>
                                    <ui:remove>
                                    <h:outputText value="Schedule :"/>
                                    <h:panelGroup>
                                        <rich:calendar value="#{registrationPoController.purchaseOrder.followupsaleDate}"
                                                       locale="#{msg.locale}"
                                                       popup="true"
                                                       datePattern="#{msg.dateTimePattern}"
                                                       inputClass="textfield" inputSize="15" buttonClass="rfcalbtn"
                                                       resetTimeOnDateSelect="false"
                                                       defaultTime="12:00"
                                                       disabled="#{fn:contains(registrationPoController.purchaseOrder.saleResult, 'F') ? false : true}"/>
                                    </h:panelGroup>
                                    </ui:remove>
                                </h:panelGrid>
                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td></td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <h:panelGrid id="panelSave" columns="1" cellpadding="1">
                            <a4j:commandButton image="/img/b_save.png"
                                               action="#{registrationPoController.saveAction}"
                                               actionListener="#{qaFormController.saveQaTrans}"
                                               onclick="#{rich:component('waitPopup')}.show('',{height:'80px', width:'150px'})"
                                               rendered="#{(registrationPoController.product.registrationForm.qaForm ne null) and not registrationPoController.disableSaveButton}"
                                               oncomplete="#{rich:component('waitPopup')}.hide();" render="formMessageTxt" >
                            </a4j:commandButton>
                            <a4j:commandButton image="/img/b_save.png"
                                             action="#{registrationPoController.saveAction}"
                                             onclick="#{rich:component('waitPopup')}.show('',{height:'80px', width:'150px'})"
                                             rendered="#{(registrationPoController.product.registrationForm.qaForm eq null) and not registrationPoController.disableSaveButton}"
                                             oncomplete="#{rich:component('waitPopup')}.hide();" render="formMessageTxt" />
                        </h:panelGrid>
                    </td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td><h:outputText id="msgSaveRemark" value="#{registrationPoController.msgSaveRemark}" style="color: blue" /></td>
                </tr>
                <tr>
                    <td align="left" colspan="2">

                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="50%" align="left">
                                    <h:commandButton image="/resources/img/b_back.png"
                                                     action="#{registrationPoController.previous}"
                                                     immediate="true"
                                                     rendered="#{registrationPoController.showPrevious}"/>
                                </td>
                                <td width="50%" align="right">
                                    <ui:remove>
                                    <h:commandButton id="imgNext"
                                                     image="/img/b_next.png"
                                                     immediate="true"
                                                     action="#{registrationPoController.nextAction}"
                                                     rendered="#{registrationPoController.purchaseOrder.id ne null and fn:contains(registrationPoController.purchaseOrder.saleResult, 'Y')}">
                                    </h:commandButton>
                                    </ui:remove>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            <br/>
                    </td>
                    <td width="66" height="100" align="center" valign="top">
                        <a href="#a3"><img src="#{request.contextPath}/icon/up.png" width="42" height="42"/></a>
                    </td>
                </tr>
                <tr>
                    <td align="center" valign="bottom">
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td></td>
    </tr>
</table>
</ui:composition>
